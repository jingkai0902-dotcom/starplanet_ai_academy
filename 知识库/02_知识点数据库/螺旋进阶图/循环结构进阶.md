# 循环结构进阶

> **用途**：循环结构在各课程体系中的螺旋式进阶详解
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/、萃取报告/STEM/

---

## 进阶路线图

```
STEM大班              CODE1               CODE2               PYAI L1             PYAI L2
重复动作        →     重复执行      →     条件循环      →     for/while     →     递归
   ↓                    ↓                   ↓                   ↓                   ↓
"转5圈"             重复10次          重复直到...        for i in range()    def f(): f()
```

---

## 一、STEM阶段：重复动作（3-6岁）

### 1.1 概念引入

在STEM阶段，循环以"重复动作"的形式出现，让孩子理解"做同样的事情很多次"。

### 1.2 课程出现

| 课程编号 | 课程名称 | 循环表现 |
|----------|---------|---------|
| STEM 3-4-05 | 智能风扇 | 舵机来回转动 |
| STEM 3-4-06 | 旋转木马 | 马达持续旋转 |

### 1.3 教学话术

> "看，风扇一直在转，转了一圈又一圈。这就是重复——做同样的事情很多次。"

### 1.4 认知目标

- 理解"重复"的概念
- 能数出重复的次数
- 理解"一直做"和"做几次"的区别

---

## 二、CODE1阶段：固定循环（6-8岁）

### 2.1 概念深化

从具体的"重复动作"过渡到抽象的"重复执行"积木，引入次数控制。

### 2.2 课程出现

| 课程编号 | 课程名称 | 循环类型 | 具体内容 |
|----------|---------|---------|---------|
| CODE1-3-05 | 循环基础 | 固定循环 | 重复执行、重复10次 |
| CODE1-3-06 | 循环应用 | 嵌套循环 | 画正方形（重复4次） |
| CODE1-3-07 | 条件循环 | 条件循环 | 重复执行直到... |

### 2.3 Scratch积木

```scratch
// 无限循环
重复执行
    移动 (10) 步
    碰到边缘就反弹

// 固定次数循环
重复 (4) 次
    移动 (100) 步
    右转 (90) 度

// 条件循环
重复执行直到 <碰到 [边缘]>
    移动 (10) 步
```

### 2.4 教学话术

> "重复执行就像一个永不停止的机器，一直做下去。重复10次就像数数，做完10次就停。重复直到...就像'一直走到墙边'，达到条件才停。"

### 2.5 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 无限循环没有退出条件 | 程序卡死 | 添加停止条件或使用条件循环 |
| ❌ 循环次数设置错误 | 结果不对 | 先手动数一遍需要重复几次 |

---

## 三、CODE2阶段：条件循环与嵌套（8-10岁）

### 3.1 概念扩展

引入更复杂的循环控制，包括传感器驱动的循环和多层嵌套。

### 3.2 课程出现

| 课程编号 | 课程名称 | 循环类型 | 具体内容 |
|----------|---------|---------|---------|
| CODE2-1-03 | 传感器循环 | 条件循环 | 重复直到检测到... |
| CODE2-2-05 | 嵌套循环 | 双层嵌套 | 画多个图形 |
| CODE2-3-02 | 游戏循环 | 游戏主循环 | 敌人生成循环 |

### 3.3 Scratch积木

```scratch
// 传感器驱动循环
重复执行直到 <(光线传感器) < (50)>
    // 等待光线变暗

// 嵌套循环（画3x3网格）
重复 (3) 次
    重复 (3) 次
        画正方形
        移动 (50) 步
    回到行首
    下移一行

// 游戏主循环
重复执行
    如果 <(计时器) > (2)> 那么
        生成敌人
        重置计时器
```

### 3.4 教学话术

> "嵌套循环就像俄罗斯套娃，大循环里面套着小循环。外面的循环每执行一次，里面的循环就完整执行一遍。"

---

## 四、PYAI L1阶段：for/while循环（10-12岁）

### 4.1 概念转化

从图形化积木过渡到Python代码，理解循环的语法结构。

### 4.2 课程出现

| 课程编号 | 课程名称 | 循环类型 | 具体内容 |
|----------|---------|---------|---------|
| PYAI 1-0-5 | while循环 | 条件循环 | `while True:` |
| PYAI 1-0-6 | for循环 | 计数循环 | `for i in range(4):` |
| PYAI 1-3-5 | 遍历循环 | 遍历循环 | `for item in list:` |

### 4.3 Python代码

```python
# while循环 - 条件循环
count = 0
while count < 10:
    print(count)
    count += 1

# for循环 - 计数循环
for i in range(10):
    print(i)

# for循环 - 遍历列表
fruits = ['apple', 'banana', 'cherry']
for fruit in fruits:
    print(fruit)

# 嵌套循环 - 九九乘法表
for i in range(1, 10):
    for j in range(1, i + 1):
        print(f"{j}×{i}={i*j}", end="\t")
    print()
```

### 4.4 Scratch → Python 映射

| Scratch积木 | Python语法 |
|------------|-----------|
| 重复执行 | `while True:` |
| 重复(10)次 | `for i in range(10):` |
| 重复执行直到<条件> | `while not condition:` |

### 4.5 教学话术

> "Python的for循环就像Scratch的'重复10次'，range(10)就是从0数到9。while循环就像'重复执行直到'，只要条件成立就一直执行。"

### 4.6 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 忘记缩进 | 语法错误 | 循环体必须缩进4个空格 |
| ❌ while条件永远为True | 死循环 | 确保条件会变为False |
| ❌ range(10)以为是1-10 | 结果错误 | range(10)是0-9 |

---

## 五、PYAI L2阶段：递归（12岁+）

### 5.1 概念升华

从迭代循环升级到递归，理解"函数调用自身"的概念。

### 5.2 课程出现

| 课程编号 | 课程名称 | 递归类型 | 具体内容 |
|----------|---------|---------|---------|
| PYAI 2-1-3 | 递归基础 | 简单递归 | 阶乘、斐波那契 |
| PYAI 2-1-4 | 递归应用 | 分治递归 | 汉诺塔、分形图 |

### 5.3 Python代码

```python
# 递归计算阶乘
def factorial(n):
    if n <= 1:  # 基准条件（递归出口）
        return 1
    return n * factorial(n - 1)  # 递归调用

# 递归计算斐波那契数列
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)

# 递归绘制分形树
import turtle

def draw_tree(branch_len):
    if branch_len < 5:  # 基准条件
        return
    turtle.forward(branch_len)
    turtle.right(20)
    draw_tree(branch_len - 15)  # 递归绘制右分支
    turtle.left(40)
    draw_tree(branch_len - 15)  # 递归绘制左分支
    turtle.right(20)
    turtle.backward(branch_len)
```

### 5.4 递归三要素

1. **基准条件**：递归的出口，防止无限递归
2. **递归调用**：函数调用自身
3. **问题规模缩小**：每次递归问题变小

### 5.5 教学话术

> "递归就像照镜子时看到镜子里还有镜子。函数调用自己，但每次问题都变小一点，直到小到可以直接解决。"

### 5.6 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 没有基准条件 | 栈溢出 | 必须有递归出口 |
| ❌ 问题规模不缩小 | 无限递归 | 确保每次递归问题变小 |

---

## 六、跨阶段对比

### 6.1 概念演进

| 阶段 | 循环形式 | 抽象程度 | 控制方式 |
|------|---------|---------|---------|
| STEM | 重复动作 | 具体 | 物理操作 |
| CODE1 | 重复积木 | 半抽象 | 图形化 |
| CODE2 | 条件循环 | 半抽象 | 图形化+传感器 |
| PYAI L1 | for/while | 抽象 | 代码 |
| PYAI L2 | 递归 | 高度抽象 | 代码 |

### 6.2 认知负荷

```
STEM        CODE1       CODE2       PYAI L1     PYAI L2
  ⭐          ⭐⭐         ⭐⭐⭐        ⭐⭐⭐⭐       ⭐⭐⭐⭐⭐
 低           中          中高         高          很高
```

---

## 七、教学建议

### 7.1 衔接策略

| 衔接点 | 策略 |
|--------|------|
| STEM→CODE1 | 用"重复动作"引出"重复执行"积木 |
| CODE1→CODE2 | 用传感器让循环"有意义" |
| CODE→Python | 先展示Scratch积木，再对照Python代码 |
| 迭代→递归 | 先用循环解决，再展示递归解法 |

### 7.2 常见教学难点

| 难点 | 解决方案 |
|------|---------|
| 循环次数理解 | 用手指数，或画表格追踪 |
| 嵌套循环 | 用"外层是行，内层是列"类比 |
| while vs for | while是"直到"，for是"数数" |
| 递归理解 | 用俄罗斯套娃或分形图可视化 |

---

**维护者**：知识库管理员
**关联文件**：[螺旋进阶总图.md](螺旋进阶总图.md)
