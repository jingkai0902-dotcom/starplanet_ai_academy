# 条件判断进阶

> **用途**：条件判断在各课程体系中的螺旋式进阶详解
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/、萃取报告/STEM/

---

## 进阶路线图

```
STEM大班              CODE1               CODE2               PYAI L1             PYAI L2
简单选择        →     如果...那么   →     嵌套判断      →     if-elif-else  →     状态机
   ↓                    ↓                   ↓                   ↓                   ↓
"红灯停"            单分支判断          多层嵌套           多分支判断          复杂状态
```

---

## 一、STEM阶段：简单选择（3-6岁）

### 1.1 概念引入

在STEM阶段，条件判断以"如果...就..."的日常语言形式出现。

### 1.2 课程出现

| 课程编号 | 课程名称 | 条件表现 |
|----------|---------|---------|
| STEM 3-4-01 | 智能灯 | 按钮按下→灯亮 |
| STEM 3-4-03 | 红绿灯 | 红灯→停，绿灯→走 |

### 1.3 教学话术

> "如果按下按钮，灯就亮。如果松开按钮，灯就灭。这就是'如果...就...'的规则。"

### 1.4 认知目标

- 理解因果关系
- 能用"如果...就..."描述规则
- 理解条件和结果的对应

---

## 二、CODE1阶段：单分支与双分支（6-8岁）

### 2.1 概念深化

从日常语言过渡到编程积木，引入"如果...那么"和"如果...那么...否则"。

### 2.2 课程出现

| 课程编号 | 课程名称 | 判断类型 | 具体内容 |
|----------|---------|---------|---------|
| CODE1-3-08 | 条件基础 | 单分支 | 如果...那么 |
| CODE1-3-09 | 双分支 | 双分支 | 如果...那么...否则 |
| CODE1-4-03 | 碰撞检测 | 条件应用 | 如果碰到... |

### 2.3 Scratch积木

```scratch
// 单分支
如果 <碰到 [敌人]> 那么
    将 [生命] 改变 (-1)

// 双分支
如果 <(得分) > (100)> 那么
    说 [你赢了！]
否则
    说 [继续加油！]

// 条件组合
如果 <<碰到 [边缘]> 或 <碰到 [障碍物]>> 那么
    碰到边缘就反弹
```

### 2.4 教学话术

> "'如果...那么'就像门卫，只有满足条件才能进去。'如果...那么...否则'就像岔路口，满足条件走一条路，不满足走另一条路。"

### 2.5 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 条件写反 | 逻辑错误 | 先用语言描述清楚条件 |
| ❌ 忘记否则分支 | 遗漏情况 | 思考"不满足条件时怎么办" |

---

## 三、CODE2阶段：嵌套判断与布尔逻辑（8-10岁）

### 3.1 概念扩展

引入多层嵌套判断和布尔运算符（AND/OR/NOT）。

### 3.2 课程出现

| 课程编号 | 课程名称 | 判断类型 | 具体内容 |
|----------|---------|---------|---------|
| CODE2-3-06 | 嵌套判断 | 多层嵌套 | 多层If-Else |
| CODE2-3-07 | 与运算 | AND | 两个条件都满足 |
| CODE2-3-08 | 或运算 | OR | 任一条件满足 |
| CODE2-3-09 | 非运算 | NOT | 条件取反 |

### 3.3 Scratch积木

```scratch
// 嵌套判断
如果 <(得分) > (100)> 那么
    如果 <(生命) > (0)> 那么
        说 [完美通关！]
    否则
        说 [险胜！]
否则
    说 [再接再厉！]

// AND运算
如果 <<按下 [空格键]> 且 <(子弹数) > (0)>> 那么
    发射子弹

// OR运算
如果 <<碰到 [敌人]> 或 <碰到 [陷阱]>> 那么
    游戏结束

// NOT运算
如果 <不成立 <碰到 [地面]>> 那么
    // 在空中
    将 [Y速度] 改变 (-1)
```

### 3.4 布尔逻辑真值表

| A | B | A AND B | A OR B | NOT A |
|---|---|---------|--------|-------|
| 真 | 真 | 真 | 真 | 假 |
| 真 | 假 | 假 | 真 | 假 |
| 假 | 真 | 假 | 真 | 真 |
| 假 | 假 | 假 | 假 | 真 |

### 3.5 教学话术

> "AND就像'并且'，两个条件都要满足。OR就像'或者'，满足一个就行。NOT就像'不是'，把真变假、假变真。"

---

## 四、PYAI L1阶段：if-elif-else（10-12岁）

### 4.1 概念转化

从图形化积木过渡到Python代码，引入多分支判断。

### 4.2 课程出现

| 课程编号 | 课程名称 | 判断类型 | 具体内容 |
|----------|---------|---------|---------|
| PYAI 1-0-10 | 条件判断 | 多分支 | `if...elif...else:` |
| PYAI 1-2-5 | 逻辑运算 | 布尔运算 | `and`, `or`, `not` |
| PYAI 1-2-6 | 比较运算 | 比较 | `==`, `!=`, `<`, `>` |

### 4.3 Python代码

```python
# 单分支
if score > 100:
    print("你赢了！")

# 双分支
if score > 100:
    print("你赢了！")
else:
    print("继续加油！")

# 多分支
if score >= 90:
    grade = 'A'
elif score >= 80:
    grade = 'B'
elif score >= 70:
    grade = 'C'
elif score >= 60:
    grade = 'D'
else:
    grade = 'F'

# 布尔运算
if key_pressed and bullets > 0:
    shoot()

if hit_enemy or hit_trap:
    game_over()

if not on_ground:
    apply_gravity()
```

### 4.4 Scratch → Python 映射

| Scratch积木 | Python语法 |
|------------|-----------|
| 如果<条件>那么 | `if condition:` |
| 如果<条件>那么...否则 | `if...else:` |
| <条件1>且<条件2> | `condition1 and condition2` |
| <条件1>或<条件2> | `condition1 or condition2` |
| 不成立<条件> | `not condition` |

### 4.5 教学话术

> "Python的if就像Scratch的'如果...那么'。elif是'否则如果'，可以有很多个。else是最后的'否则'，前面都不满足就执行它。"

### 4.6 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 用=代替== | 语法错误 | =是赋值，==是比较 |
| ❌ 忘记冒号 | 语法错误 | if/elif/else后必须有冒号 |
| ❌ elif顺序错误 | 逻辑错误 | 从严格到宽松排列条件 |

---

## 五、PYAI L2阶段：状态机（12岁+）

### 5.1 概念升华

从简单条件判断升级到状态机设计，管理复杂的状态转换。

### 5.2 课程出现

| 课程编号 | 课程名称 | 状态机类型 | 具体内容 |
|----------|---------|---------|---------|
| PYAI 2-3-2 | 眨眼检测 | 简单状态机 | 睁眼/闭眼状态 |
| PYAI 2-3-3 | 眼控开关 | 状态切换 | 开/关状态 |

### 5.3 Python代码

```python
# 简单状态机 - 眨眼检测
class BlinkDetector:
    def __init__(self):
        self.state = 'OPEN'  # 初始状态：睁眼
        self.blink_count = 0

    def update(self, eye_distance):
        THRESHOLD = 0.02

        if self.state == 'OPEN':
            if eye_distance < THRESHOLD:
                self.state = 'CLOSED'  # 状态转换：睁眼→闭眼
        elif self.state == 'CLOSED':
            if eye_distance >= THRESHOLD:
                self.state = 'OPEN'    # 状态转换：闭眼→睁眼
                self.blink_count += 1  # 完成一次眨眼

# 游戏状态机
class GameState:
    def __init__(self):
        self.state = 'MENU'

    def update(self, event):
        if self.state == 'MENU':
            if event == 'START':
                self.state = 'PLAYING'
        elif self.state == 'PLAYING':
            if event == 'PAUSE':
                self.state = 'PAUSED'
            elif event == 'GAME_OVER':
                self.state = 'GAME_OVER'
        elif self.state == 'PAUSED':
            if event == 'RESUME':
                self.state = 'PLAYING'
            elif event == 'QUIT':
                self.state = 'MENU'
        elif self.state == 'GAME_OVER':
            if event == 'RESTART':
                self.state = 'PLAYING'
            elif event == 'QUIT':
                self.state = 'MENU'
```

### 5.4 状态机设计要素

1. **状态集合**：所有可能的状态
2. **初始状态**：程序开始时的状态
3. **转换条件**：从一个状态到另一个状态的条件
4. **转换动作**：状态转换时执行的操作

### 5.5 状态图示例

```
        START
          ↓
    ┌─────────────┐
    │    MENU     │←──────────┐
    └──────┬──────┘           │
           │ START            │ QUIT
           ↓                  │
    ┌─────────────┐     ┌─────┴─────┐
    │   PLAYING   │←───→│  PAUSED   │
    └──────┬──────┘     └───────────┘
           │ GAME_OVER        ↑
           ↓                  │ QUIT
    ┌─────────────┐           │
    │  GAME_OVER  │───────────┘
    └─────────────┘
```

### 5.6 教学话术

> "状态机就像交通灯，有红、黄、绿三种状态，按照规则切换。程序也可以有不同状态，根据条件在状态之间切换。"

---

## 六、跨阶段对比

### 6.1 概念演进

| 阶段 | 判断形式 | 抽象程度 | 复杂度 |
|------|---------|---------|--------|
| STEM | 如果...就... | 具体 | 单一条件 |
| CODE1 | 如果...那么 | 半抽象 | 单/双分支 |
| CODE2 | 嵌套+布尔 | 半抽象 | 多层嵌套 |
| PYAI L1 | if-elif-else | 抽象 | 多分支 |
| PYAI L2 | 状态机 | 高度抽象 | 状态转换 |

### 6.2 认知负荷

```
STEM        CODE1       CODE2       PYAI L1     PYAI L2
  ⭐          ⭐⭐         ⭐⭐⭐        ⭐⭐⭐⭐       ⭐⭐⭐⭐⭐
 低           中          中高         高          很高
```

---

## 七、教学建议

### 7.1 衔接策略

| 衔接点 | 策略 |
|--------|------|
| STEM→CODE1 | 用日常"如果...就..."引出积木 |
| CODE1→CODE2 | 用复杂游戏需求引出嵌套和布尔 |
| CODE→Python | 先展示Scratch积木，再对照Python代码 |
| 条件→状态机 | 用交通灯或游戏状态引入状态机概念 |

### 7.2 常见教学难点

| 难点 | 解决方案 |
|------|---------|
| 条件顺序 | 用流程图可视化判断顺序 |
| 布尔逻辑 | 用真值表和实际例子解释 |
| elif vs 嵌套if | elif是"互斥选择"，嵌套if是"层层筛选" |
| 状态机设计 | 先画状态图，再写代码 |

---

**维护者**：知识库管理员
**关联文件**：[螺旋进阶总图.md](螺旋进阶总图.md)
