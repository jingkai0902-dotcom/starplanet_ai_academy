# 函数与封装进阶

> **用途**：函数与封装在各课程体系中的螺旋式进阶详解
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/、萃取报告/STEM/

---

## 进阶路线图

```
STEM大班              CODE1               PYAI L1             PYAI L1             PYAI L2
模块化思维      →     自制积木      →     函数定义      →     参数返回值    →     递归/OOP
   ↓                    ↓                   ↓                   ↓                   ↓
"分步骤"            代码复用            def定义            return             class
```

---

## 一、STEM阶段：模块化思维（3-6岁）

### 1.1 概念引入

在STEM阶段，函数以"分步骤"和"任务分解"的形式出现。

### 1.2 课程出现

| 课程编号 | 课程名称 | 模块化表现 |
|----------|---------|---------|
| STEM 3-1-01 | 搭建任务 | 分步骤完成 |
| STEM 3-4-06 | 复杂项目 | 任务分解 |

### 1.3 教学话术

> "我们把大任务分成小步骤：第一步做底座，第二步装轮子，第三步加马达。每一步都是一个小任务。"

### 1.4 认知目标

- 理解"分解"的概念
- 能把大任务拆成小步骤
- 理解"复用"——同样的步骤可以重复用

---

## 二、CODE1阶段：自制积木（6-8岁）

### 2.1 概念深化

从"分步骤"过渡到"自制积木"，理解代码复用。

### 2.2 课程出现

| 课程编号 | 课程名称 | 函数类型 | 具体内容 |
|----------|---------|---------|---------|
| CODE1-4-08 | 自制积木 | 无参数 | 定义[画正方形] |
| CODE1-4-09 | 带参数积木 | 有参数 | 定义[画多边形](边数) |

### 2.3 Scratch积木

```scratch
// 定义自制积木（无参数）
定义 画正方形
重复 (4) 次
    移动 (100) 步
    右转 (90) 度

// 使用自制积木
画正方形
移动 (150) 步
画正方形

// 定义带参数的自制积木
定义 画多边形 (边数) (边长)
重复 (边数) 次
    移动 (边长) 步
    右转 ((360) / (边数)) 度

// 使用带参数的自制积木
画多边形 (3) (100)  // 三角形
画多边形 (6) (50)   // 六边形
```

### 2.4 教学话术

> "自制积木就像给一组动作起个名字。以后想做这组动作，只要叫这个名字就行，不用重复写。就像'刷牙'这个词，包含了挤牙膏、刷上面、刷下面...很多步骤。"

### 2.5 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 积木名不清晰 | 代码难懂 | 用动词+名词，如"画正方形" |
| ❌ 积木太大 | 难以复用 | 一个积木只做一件事 |

---

## 三、PYAI L1阶段：函数定义（10-12岁）

### 3.1 概念转化

从图形化自制积木过渡到Python函数。

### 3.2 课程出现

| 课程编号 | 课程名称 | 函数类型 | 具体内容 |
|----------|---------|---------|---------|
| PYAI 1-1-1 | 函数定义 | 无参数 | `def function():` |
| PYAI 1-1-2 | 函数参数 | 有参数 | `def func(param):` |
| PYAI 1-2-3 | 返回值 | 有返回值 | `return value` |

### 3.3 Python代码

```python
# 无参数函数
def say_hello():
    print("Hello!")

say_hello()  # 调用

# 有参数函数
def greet(name):
    print(f"Hello, {name}!")

greet("小明")  # Hello, 小明!

# 多参数函数
def draw_rectangle(width, height):
    for _ in range(2):
        turtle.forward(width)
        turtle.right(90)
        turtle.forward(height)
        turtle.right(90)

draw_rectangle(100, 50)

# 有返回值函数
def add(a, b):
    return a + b

result = add(3, 5)  # result = 8

# 默认参数
def greet(name, greeting="Hello"):
    print(f"{greeting}, {name}!")

greet("小明")           # Hello, 小明!
greet("小明", "Hi")     # Hi, 小明!
```

### 3.4 Scratch → Python 映射

| Scratch积木 | Python语法 |
|------------|-----------|
| 定义[积木名] | `def function_name():` |
| 定义[积木名](参数) | `def function_name(param):` |
| 使用自制积木 | `function_name()` |

### 3.5 教学话术

> "Python的def就像Scratch的'定义'。函数名后面的括号里放参数，就像自制积木的输入框。return是把结果送出来。"

### 3.6 常见错误

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 忘记冒号 | 语法错误 | def后必须有冒号 |
| ❌ 忘记缩进 | 语法错误 | 函数体必须缩进 |
| ❌ 忘记调用 | 函数不执行 | 定义后要调用 |
| ❌ 忘记return | 返回None | 需要结果时加return |

---

## 四、PYAI L1进阶：参数与返回值（10-12岁）

### 4.1 概念深化

理解参数传递和返回值的机制。

### 4.2 课程出现

| 课程编号 | 课程名称 | 概念 | 具体内容 |
|----------|---------|------|---------|
| PYAI 1-1-3 | 多参数 | 位置参数 | `def func(a, b, c):` |
| PYAI 1-2-3 | 返回值 | return | `return result` |
| PYAI 1-2-4 | 多返回值 | 元组返回 | `return a, b` |

### 4.3 Python代码

```python
# 位置参数
def power(base, exponent):
    return base ** exponent

print(power(2, 3))  # 8

# 关键字参数
print(power(exponent=3, base=2))  # 8

# 默认参数
def power(base, exponent=2):
    return base ** exponent

print(power(3))     # 9 (3的2次方)
print(power(3, 3))  # 27 (3的3次方)

# 多返回值
def get_min_max(numbers):
    return min(numbers), max(numbers)

minimum, maximum = get_min_max([3, 1, 4, 1, 5])
print(minimum, maximum)  # 1 5

# 可变参数
def sum_all(*args):
    return sum(args)

print(sum_all(1, 2, 3, 4, 5))  # 15
```

### 4.4 参数类型对比

| 参数类型 | 语法 | 说明 |
|---------|------|------|
| 位置参数 | `def f(a, b):` | 按顺序传递 |
| 默认参数 | `def f(a, b=1):` | 有默认值 |
| 关键字参数 | `f(b=2, a=1)` | 按名字传递 |
| 可变参数 | `def f(*args):` | 任意数量 |

---

## 五、PYAI L2阶段：递归与OOP（12岁+）

### 5.1 概念升华

从普通函数升级到递归函数和面向对象。

### 5.2 课程出现

| 课程编号 | 课程名称 | 概念 | 具体内容 |
|----------|---------|------|---------|
| PYAI 2-1-3 | 递归 | 递归函数 | 函数调用自身 |
| PYAI 2-2-1 | 类 | 类定义 | `class Name:` |
| PYAI 2-2-2 | 方法 | 实例方法 | `def method(self):` |

### 5.3 Python代码

```python
# 递归函数
def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)

print(factorial(5))  # 120

# 类定义
class Dog:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def bark(self):
        print(f"{self.name} says: Woof!")

    def birthday(self):
        self.age += 1
        print(f"{self.name} is now {self.age} years old!")

# 使用类
my_dog = Dog("旺财", 3)
my_dog.bark()       # 旺财 says: Woof!
my_dog.birthday()   # 旺财 is now 4 years old!
```

### 5.4 函数 vs 方法

| 特性 | 函数 | 方法 |
|------|------|------|
| 定义位置 | 独立 | 类内部 |
| 第一个参数 | 无特殊 | self |
| 调用方式 | `function()` | `object.method()` |
| 访问数据 | 通过参数 | 通过self |

### 5.5 教学话术

> "方法就是属于某个类的函数。普通函数是'独立工人'，方法是'公司员工'——它知道自己属于哪个对象（self）。"

---

## 六、跨阶段对比

### 6.1 概念演进

| 阶段 | 封装形式 | 抽象程度 | 复用能力 |
|------|---------|---------|---------|
| STEM | 分步骤 | 具体 | 口头复用 |
| CODE1 | 自制积木 | 半抽象 | 图形化复用 |
| PYAI L1 | 函数 | 抽象 | 代码复用 |
| PYAI L1+ | 参数/返回值 | 抽象 | 灵活复用 |
| PYAI L2 | 类/方法 | 高度抽象 | 面向对象 |

### 6.2 认知负荷

```
STEM        CODE1       PYAI L1     PYAI L1+    PYAI L2
  ⭐          ⭐⭐         ⭐⭐⭐        ⭐⭐⭐⭐       ⭐⭐⭐⭐⭐
 低           中          中高         高          很高
```

---

## 七、教学建议

### 7.1 衔接策略

| 衔接点 | 策略 |
|--------|------|
| STEM→CODE1 | 用"给动作起名字"引出自制积木 |
| CODE1→Python | 对照Scratch积木展示Python函数 |
| 函数→参数 | 用"可调节的积木"引出参数 |
| 函数→类 | 用"数据+行为打包"引出类 |

### 7.2 常见教学难点

| 难点 | 解决方案 |
|------|---------|
| 为什么要用函数 | 用"重复代码"的痛点引出 |
| 参数传递 | 用"传纸条"类比 |
| return的作用 | 用"计算器返回结果"类比 |
| self的含义 | "self就是'我自己这个对象'" |

---

**维护者**：知识库管理员
**关联文件**：[螺旋进阶总图.md](螺旋进阶总图.md)
