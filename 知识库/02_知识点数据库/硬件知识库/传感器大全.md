# 传感器大全

> **用途**：跨课程传感器使用汇总
> **更新日期**：2026-02-09
> **数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 传感器总览

| 传感器名称 | 信号类型 | 输出范围 | 主要用途 | UID |
|-----------|---------|---------|---------|-----|
| 光线传感器 | 模拟 | 0-4095 | 检测环境亮度 | HW-SEN-001 |
| DHT11温湿度传感器 | 数字 | 温度0-50℃，湿度20-90% | 采集温湿度 | HW-SEN-002 |
| HC-SR04超声波传感器 | 数字 | 2-400cm | 测距 | HW-SEN-003 |
| MQ-2B气体传感器 | 模拟 | 0-4095 | 检测可燃气体 | HW-SEN-004 |
| 土壤湿度传感器 | 模拟 | 0-1024 | 检测土壤含水量 | HW-SEN-005 |
| 声音传感器 | 模拟 | 0-4095 | 检测环境音量 | HW-SEN-006 |
| 颜色传感器 | 数字 | RGB值 | 识别颜色 | HW-SEN-007 |
| 距离传感器(红外) | 数字 | 0/1 | 检测物体靠近 | HW-SEN-008 |
| 人体感应传感器 | 数字 | 0/1 | 检测人体靠近 | HW-SEN-009 |
| 旋钮电位器 | 模拟 | 0-4095 | 读取旋转角度 | HW-SEN-010 |
| 按钮模块 | 数字 | 0/1 | 检测按下状态 | HW-SEN-011 |
| 摄像头 | USB | 图像帧 | 图像采集 | HW-SEN-012 |

---

## 详细说明

### 1. 光线传感器 [HW-SEN-001]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 模拟信号 |
| 输出范围 | 0-4095 |
| 工作原理 | 光敏电阻，光线越强电阻越小，输出值越大 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-3 | 智能光控(1) | 光控灯搭建 |
| PYAI 1-4-4 | 智能光控(2) | 自动夜灯 |
| STEM 3-4-02 | 待补充 | 待补充 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
OUT → P0（信号线）
```

**核心代码**
```python
from mpython import *
light_value = light.read()  # 返回0-4095
print(f"当前光线值: {light_value}")
```

**注意事项**
- 传感器位置要避免被灯光直射（形成误判）
- 数值范围：0=完全黑暗，4095=非常明亮

---

### 2. DHT11温湿度传感器 [HW-SEN-002]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 数字信号 |
| 温度范围 | 0-50℃，精度±2℃ |
| 湿度范围 | 20-90%RH，精度±5% |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L7 | 温湿度数据采集 | 温湿度记录仪 |
| STEM 3-4-01 | 待补充 | 待补充 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
DATA → P4（信号线）
```

**核心代码**
```python
from novaMP import DHT11
dht = DHT11(4)  # 连接到Pin 4

dht.measure()  # 触发测量（必须调用）
temp = dht.temperature  # 获取温度
humi = dht.humidity     # 获取湿度
print(f"温度: {temp}°C, 湿度: {humi}%")

time.sleep(1)  # 下次读取前必须等待1秒
```

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 读取间隔<1秒 | 数据冲突或报错 | 两次measure()间隔≥1秒 |
| ❌ 忘记调用measure() | temperature/humidity不更新 | 每次读取前先调用measure() |

---

### 3. HC-SR04超声波传感器 [HW-SEN-003]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 数字信号 |
| 测距范围 | 2-400cm |
| 工作原理 | 发射超声波→遇障碍物反射→计算时间差→算出距离 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L10 | 海龟雷达(1) | 超声波测距仪 |
| MP1-L11 | 海龟雷达(2) | 数据发送 |
| MP1-L12 | 海龟雷达(3) | 雷达扫描系统 |
| PYAI 1-4-3 | 待补充 | 待补充 |
| STEM 3-4-03 | 待补充 | 待补充 |
| STEM 3-4-07 | 待补充 | 待补充 |

**接线方法**
```
VCC → 5V（红线）⚠️注意是5V
GND → GND（黑线）
Trig → P5（触发引脚）
Echo → P18（回声引脚）
```

**核心代码**
```python
from novaMP import HCSR04
sonar = HCSR04(trig=5, echo=18)

distance = sonar.distance_cm()
print(f"距离: {distance} cm")
```

**测距原理**
```
距离 = 时间 × 声速 / 2
     = 时间 × 340m/s / 2
```

---

### 4. MQ-2B气体传感器 [HW-SEN-004]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 模拟信号 |
| 输出范围 | 0-4095 |
| 可检测气体 | 可燃气体（天然气、液化气）、烟雾、酒精蒸汽 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-5 | 智能通风 | 气体检测系统 |

**接线方法**
```
VCC → 5V（红线）⚠️注意是5V
GND → GND（黑线）
AO → P0（模拟输出）
```

**核心代码**
```python
from mpython import *
gas_sensor = Pin(Pin.P0, Pin.IN)

gas_value = gas_sensor.read_analog()
print(f"气体浓度: {gas_value}")

DANGER_THRESHOLD = 500
if gas_value > DANGER_THRESHOLD:
    print("警告：气体浓度超标！")
```

**数值参考**
| 数值范围 | 含义 |
|----------|------|
| 100-300 | 正常空气 |
| 500以上 | 检测到气体 |

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 用明火测试 | 危险！ | 用酒精棉球代替 |
| ❌ 触摸发热的传感器 | 烫伤 | MQ-2B会发热是正常的 |
| ❌ 忘记预热 | 数值不准确 | 需要预热1-2分钟 |

---

### 5. 土壤湿度传感器 [HW-SEN-005]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 模拟信号 |
| 输出范围 | 0-1024 |
| 工作原理 | 两个金属探针插入土壤，土壤越湿导电性越好，数值越低 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-10 | 智能花房(1) | 自动浇水系统 |
| PYAI 1-4-11 | 智能花房(2) | 可视化智能灌溉 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
AO → P0（模拟输出）
```

**核心代码**
```python
from mpython import *
soil_sensor = Pin(Pin.P0, Pin.IN)

soil_value = soil_sensor.read_analog()
print(f"土壤湿度: {soil_value}")

DRY_THRESHOLD = 800
if soil_value > DRY_THRESHOLD:
    print("土壤干燥，需要浇水")
```

**数值参考**
| 数值范围 | 含义 |
|----------|------|
| 0-300 | 非常湿润（刚浇过水） |
| 300-700 | 适中 |
| 700-1000 | 偏干 |
| 1000以上 | 很干（需要浇水） |

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 探针未完全插入土壤 | 数值不稳定 | 探针要完全插入 |
| ❌ 长时间通电 | 加速腐蚀 | 定期断电休息 |
| ❌ 水溅到电路板 | 短路 | 保持电路板干燥 |

---

### 6. 声音传感器 [HW-SEN-006]

**基本信息**
| 项目 | 内容 |
|------|------|
| 信号类型 | 模拟信号 |
| 输出范围 | 0-4095 |
| 工作原理 | 检测环境音量，音量越大值越大 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L9 | 声光互动 | 音强流水灯 |
| PYAI 1-4-9 | 音强流水灯 | 音乐律动灯 |
| STEM 2-3-12 | 待补充 | 待补充 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
AO → P34（模拟输出）
```

**核心代码**
```python
from machine import Pin, ADC

mic = ADC(Pin(34))
mic.atten(ADC.ATTN_11DB)

sound_level = mic.read()
print(f"音量: {sound_level}")
```

**注意事项**
- 环境噪音大时需调整触发阈值
- 可以用移动平均值平滑数据

---

### 7-12. 其他传感器

> ⚠️ 以下传感器在现有萃取报告中信息较少，待后续补充详细内容：

| 传感器 | 使用课程 | 待补充内容 |
|--------|---------|-----------|
| 颜色传感器 | STEM 2-3-08/09, 3-4-04 | 详细接线、代码示例 |
| 距离传感器(红外) | STEM 2-3-05, 3-4-06/07 | 详细接线、代码示例 |
| 人体感应传感器 | STEM 3-4-06 | 详细接线、代码示例 |
| 旋钮电位器 | MP1-L3/L8, PYAI 1-4-3 | 详细注意事项 |
| 按钮模块 | MP1-L2, PYAI 1-4-2 | 已在ESP32文档中说明 |
| 摄像头 | PYAI 1-4-6/7/8 | OpenCV详细使用方法 |

---

## 传感器选型指南

| 需求 | 推荐传感器 | 备注 |
|------|-----------|------|
| 检测光线明暗 | 光线传感器 | 模拟量，精度高 |
| 检测温度湿度 | DHT11 | 数字量，使用简单 |
| 测量距离 | HC-SR04超声波 | 2-400cm，精度高 |
| 检测气体泄漏 | MQ-2B | 需要预热 |
| 检测土壤干湿 | 土壤湿度传感器 | 注意防腐蚀 |
| 检测声音大小 | 声音传感器 | 模拟量 |
| 检测物体靠近 | 红外距离传感器 | 数字量，响应快 |
| 检测人体靠近 | 人体感应传感器 | 数字量 |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
**整合原则**：基于现有萃取报告，不压缩删减，待补充内容已标注
