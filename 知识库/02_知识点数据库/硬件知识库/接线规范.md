# 接线规范

> **用途**：跨课程通用接线方法和安全规范
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 一、颜色约定

| 线色 | 用途 | 说明 |
|------|------|------|
| **红色** | VCC（电源正极） | 3.3V或5V |
| **黑色** | GND（电源负极） | 接地 |
| **其他颜色** | 信号线 | 数据/控制引脚 |

> ⚠️ **核心原则**：红黑线绝对不能直接连接（短路）

---

## 二、电压规范

### 2.1 ESP32电压系统

| 项目 | 电压 | 说明 |
|------|------|------|
| ESP32工作电压 | 3.3V | 直接接5V会烧坏 |
| GPIO引脚电压 | 3.3V | 输入输出都是3.3V |
| USB供电 | 5V | 通过板载稳压器转为3.3V |

### 2.2 常见设备电压需求

| 设备 | 工作电压 | 接线说明 |
|------|---------|---------|
| LED模块 | 3.3V | 可直接接ESP32 |
| DHT11温湿度 | 3.3V | 可直接接ESP32 |
| 光线传感器 | 3.3V | 可直接接ESP32 |
| 土壤湿度传感器 | 3.3V | 可直接接ESP32 |
| 声音传感器 | 3.3V | 可直接接ESP32 |
| HC-SR04超声波 | **5V** | 需要5V供电 |
| MQ-2B气体传感器 | **5V** | 需要5V供电，会发热 |
| SG90舵机 | **5V** | 需要5V供电 |
| NeoPixel灯带 | **5V** | 需要外部电源 |
| 水泵 | **5V-12V** | 必须通过继电器 |

---

## 三、接线步骤

### 3.1 标准接线流程

```
1. 断电 → 确保ESP32未通电
2. 接GND → 先接地线（黑色）
3. 接VCC → 再接电源线（红色）
4. 接信号 → 最后接信号线
5. 检查 → 确认无短路
6. 通电 → 连接USB供电
```

### 3.2 接线检查清单

| 检查项 | 确认 |
|--------|------|
| ☐ 红黑线没有直接连接 | |
| ☐ 电压匹配（3.3V/5V） | |
| ☐ 引脚号正确 | |
| ☐ 开发板未放在金属表面 | |
| ☐ 线路无裸露导体接触 | |

---

## 四、常用接线图

### 4.1 LED模块接线

```
ESP32          LED模块
┌────┐         ┌────┐
│3.3V├─红线──→│VCC │
│ GND├─黑线──→│GND │
│  P2├─信号线→│SIG │
└────┘         └────┘
```

### 4.2 DHT11温湿度传感器接线

```
ESP32          DHT11
┌────┐         ┌────┐
│3.3V├─红线──→│VCC │
│ GND├─黑线──→│GND │
│  P4├─信号线→│DATA│
└────┘         └────┘
```

### 4.3 HC-SR04超声波传感器接线

```
ESP32          HC-SR04
┌────┐         ┌─────┐
│  5V├─红线──→│VCC  │  ⚠️注意是5V
│ GND├─黑线──→│GND  │
│  P5├─信号线→│Trig │
│ P18├─信号线→│Echo │
└────┘         └─────┘
```

### 4.4 SG90舵机接线

```
ESP32          SG90舵机
┌────┐         ┌────┐
│  5V├─红线──→│红线│  ⚠️注意是5V
│ GND├─棕线──→│棕线│
│  P5├─橙线──→│橙线│
└────┘         └────┘
```

### 4.5 NeoPixel灯带接线（需外部电源）

```
ESP32          NeoPixel灯带      外部5V电源
┌────┐         ┌────────┐        ┌────┐
│ GND├─黑线──→│GND     │←─黑线─┤GND │
│  P4├─信号线→│DIN     │        │    │
│    │         │VCC     │←─红线─┤ 5V │
└────┘         └────────┘        └────┘
     ↑                              ↑
     └──────────共地────────────────┘
```

### 4.6 水泵接线（通过继电器）

```
ESP32          继电器模块        水泵        外部电源
┌────┐         ┌────────┐       ┌────┐      ┌────┐
│  5V├─红线──→│VCC     │       │    │      │    │
│ GND├─黑线──→│GND     │       │ +  │←─────┤ +  │
│  P0├─信号线→│IN      │       │    │      │    │
│    │         │COM     │←──────┤ -  │      │    │
│    │         │NO      │←──────────────────┤ -  │
└────┘         └────────┘       └────┘      └────┘
```

---

## 五、串口通信接线

### 5.1 UART串口接线规则

> ⚠️ **核心原则**：TX接RX，RX接TX（交叉连接）

```
设备A          设备B
┌────┐         ┌────┐
│ TX ├────×────┤ RX │  ← 交叉
│ RX ├────×────┤ TX │  ← 交叉
│GND ├─────────┤GND │  ← 共地
└────┘         └────┘
```

### 5.2 ESP32与电脑串口通信

```
ESP32          USB转TTL模块
┌────┐         ┌────────┐
│ TX ├─────────┤ RX     │
│ RX ├─────────┤ TX     │
│GND ├─────────┤ GND    │
└────┘         └────────┘
```

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ TX接TX | 通信失败 | 必须交叉连接(TX接RX) |
| ❌ 忘记共地 | 通信不稳定 | 两设备GND必须连接 |

---

## 六、I2C通信接线

### 6.1 I2C接线规则

```
ESP32          I2C设备（如OLED）
┌────┐         ┌────────┐
│3.3V├─红线──→│VCC     │
│ GND├─黑线──→│GND     │
│ P22├─────────┤SCL     │  ← 时钟线
│ P21├─────────┤SDA     │  ← 数据线
└────┘         └────────┘
```

### 6.2 多个I2C设备并联

```
ESP32          OLED           其他I2C设备
┌────┐         ┌────┐         ┌────┐
│3.3V├─────────┤VCC ├─────────┤VCC │
│ GND├─────────┤GND ├─────────┤GND │
│ P22├─────────┤SCL ├─────────┤SCL │
│ P21├─────────┤SDA ├─────────┤SDA │
└────┘         └────┘         └────┘
```

> 注意：每个I2C设备必须有不同的地址

---

## 七、面包板使用

### 7.1 面包板结构

```
┌─────────────────────────────────────┐
│  +  +  +  +  +  +  +  +  +  +  +   │ ← 电源正极（横向连通）
│  -  -  -  -  -  -  -  -  -  -  -   │ ← 电源负极（横向连通）
├─────────────────────────────────────┤
│  a  b  c  d  e     f  g  h  i  j   │
│  ○  ○  ○  ○  ○     ○  ○  ○  ○  ○   │ ← 纵向5孔连通
│  ○  ○  ○  ○  ○     ○  ○  ○  ○  ○   │
│  ○  ○  ○  ○  ○     ○  ○  ○  ○  ○   │
│  ...                               │
├─────────────────────────────────────┤
│  -  -  -  -  -  -  -  -  -  -  -   │ ← 电源负极
│  +  +  +  +  +  +  +  +  +  +  +   │ ← 电源正极
└─────────────────────────────────────┘
```

### 7.2 面包板使用规则

| 规则 | 说明 |
|------|------|
| 电源轨横向连通 | 上下两排+/-是横向连通的 |
| 中间区域纵向连通 | abcde五孔纵向连通，fghij五孔纵向连通 |
| 中间有隔断 | e和f之间不连通 |
| 芯片跨中间沟 | IC芯片应跨在中间沟上 |

---

## 八、安全红线总表

| 序号 | 禁忌 | 后果 | 正确做法 |
|------|------|------|---------|
| 1 | ❌ 带电接线 | 短路烧毁开发板 | 必须断电后再接线 |
| 2 | ❌ VCC直接接GND | 烧毁开发板 | 红黑线绝对不能直接连接 |
| 3 | ❌ 开发板放金属表面 | 底部引脚短路 | 放在绝缘表面（桌面、纸板） |
| 4 | ❌ 直接接5V到ESP32 GPIO | 烧坏ESP32 | ESP32是3.3V系统 |
| 5 | ❌ 大功率设备直接接引脚 | 电流过大烧毁 | 使用继电器或驱动板 |
| 6 | ❌ 串口TX接TX | 通信失败 | 必须交叉连接 |
| 7 | ❌ 忘记共地 | 通信不稳定 | 多设备必须共享GND |

---

## 九、常见接线错误排查

| 现象 | 可能原因 | 解决方法 |
|------|---------|---------|
| 设备不工作 | 电源未接好 | 检查VCC和GND连接 |
| 数据不稳定 | 接触不良 | 重新插拔杜邦线 |
| 传感器读数异常 | 电压不匹配 | 确认3.3V/5V需求 |
| 串口无数据 | TX/RX接反 | 交换TX和RX |
| I2C设备无响应 | 地址错误 | 扫描I2C地址 |
| 灯带不亮 | 未共地 | 连接ESP32和外部电源的GND |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
**整合原则**：基于现有萃取报告，不压缩删减
