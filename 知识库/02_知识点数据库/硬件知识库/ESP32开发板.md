# ESP32开发板使用汇总

> **用途**：ESP32/掌控板跨课程使用汇总
> **更新日期**：2026-02-09
> **数据来源**：萃取报告/PythonAI/L1_04_智能硬件.md、L2-3_MicroPython硬件开发.md
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 基本信息

| 项目 | 内容 |
|------|------|
| **型号** | NovaStar ESP32 / 掌控板 |
| **编程语言** | MicroPython |
| **核心库** | NovaMP / mpython |
| **供电电压** | 3.3V（5V会烧坏） |
| **连接方式** | Type-C USB数据线 |
| **开发环境** | Web IDE（在线编程） |

---

## 引脚说明

| 引脚类型 | 说明 | 用途 |
|----------|------|------|
| VCC (3.3V) | 电源正极 | 给传感器供电 |
| GND | 电源负极 | 接地 |
| P0-P20 | 数字/模拟引脚 | 连接传感器和执行器 |

### 特殊引脚
| 引脚 | 功能 | 备注 |
|------|------|------|
| P34 | ADC专用 | 只能做模拟输入 |
| P2 | 板载LED | 可直接控制 |
| P4 | 常用数据引脚 | NeoPixel灯带常用 |

---

## 跨课程使用汇总

### PythonAI L1-4 智能硬件（PYAI 1-4）

| 课程编号 | 课程名称 | 使用的传感器/执行器 | 核心功能 |
|----------|---------|-------------------|---------|
| 1-4-1 | 硬件系统 | 板载LED、蜂鸣器 | 认识ESP32，点亮LED |
| 1-4-2 | 按钮控制LED | 按钮、LED | GPIO输入输出 |
| 1-4-3 | 智能光控(1) | 光线传感器、RGB灯 | 模拟量读取 |
| 1-4-4 | 智能光控(2) | 光线传感器、LED | 阈值判断自动控制 |
| 1-4-5 | 智能通风 | MQ-2B气体传感器、电机 | 安全系统设计 |
| 1-4-6 | 智能门禁(1) | 摄像头 | OpenCV图像采集 |
| 1-4-7 | 智能门禁(2) | 摄像头 | 人脸比对算法 |
| 1-4-8 | 智能门禁(3) | 舵机 | 系统集成 |
| 1-4-9 | 音强流水灯 | NeoPixel灯带、声音传感器 | 音量驱动显示 |
| 1-4-10 | 智能花房(1) | 土壤湿度传感器、水泵 | 自动浇水 |
| 1-4-11 | 智能花房(2) | OLED屏幕 | 数据可视化 |
| 1-4-12 | 家居回顾 | 综合 | 物联网架构复盘 |

### PythonAI L2-3 MicroPython硬件开发（MP系列）

| 课程编号 | 课程名称 | 使用的传感器/执行器 | 核心功能 |
|----------|---------|-------------------|---------|
| MP1-L1 | 初识MicroPython | LED | 点亮LED，认识引脚 |
| MP1-L2 | 按钮与数字输入 | 按钮、LED | GPIO输入，消抖处理 |
| MP1-L3 | 模拟信号与PWM | 旋钮、LED | ADC读取，PWM控制 |
| MP1-L4 | 类与实例(1) | - | OOP基础（纯软件） |
| MP1-L5 | 类与实例(2) | - | self和__init__（纯软件） |
| MP1-L6 | 硬件驱动封装 | LED、Button | NovaMP库使用 |
| MP1-L7 | 温湿度数据采集 | DHT11、RTC | 传感器数据保存 |
| MP1-L8 | 舵机与映射 | SG90舵机、旋钮 | 数值映射算法 |
| MP1-L9 | 声光互动 | NeoPixel灯带、声音传感器 | 音强流水灯 |
| MP1-L10 | 海龟雷达(1) | HC-SR04超声波 | 超声波测距 |
| MP1-L11 | 海龟雷达(2) | UART串口 | 上下位机通信 |
| MP1-L12 | 海龟雷达(3) | 舵机、超声波、串口 | 综合项目 |

---

## 核心代码模式

### 基础导入
```python
# MicroPython标准导入
from machine import Pin, ADC, PWM
import time

# NovaMP库导入（推荐）
from novaMP import LED, Button, DHT11, SG90
```

### LED控制
```python
# 方式1：machine库
led = Pin(2, Pin.OUT)
led.value(1)  # 开灯
led.value(0)  # 关灯

# 方式2：NovaMP库
from novaMP import LED
led = LED(2)
led.test()    # 测试硬件
led.fill((255, 0, 0))  # 红色
led.write()   # 更新显示
```

### 按钮输入
```python
button = Pin(4, Pin.IN)
if button.value() == 0:  # 按下
    print("按钮被按下")
time.sleep_ms(20)  # 消抖延时
```

### ADC读取（模拟量）
```python
knob = ADC(Pin(34))
knob.atten(ADC.ATTN_11DB)  # 设置量程0-3.3V
value = knob.read()  # 返回0-4095
```

### PWM控制
```python
led_pwm = PWM(Pin(2), freq=1000)
led_pwm.duty(512)  # 占空比0-1023
```

---

## 安全红线

| 序号 | 禁忌 | 后果 | 正确做法 |
|------|------|------|---------|
| 1 | ❌ 带电接线 | 短路烧毁开发板 | 必须断电后再接线 |
| 2 | ❌ VCC直接接GND | 烧毁开发板 | 红黑线绝对不能直接连接 |
| 3 | ❌ 开发板放金属表面通电 | 底部引脚短路 | 放在绝缘表面（桌面、纸板） |
| 4 | ❌ 直接接5V | 烧坏ESP32 | ESP32是3.3V系统 |
| 5 | ❌ 在boot.py写死循环无延时 | 开发板无法重新连接 | 谨慎编辑启动文件 |

---

## NovaMP库统一接口

所有NovaMP驱动都提供统一的方法：

| 方法 | 功能 | 示例 |
|------|------|------|
| `help()` | 查看使用说明 | `led.help()` |
| `test()` | 测试硬件是否正常 | `led.test()` |

### 三种import方式
```python
# 方式1：导入整个模块
import novaMP
led = novaMP.LED(pin)

# 方式2：从模块导入特定类（推荐）
from novaMP import LED
led = LED(pin)

# 方式3：导入所有（不推荐）
from novaMP import *
```

---

## 常见问题

| 问题 | 原因 | 解决方案 |
|------|------|---------|
| 代码上传失败 | USB连接问题 | 检查数据线是否支持数据传输 |
| LED不亮 | 引脚配置错误 | 检查Pin号和OUT模式 |
| 按钮不灵敏 | 缺少消抖 | 添加time.sleep_ms(20) |
| ADC读数不稳定 | 未设置量程 | 添加atten(ADC.ATTN_11DB) |
| 串口被占用 | 程序正在运行 | 先停止程序或重刷固件 |

---

## 物联网三层架构

```
┌─────────────────────────────────────┐
│           应用层（执行）              │
│   LED、RGB、蜂鸣器、电机、舵机、屏幕   │
└─────────────────────────────────────┘
                   ↑
┌─────────────────────────────────────┐
│           处理层（决策）              │
│      ESP32 + Python代码              │
│      if判断、阈值比较、AI算法         │
└─────────────────────────────────────┘
                   ↑
┌─────────────────────────────────────┐
│           感知层（输入）              │
│   光线传感器、气体传感器、土壤传感器   │
│   摄像头、温度传感器、按键            │
└─────────────────────────────────────┘
```

---

## 相关课程UID

| 课程 | UID |
|------|-----|
| PYAI 1-4 智能硬件 | PYAI-14-001 |
| MP1 MicroPython硬件开发 | PYAI-23-MP-001 |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/PythonAI/L1_04_智能硬件.md、L2-3_MicroPython硬件开发.md
**整合原则**：基于现有萃取报告，不压缩删减
