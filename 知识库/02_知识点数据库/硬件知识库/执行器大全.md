# 执行器大全

> **用途**：跨课程执行器使用汇总
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 执行器总览

| 执行器名称 | 控制类型 | 控制范围 | 主要用途 | UID |
|-----------|---------|---------|---------|-----|
| LED模块(单色) | 数字 | 0/1 | 指示灯、状态显示 | HW-ACT-001 |
| RGB灯/NeoPixel灯带 | PWM | RGB(0-255) | 彩色显示、氛围灯 | HW-ACT-002 |
| SG90舵机(180度) | PWM | 0-180度 | 精确角度控制 | HW-ACT-003 |
| 电机/马达 | 数字 | 0/1 | 驱动风扇、小车 | HW-ACT-004 |
| 水泵模块 | 数字 | 0/1 | 自动浇水 | HW-ACT-005 |
| 蜂鸣器 | 数字 | 0/1 | 声音报警 | HW-ACT-006 |
| OLED屏幕(128×64) | I2C | 文字/图形 | 数据可视化 | HW-ACT-007 |

---

## 详细说明

### 1. LED模块(单色) [HW-ACT-001]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | 数字信号 |
| 控制方式 | 高电平点亮，低电平熄灭 |
| 工作电压 | 3.3V |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L1 | 初识MicroPython | 点亮LED，认识引脚 |
| MP1-L2 | 按钮与数字输入 | 按钮控制LED |
| PYAI 1-4-1 | 硬件系统 | 认识ESP32，点亮LED |
| PYAI 1-4-2 | 按钮控制LED | GPIO输入输出 |
| STEM 3-4-01 | 待补充 | 待补充 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
信号 → P2（或其他数字引脚）
```

**核心代码**
```python
# 方式1：machine库
from machine import Pin
led = Pin(2, Pin.OUT)
led.value(1)  # 开灯
led.value(0)  # 关灯

# 方式2：NovaMP库
from novaMP import LED
led = LED(2)
led.test()    # 测试硬件
```

**注意事项**
- LED有正负极，长脚为正极
- 需要串联限流电阻（通常模块已内置）

---

### 2. RGB灯/NeoPixel灯带 [HW-ACT-002]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | PWM信号 |
| 颜色范围 | RGB各0-255，共1677万色 |
| 工作电压 | 5V（需外部电源） |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L9 | 声光互动 | 音强流水灯 |
| PYAI 1-4-3 | 智能光控(1) | 光控RGB灯 |
| PYAI 1-4-9 | 音强流水灯 | 音乐律动灯 |

**接线方法**
```
VCC → 外部5V电源（红线）⚠️不能接ESP32的5V
GND → GND（黑线，需与ESP32共地）
DIN → P4（数据引脚）
```

**核心代码**
```python
from novaMP import LED
# 假设灯带有12颗灯珠，连接到P4
strip = LED(4, num=12)

# 设置单个灯珠颜色
strip[0] = (255, 0, 0)  # 第1颗红色
strip[1] = (0, 255, 0)  # 第2颗绿色
strip[2] = (0, 0, 255)  # 第3颗蓝色

# 更新显示（必须调用）
strip.write()

# 全部填充同一颜色
strip.fill((255, 255, 0))  # 全部黄色
strip.write()

# 关闭所有灯
strip.fill((0, 0, 0))
strip.write()
```

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 灯带直接接ESP32 5V | 电流不足，烧毁USB | 必须用外部电源 |
| ❌ 忘记共地 | 灯带不亮或闪烁 | ESP32和外部电源GND必须连接 |
| ❌ 忘记调用write() | 颜色不更新 | 每次修改后调用strip.write() |

---

### 3. SG90舵机(180度) [HW-ACT-003]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | PWM信号 |
| 转动范围 | 0-180度 |
| 工作电压 | 5V |
| 控制原理 | 脉冲宽度决定角度（0.5ms=0°，2.5ms=180°） |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| MP1-L8 | 舵机与映射 | 旋钮控制舵机角度 |
| MP1-L10 | 海龟雷达(1) | 超声波测距仪 |
| MP1-L11 | 海龟雷达(2) | 数据发送 |
| MP1-L12 | 海龟雷达(3) | 雷达扫描系统 |
| PYAI 1-4-8 | 智能门禁(3) | 门锁控制 |
| STEM 2-3-04 | 待补充 | 待补充 |
| STEM 3-4-05 | 待补充 | 待补充 |

**接线方法**
```
红线 → 5V（电源正极）⚠️注意是5V
棕线 → GND（电源负极）
橙线 → P5（信号引脚）
```

**核心代码**
```python
from novaMP import SG90
servo = SG90(5)  # 连接到Pin 5

# 转到指定角度
servo.angle(0)    # 转到0度
servo.angle(90)   # 转到90度
servo.angle(180)  # 转到180度

# 映射函数：将旋钮值(0-4095)映射到角度(0-180)
def map_value(x, in_min, in_max, out_min, out_max):
    return (x - in_min) * (out_max - out_min) // (in_max - in_min) + out_min

knob_value = 2048  # 假设旋钮读数
angle = map_value(knob_value, 0, 4095, 0, 180)
servo.angle(angle)
```

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 强行扭动舵机 | 损坏内部齿轮(扫齿) | 不要手动扭转舵机摆臂 |
| ❌ 超出0-180度范围 | 舵机抖动或损坏 | 限制角度在有效范围内 |
| ❌ 用3.3V供电 | 力矩不足 | 必须用5V供电 |

---

### 4. 电机/马达 [HW-ACT-004]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | 数字信号 |
| 控制方式 | 高电平转动，低电平停止 |
| 工作电压 | 3.3V-5V（视型号） |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-5 | 智能通风 | 气体检测驱动风扇 |
| STEM 2-3-02 | 待补充 | 待补充 |
| STEM 2-3-03 | 待补充 | 待补充 |
| STEM 3-4-01 | 待补充 | 待补充 |

**接线方法**
```
VCC → 5V（红线）
GND → GND（黑线）
信号 → P0（控制引脚）
```

**核心代码**
```python
from machine import Pin
motor = Pin(0, Pin.OUT)

motor.value(1)  # 启动电机
motor.value(0)  # 停止电机
```

**注意事项**
- 大功率电机需要通过继电器或电机驱动板控制
- 不能直接接ESP32引脚（电流太大）

---

### 5. 水泵模块 [HW-ACT-005]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | 数字信号（通过继电器） |
| 工作电压 | 5V-12V（视型号） |
| 用途 | 自动浇水系统 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-10 | 智能花房(1) | 自动浇水系统 |
| PYAI 1-4-11 | 智能花房(2) | 可视化智能灌溉 |

**接线方法**
```
⚠️ 水泵必须通过继电器控制，不能直接接ESP32！

继电器接线：
VCC → 5V
GND → GND
IN → P0（控制引脚）

水泵接线（接继电器的常开端）：
水泵+ → 继电器COM
水泵- → 外部电源GND
外部电源+ → 继电器NO
```

**核心代码**
```python
from machine import Pin
relay = Pin(0, Pin.OUT)

# 开启水泵（继电器吸合）
relay.value(1)

# 关闭水泵（继电器断开）
relay.value(0)

# 定时浇水示例
import time
relay.value(1)
time.sleep(3)  # 浇水3秒
relay.value(0)
```

**⚠️ 关键禁忌**
| 禁忌 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 水泵直接接ESP32 | 电流太大烧毁ESP32 | 必须通过继电器驱动 |
| ❌ 水溅到电路板 | 短路 | 保持电路板干燥 |
| ❌ 长时间空转 | 损坏水泵 | 确保水管有水 |

---

### 6. 蜂鸣器 [HW-ACT-006]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | 数字信号 |
| 类型 | 有源蜂鸣器（通电即响）/ 无源蜂鸣器（需PWM） |
| 工作电压 | 3.3V-5V |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-1 | 硬件系统 | 认识蜂鸣器 |
| PYAI 1-4-5 | 智能通风 | 气体报警 |
| STEM 3-4-01 | 待补充 | 待补充 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
信号 → P0（控制引脚）
```

**核心代码**
```python
from machine import Pin
buzzer = Pin(0, Pin.OUT)

# 有源蜂鸣器
buzzer.value(1)  # 响
buzzer.value(0)  # 停

# 报警示例
import time
for i in range(3):
    buzzer.value(1)
    time.sleep(0.5)
    buzzer.value(0)
    time.sleep(0.5)
```

**注意事项**
- 有源蜂鸣器：通电即响，只能发出固定频率
- 无源蜂鸣器：需要PWM信号，可以发出不同音调

---

### 7. OLED屏幕(128×64) [HW-ACT-007]

**基本信息**
| 项目 | 内容 |
|------|------|
| 控制类型 | I2C通信 |
| 分辨率 | 128×64像素 |
| 显示内容 | 文字、数字、简单图形 |

**使用课程**
| 课程编号 | 课程名称 | 用途 |
|----------|---------|------|
| PYAI 1-4-11 | 智能花房(2) | 显示温湿度、土壤湿度 |

**接线方法**
```
VCC → 3.3V（红线）
GND → GND（黑线）
SCL → P22（时钟线）
SDA → P21（数据线）
```

**核心代码**
```python
from mpython import *

# 清屏
oled.fill(0)

# 显示文字
oled.DispChar("温度: 25°C", 0, 0)
oled.DispChar("湿度: 60%", 0, 16)

# 更新显示
oled.show()

# 显示数值
temp = 25.5
oled.DispChar(f"温度: {temp}°C", 0, 0)
oled.show()
```

**注意事项**
- I2C地址通常为0x3C
- 每次修改后需调用oled.show()更新显示
- 中文显示需要字库支持

---

## 执行器选型指南

| 需求 | 推荐执行器 | 备注 |
|------|-----------|------|
| 简单指示 | LED模块 | 数字控制，最简单 |
| 彩色显示 | NeoPixel灯带 | 需外部电源 |
| 精确角度控制 | SG90舵机 | 0-180度 |
| 驱动风扇/小车 | 电机 | 可能需要驱动板 |
| 自动浇水 | 水泵+继电器 | 必须用继电器 |
| 声音报警 | 蜂鸣器 | 有源/无源两种 |
| 数据显示 | OLED屏幕 | I2C通信 |

---

## 安全禁忌总表

| 序号 | 禁忌 | 后果 | 正确做法 |
|------|------|------|---------|
| 1 | ❌ 灯带直接接ESP32 5V | 电流不足，烧毁USB | 必须用外部电源 |
| 2 | ❌ 强行扭动舵机 | 损坏内部齿轮(扫齿) | 不要手动扭转舵机摆臂 |
| 3 | ❌ 水泵直接接ESP32 | 电流太大烧毁 | 必须通过继电器驱动 |
| 4 | ❌ 大功率设备直接接引脚 | 烧毁ESP32 | 使用继电器或驱动板 |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/PythonAI/、萃取报告/STEM/
**整合原则**：基于现有萃取报告，不压缩删减，待补充内容已标注
