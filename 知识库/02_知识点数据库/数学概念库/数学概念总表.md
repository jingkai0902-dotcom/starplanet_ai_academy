# 数学概念总表

> **用途**：跨课程数学概念汇总，快速查找数学知识在各课程的应用
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 快速导航

| 概念类别 | 包含内容 | 详情链接 |
|----------|---------|---------|
| 坐标系统 | 平面坐标、屏幕坐标、网格对齐 | [坐标系与位置.md](坐标系与位置.md) |
| 角度与三角 | 角度、弧度、三角函数 | [角度与三角函数.md](角度与三角函数.md) |
| 物理仿真 | 重力、抛物线、碰撞检测 | [物理仿真数学.md](物理仿真数学.md) |
| 概率随机 | 随机数、概率、权重随机 | [概率与随机.md](概率与随机.md) |

---

## 概念总览表

### 坐标系统

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 平面直角坐标系 | CODE1-3-06 | PYAI 2-1-2 | CODE1 |
| 屏幕坐标系 | CODE1-4-01 | PYAI 2-2-2 | CODE1 |
| 网格对齐算法 | CODE3-2-07 | - | CODE3 |
| 相对坐标/卷轴 | CODE3-2-11 | - | CODE3 |

### 角度与旋转

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 角度控制 | CODE1-3-02 | PYAI 1-1-3 | CODE1 |
| 角度转弧度 | - | PYAI 2-1-2 | PYAI L2 |
| 正弦函数 sin | CODE3-2-06 | PYAI 2-1-2 | CODE3 |
| 余弦函数 cos | CODE3-2-06 | PYAI 2-1-2 | CODE3 |

### 物理公式

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 距离公式 | - | PYAI 1-2-1 | PYAI L1 |
| 速度公式 | CODE2-2-06 | PYAI 2-2-10 | CODE2 |
| 重力加速度 | CODE3-2-06 | PYAI 2-2-10 | CODE3 |
| 抛物线运动 | CODE3-2-06 | - | CODE3 |

### 碰撞检测

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 圆形碰撞 | CODE3-2-02 | PYAI 1-2-1 | CODE3 |
| 矩形碰撞(AABB) | CODE3-2-02 | PYAI 1-2-2 | CODE3 |
| 射线检测 | CODE3-2-08 | - | CODE3 |

### 概率与随机

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 随机数生成 | CODE1-4-02 | PYAI 2-3-10 | CODE1 |
| 权重随机 | - | PYAI 2-3-11 | PYAI L2 |

### 数值运算

| 概念 | CODE阶段 | Python阶段 | 首次出现 |
|------|---------|-----------|---------|
| 取整运算 | CODE2-3-05 | PYAI 1-2-8 | CODE2 |
| 取余运算 | CODE2-3-05 | PYAI 1-2-8 | CODE2 |
| 数值映射 | CODE2-1-10 | MP1-L8 | CODE2 |

---

## 一、坐标系统

### 1.1 平面直角坐标系

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-06 | 坐标系统 | x轴（横向）、y轴（纵向） |
| CODE1-4-01 | 平面直角坐标系 | X轴（左右）、Y轴（上下） |
| PYAI 2-1-2 | turtle绑定 | 坐标映射 |

#### Scratch坐标系
```
        y轴
         ↑
         |  (0, 180)
         |
(-240,0) |----+---→ x轴 (240, 0)
         |  (0,0)
         |
         | (0, -180)
```
- 舞台大小：480 × 360
- 原点(0,0)在舞台中心
- x范围：-240 到 240
- y范围：-180 到 180

#### Python/Pygame坐标系
```
(0,0)----→ x轴 (800, 0)
  |
  |
  ↓
y轴
(0, 600)
```
- 原点(0,0)在左上角
- x向右增大
- y向下增大（与数学坐标系相反！）

### 1.2 网格对齐算法

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE3-2-07 | 网格对齐 | 植物大战僵尸中的网格定位 |

#### 算法原理
```python
# 将鼠标位置对齐到网格
grid_size = 80
grid_x = int((mouse_x + offset) / grid_size) * grid_size
grid_y = int((mouse_y + offset) / grid_size) * grid_size
```

---

## 二、角度与三角函数

### 2.1 角度基础

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-02 | 旋转控制 | 左转、右转指定角度 |
| PYAI 1-1-3 | 绘图指令 | 多边形内角计算 |

#### 多边形内角公式
```python
# 正n边形的外角
exterior_angle = 360 / n

# 绘制正多边形
def draw_polygon(sides, length):
    angle = 360 / sides
    for i in range(sides):
        turtle.forward(length)
        turtle.right(angle)
```

### 2.2 角度与弧度转换

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 2-1-2 | 角度转弧度 | math.radians() |

#### Python示例
```python
import math

# 角度转弧度
angle_deg = 90
angle_rad = math.radians(angle_deg)  # π/2

# 弧度转角度
angle_deg = math.degrees(angle_rad)  # 90

# 三角函数使用弧度
sin_value = math.sin(math.radians(30))  # 0.5
cos_value = math.cos(math.radians(60))  # 0.5
```

### 2.3 三角函数应用

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 2-1-2 | 正弦函数 | 绘制正弦曲线 |
| CODE3-2-06 | 抛物线算法 | 投篮物理模拟 |

#### 绘制正弦曲线
```python
import turtle
import math

t = turtle.Turtle()
t.penup()
t.goto(-200, 0)
t.pendown()

for x in range(-200, 201):
    rad = math.radians(x)
    y = math.sin(rad) * 100  # 放大100倍
    t.goto(x, y)
```

#### 抛物线运动分解
```python
import math

# 初始速度和角度
speed = 50
angle = 45

# 分解为水平和垂直速度
vx = speed * math.cos(math.radians(angle))  # 水平速度（恒定）
vy = speed * math.sin(math.radians(angle))  # 垂直速度（受重力影响）
```

---

## 三、物理仿真数学

### 3.1 距离公式

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-1 | 圆形碰撞检测 | 两点间距离 |
| PYAI 1-1-11 | distanceTo | 距离计算 |

#### 公式
```
距离 = √((x2-x1)² + (y2-y1)²)
```

#### Python示例
```python
import math

def distance(x1, y1, x2, y2):
    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)

# 使用
d = distance(0, 0, 3, 4)  # 5.0
```

### 3.2 速度与加速度

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-2-06 | 速度计算 | 速度=距离/时间 |
| PYAI 2-2-10 | 物理运动原理 | 加速度、速度合并 |

#### 公式
```
速度 = 距离 / 时间
位置 = 位置 + 速度
速度 = 速度 + 加速度
```

#### Python示例
```python
# 物理模拟
x, y = 100, 100
vx, vy = 5, 0
gravity = 0.5

# 每帧更新
def update():
    global x, y, vx, vy
    vy += gravity  # 重力加速度
    x += vx        # 水平移动
    y += vy        # 垂直移动
```

### 3.3 重力与抛物线

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE3-2-06 | 抛物线算法 | 篮球投篮物理 |
| CODE3-2-10 | 重力模拟 | 跳跃物理 |

#### Scratch示例（篮球投篮）
```
设定 [X速度] 为 (力度 × cos(角度))
设定 [Y速度] 为 (力度 × sin(角度))

重复执行直到 <碰到 边缘>
    将 x 改变 (X速度)
    将 y 改变 (Y速度)
    将 [Y速度] 改变 (-0.5)  // 重力
```

#### Python示例
```python
import math

class Ball:
    def __init__(self, x, y, speed, angle):
        self.x = x
        self.y = y
        self.vx = speed * math.cos(math.radians(angle))
        self.vy = speed * math.sin(math.radians(angle))
        self.gravity = 0.5

    def update(self):
        self.vy -= self.gravity  # 重力减速
        self.x += self.vx
        self.y += self.vy
```

### 3.4 碰撞检测

#### 圆形碰撞检测

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-1 | 圆形碰撞 | 距离 < 半径之和 |

```python
def circle_collision(x1, y1, r1, x2, y2, r2):
    dist = math.sqrt((x2-x1)**2 + (y2-y1)**2)
    return dist < r1 + r2
```

#### 矩形碰撞检测(AABB)

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-2 | 矩形碰撞 | X轴和Y轴同时重叠 |

```python
def rect_collision(x1, y1, w1, h1, x2, y2, w2, h2):
    x_overlap = x1 < x2 + w2 and x1 + w1 > x2
    y_overlap = y1 < y2 + h2 and y1 + h1 > y2
    return x_overlap and y_overlap
```

---

## 四、数值映射

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-1-10 | 数值映射 | 电位器值映射 |
| MP1-L8 | 舵机与映射 | 旋钮控制舵机 |

### 映射公式
```
输出 = (输入 - 输入最小) × (输出最大 - 输出最小) / (输入最大 - 输入最小) + 输出最小
```

### Python示例
```python
def map_value(x, in_min, in_max, out_min, out_max):
    return (x - in_min) * (out_max - out_min) // (in_max - in_min) + out_min

# 将旋钮值(0-4095)映射到舵机角度(0-180)
knob = 2048
angle = map_value(knob, 0, 4095, 0, 180)  # 90
```

---

## 五、概率与随机

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-4-02 | 随机数 | 随机数(范围)生成 |
| CODE3-2-02 | 随机生成 | 敌机随机出现 |
| PYAI 2-3-10 | random库 | 石头剪刀布 |
| PYAI 2-3-11 | 权重随机 | random.choices() |

### Python示例
```python
import random

# 基本随机数
num = random.randint(1, 100)  # 1-100的整数

# 从列表随机选择
choice = random.choice(['rock', 'paper', 'scissors'])

# 权重随机（概率不等）
result = random.choices(
    ['rock', 'paper', 'scissors'],
    weights=[0.5, 0.3, 0.2]  # 50%石头, 30%布, 20%剪刀
)[0]
```

---

## 六、数学概念进阶路线

```
CODE1-3-06          CODE1-4-01          CODE3-2-06          PYAI 2-1-2
坐标认识     →      坐标应用     →      物理模拟     →      三角函数
   ↓                   ↓                   ↓                   ↓
 x/y轴              移动定位            抛物线              sin/cos
```

---

**维护者**：知识库管理员
**数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
**整合原则**：基于现有萃取报告，不压缩删减
