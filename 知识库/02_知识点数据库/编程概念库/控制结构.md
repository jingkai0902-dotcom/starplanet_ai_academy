# 控制结构

> **用途**：跨课程控制结构（顺序、条件、循环）详细说明
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 一、顺序执行

### 概念定义
程序按照代码书写的顺序，从上到下依次执行每一条指令。

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-02 | 顺序逻辑 | 程序从上到下依次执行 |
| PYAI 1-0-4 | 对象方法调用 | `hero.moveRight()` 按顺序执行 |

### Scratch示例
```
当绿旗被点击
移动 10 步
等待 1 秒
移动 10 步
说 "完成！"
```

### Python示例
```python
# 顺序执行示例
print("第一步")
print("第二步")
print("第三步")
```

### 教学要点
- 强调"顺序"的重要性
- 用生活例子：穿衣服的顺序（先穿袜子再穿鞋）
- 调换顺序会导致不同结果

---

## 二、条件判断

### 2.1 单分支判断 (if)

#### 概念定义
当条件成立时，执行特定代码块；条件不成立时，跳过。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-08 | 条件判断 | 如果...那么 |
| PYAI 1-0-9 | 条件语句if | `if enemy: hero.attack(enemy)` |

#### Scratch示例
```
如果 <碰到 边缘> 那么
    反弹
```

#### Python示例
```python
if enemy:
    hero.attack(enemy)
```

### 2.2 双分支判断 (if-else)

#### 概念定义
当条件成立时执行A，否则执行B。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-09 | 双分支判断 | 如果...那么...否则 |
| CODE1-4-03 | 双分支判断 | 碰到颜色/角色判断 |
| PYAI 1-0-10 | 分支结构 | `if...else:` |

#### Scratch示例
```
如果 <碰到 苹果> 那么
    得分 改变 1
否则
    说 "没接到！"
```

#### Python示例
```python
if score >= 60:
    print("及格")
else:
    print("不及格")
```

### 2.3 多分支判断 (if-elif-else)

#### 概念定义
根据多个条件，选择执行不同的代码块。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-06 | 嵌套逻辑 | 多层If-Else判断 |
| PYAI 1-0-10 | 多分支 | `if...elif...else:` |

#### Scratch示例
```
如果 <得分 > 90> 那么
    说 "优秀"
否则
    如果 <得分 > 60> 那么
        说 "及格"
    否则
        说 "不及格"
```

#### Python示例
```python
if score >= 90:
    print("优秀")
elif score >= 60:
    print("及格")
else:
    print("不及格")
```

### 2.4 嵌套判断

#### 概念定义
在条件判断内部再嵌套条件判断。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-4-11 | 综合复习 | 嵌套结构 |
| CODE2-1-08 | 嵌套逻辑 | 多条件判断 |
| PYAI 1-3-6 | 二维列表 | 嵌套循环中的条件判断 |

#### Python示例
```python
if is_student:
    if age < 18:
        print("未成年学生")
    else:
        print("成年学生")
else:
    print("非学生")
```

---

## 三、循环结构

### 3.1 固定次数循环

#### 概念定义
重复执行指定次数的代码块。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-05 | 循环结构 | 重复执行 |
| PYAI 1-0-6 | for循环 | `for i in range(4):` |
| PYAI 1-3-5 | range()函数 | `for i in range(5):` |

#### Scratch示例
```
重复 4 次
    移动 100 步
    右转 90 度
```

#### Python示例
```python
# 画正方形
for i in range(4):
    t.forward(100)
    t.right(90)
```

### 3.2 无限循环

#### 概念定义
永远重复执行的循环，直到程序被手动停止。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-05 | 循环结构 | 重复执行（死循环） |
| PYAI 1-0-5 | 无限循环 | `while True:` |

#### Scratch示例
```
重复执行
    如果 <碰到 边缘> 那么
        反弹
    移动 10 步
```

#### Python示例
```python
while True:
    # 游戏主循环
    handle_events()
    update()
    draw()
```

### 3.3 条件循环

#### 概念定义
当条件满足时继续循环，条件不满足时退出。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-07 | 条件循环 | 重复执行直到... |
| CODE1-4-10 | 条件循环 | While循环 |
| CODE2-1-03 | 条件循环 | 重复执行直到... |
| PYAI 1-0-5 | while循环 | `while condition:` |

#### Scratch示例
```
重复执行直到 <碰到 终点>
    移动 10 步
```

#### Python示例
```python
# 猜数字游戏
while guess != answer:
    guess = int(input("请猜一个数字: "))
print("猜对了！")
```

### 3.4 遍历循环

#### 概念定义
依次访问集合中的每个元素。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-3-1 | 列表遍历 | while遍历列表 |
| PYAI 1-3-3 | 通用遍历 | `while i < len(list):` |
| PYAI 1-3-5 | for循环 | `for item in list:` |

#### Python示例
```python
fruits = ['apple', 'banana', 'cherry']

# while遍历
i = 0
while i < len(fruits):
    print(fruits[i])
    i += 1

# for遍历（推荐）
for fruit in fruits:
    print(fruit)
```

### 3.5 嵌套循环

#### 概念定义
循环内部再嵌套循环，用于处理二维数据。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-1-04 | 嵌套循环 | 画正方形网格 |
| PYAI 1-3-6 | 二维列表 | 嵌套循环遍历 |
| PYAI 1-3-7 | 二维列表进阶 | 模式识别 |

#### Python示例
```python
# 遍历二维列表
board = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
for row in range(3):
    for col in range(3):
        print(board[row][col], end=' ')
    print()  # 换行
```

---

## 四、循环控制语句

### 4.1 break语句

#### 概念定义
立即退出当前循环。

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-5 | break语句 | 提前退出循环 |

#### Python示例
```python
for i in range(10):
    if i == 5:
        break  # 当i等于5时退出循环
    print(i)
# 输出: 0 1 2 3 4
```

### 4.2 continue语句

#### 概念定义
跳过当前迭代，继续下一次循环。

#### Python示例
```python
for i in range(5):
    if i == 2:
        continue  # 跳过i等于2的情况
    print(i)
# 输出: 0 1 3 4
```

---

## 五、控制结构进阶路线

### 条件判断进阶

```
CODE1-3-08          CODE1-3-09          CODE2-3-06          PYAI 1-0-10
如果...那么    →    如果...否则    →    嵌套判断      →     if...elif...else
   ↓                   ↓                   ↓                    ↓
 单分支             双分支             多层嵌套              多分支
```

### 循环结构进阶

```
CODE1-3-05          CODE1-3-07          PYAI 1-0-6          PYAI 1-3-5
重复执行      →     重复直到...    →    for range()    →    for in list
   ↓                   ↓                   ↓                    ↓
 死循环             条件循环            计数循环             遍历循环
```

---

## 六、Scratch → Python 映射

| Scratch积木 | Python语法 | 说明 |
|------------|-----------|------|
| 重复 10 次 | `for i in range(10):` | 固定次数循环 |
| 重复执行 | `while True:` | 无限循环 |
| 重复执行直到 <条件> | `while not condition:` | 条件循环 |
| 如果 <条件> 那么 | `if condition:` | 单分支 |
| 如果 <条件> 那么...否则 | `if...else:` | 双分支 |
| 停止 [全部脚本] | `break` 或 `sys.exit()` | 退出 |

---

## 七、常见错误与禁忌

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 死循环无延时 | CPU占用100%，程序卡死 | 添加`time.sleep()` |
| ❌ 条件永远为True | 无限循环无法退出 | 确保条件会变化 |
| ❌ 忘记缩进 | 语法错误或逻辑错误 | Python严格要求缩进 |
| ❌ 循环变量未更新 | 无限循环 | 确保循环变量会改变 |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
**整合原则**：基于现有萃取报告，不压缩删减
