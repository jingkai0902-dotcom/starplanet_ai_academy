# 变量与数据类型

> **用途**：跨课程变量与数据类型详细说明
> **更新日期**：2026-02-10
> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
> **整合原则**：基于现有萃取报告，不压缩删减

---

## 一、变量基础

### 概念定义
变量是存储数据的"容器"，可以存放数字、文字等信息，并且可以被修改。

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-10 | 变量 | 创建、设定、改变变量 |
| CODE1-4-02 | 变量 | 存储数据的"盒子" |
| PYAI 1-0-7 | 变量 | `name = 'Hero'` |

### Scratch示例
```
设定 [得分 v] 为 (0)
将 [得分 v] 改变 (1)
```

### Python示例
```python
# 变量定义
score = 0
name = "玩家1"

# 变量修改
score = score + 1
# 或简写
score += 1
```

### 教学要点
- 用"盒子"比喻变量
- 变量名要有意义（score比x更好）
- 变量可以被覆盖（新值替换旧值）

---

## 二、数据类型

### 2.1 数字类型

#### 整数 (int)

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-3-10 | 计分系统 | 用变量记录游戏分数 |
| PYAI 1-0-7 | 变量 | `age = 10` |

```python
score = 100      # 整数
lives = 3        # 整数
level = 1        # 整数
```

#### 浮点数 (float)

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-3 | 返回值 | 利息计算 |
| PYAI 2-2-10 | 物理仿真 | 速度、加速度 |

```python
price = 9.99     # 浮点数
speed = 3.5      # 浮点数
pi = 3.14159     # 浮点数
```

### 2.2 字符串 (str)

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE1-4-06 | 人机交互 | 询问...并等待、回答 |
| CODE1-4-07 | 字符串操作 | 第N个字符、字符数 |
| PYAI 1-0-7 | 字符串 | `name = 'Hero'` |
| PYAI 1-1-8 | f-string | 格式化字符串 |

#### Scratch示例
```
询问 [你叫什么名字？] 并等待
说 (字符串连接 [你好，] 和 (回答))
```

#### Python示例
```python
# 字符串定义
name = "张三"
greeting = '你好'

# 字符串拼接
message = "你好，" + name

# f-string格式化（推荐）
message = f"你好，{name}，你今年{age}岁"

# 字符串索引
first_char = name[0]  # '张'

# 字符串长度
length = len(name)    # 2
```

### 2.3 布尔值 (bool)

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-07 | 布尔运算 | 0/1（假/真） |
| PYAI 1-0-9 | 布尔值 | `True` / `False` |
| PYAI 1-2-4 | 逻辑运算符 | `not` |

#### Python示例
```python
is_alive = True
game_over = False

# 布尔运算
if is_alive and not game_over:
    print("游戏继续")
```

### 2.4 列表 (list)

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-10 | 列表(数组) | 存储多个数据的容器 |
| PYAI 1-3-1 | 列表定义 | `fruits = ['apple', 'banana']` |
| PYAI 1-3-2 | 列表操作 | `append()` |
| PYAI 1-3-4 | 列表进阶 | `insert/pop/remove/sort` |

#### Python示例
```python
# 列表定义
fruits = ['apple', 'banana', 'cherry']
scores = [85, 92, 78, 95]

# 访问元素
first = fruits[0]      # 'apple'
last = fruits[-1]      # 'cherry'

# 添加元素
fruits.append('orange')

# 删除元素
fruits.remove('banana')
fruits.pop(0)          # 删除第一个

# 列表长度
count = len(fruits)
```

### 2.5 字典 (dict)

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-2-9 | 字典初识 | 键值对 |
| PYAI 1-3-8 | 字典 | 映射关系 |

#### Python示例
```python
# 字典定义
player = {
    'name': '勇士',
    'health': 100,
    'attack': 25
}

# 访问值
name = player['name']      # '勇士'
health = player['health']  # 100

# 修改值
player['health'] = 80

# 添加键值对
player['defense'] = 10

# 遍历字典
for key, value in player.items():
    print(f"{key}: {value}")
```

---

## 三、运算符

### 3.1 算术运算符

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-02 | 加法运算 | 总价 = 总价 + 新增金额 |
| CODE2-3-03 | 减法运算 | 子弹 = 子弹 - 1 |
| CODE2-3-04 | 乘法运算 | 得分 = 数量 × 分值系数 |
| CODE2-3-05 | 除法运算 | 商、取整、取余 |
| PYAI 1-1-9 | 算术运算符 | `//`整除、`%`取余、`**`幂运算 |
| PYAI 1-2-8 | 幂运算与整除 | 数字位分离 |

#### Python示例
```python
# 基本运算
a + b    # 加法
a - b    # 减法
a * b    # 乘法
a / b    # 除法（结果为浮点数）
a // b   # 整除（结果为整数）
a % b    # 取余（求余数）
a ** b   # 幂运算（a的b次方）

# 实际应用
total = price * quantity           # 计算总价
remainder = 17 % 5                 # 余数为2
last_digit = number % 10           # 取个位数
square = side ** 2                 # 计算平方
```

### 3.2 比较运算符

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-01 | 比较运算 | > < = 符号的使用 |
| PYAI 1-0-11 | 比较运算符 | `if enemy.health < 20:` |
| PYAI 1-1-10 | 比较运算符 | 布尔值 |

#### Python示例
```python
a == b   # 等于
a != b   # 不等于
a > b    # 大于
a < b    # 小于
a >= b   # 大于等于
a <= b   # 小于等于

# 实际应用
if score >= 60:
    print("及格")
if health <= 0:
    print("游戏结束")
```

### 3.3 逻辑运算符

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-07 | 布尔运算-与(AND) | 条件A成立且条件B成立 |
| CODE2-3-08 | 布尔运算-或(OR) | 条件A成立或条件B成立 |
| CODE2-3-09 | 布尔运算-非(NOT) | 取反 |
| PYAI 1-2-4 | 逻辑运算符(not) | `if not is_gold:` |
| PYAI 1-2-5 | 逻辑与/或 | `if health > 0 and has_weapon:` |
| PYAI 1-2-6 | 短路求值 | `if enemy and enemy.health > 0:` |

#### Python示例
```python
# 逻辑与 (and) - 两个条件都为True才为True
if health > 0 and has_weapon:
    print("可以攻击")

# 逻辑或 (or) - 任一条件为True就为True
if is_admin or is_owner:
    print("有权限")

# 逻辑非 (not) - 取反
if not game_over:
    print("游戏继续")

# 短路求值（重要！）
if enemy and enemy.health > 0:  # 先检查enemy是否存在
    hero.attack(enemy)
```

### 3.4 赋值运算符

#### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE2-3-02 | 变量累加 | 多次累加到同一变量 |
| PYAI 1-2-7 | 赋值运算符 | `+=`, `-=` |

#### Python示例
```python
score = 0

# 普通赋值
score = score + 10

# 简写形式（推荐）
score += 10    # 等同于 score = score + 10
score -= 5     # 等同于 score = score - 5
score *= 2     # 等同于 score = score * 2
score /= 2     # 等同于 score = score / 2
```

---

## 四、类型转换

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| PYAI 1-1-8 | 类型转换 | `int(input('年龄:'))` |

### Python示例
```python
# 字符串转整数
age_str = "18"
age = int(age_str)      # 18

# 字符串转浮点数
price_str = "9.99"
price = float(price_str)  # 9.99

# 数字转字符串
score = 100
score_str = str(score)  # "100"

# input()返回字符串，需要转换
age = int(input("请输入年龄: "))
price = float(input("请输入价格: "))
```

---

## 五、变量作用域

### 跨课程出现

| 课程编号 | 课程名称 | 具体内容 |
|----------|---------|---------|
| CODE3-2-02 | 私有变量 | 只属于当前克隆体的变量 |
| CODE3-2-02 | 全局变量 | 所有角色共享的变量 |
| PYAI 1-1-5 | 变量作用域 | 局部变量、全局变量 |

### Python示例
```python
# 全局变量
score = 0

def add_score(points):
    global score        # 声明使用全局变量
    score += points

def get_bonus():
    bonus = 10          # 局部变量，只在函数内有效
    return bonus
```

---

## 六、变量进阶路线

```
CODE1-3-10          CODE2-3-10          PYAI 1-3-1          PYAI 1-2-9          PYAI 2-2-1
变量        →       列表         →      列表操作      →     字典         →      类属性
   ↓                   ↓                   ↓                   ↓                   ↓
 单个值             多个值             增删改查            键值对             对象属性
```

---

## 七、Scratch → Python 映射

| Scratch | Python | 说明 |
|---------|--------|------|
| 设定 [变量] 为 (值) | `variable = value` | 变量赋值 |
| 将 [变量] 改变 (值) | `variable += value` | 变量增加 |
| 变量 | `variable` | 读取变量值 |
| 列表 | `list = []` | 列表定义 |
| 添加 (项) 到 [列表] | `list.append(item)` | 添加元素 |
| 删除 [列表] 的第 (1) 项 | `list.pop(0)` | 删除元素 |
| [列表] 的第 (1) 项 | `list[0]` | 访问元素 |
| [列表] 的项目数 | `len(list)` | 列表长度 |

---

## 八、常见错误与禁忌

| 错误 | 后果 | 正确做法 |
|------|------|---------|
| ❌ 变量未定义就使用 | NameError | 先定义再使用 |
| ❌ 字符串和数字直接相加 | TypeError | 使用f-string或str()转换 |
| ❌ 列表索引越界 | IndexError | 检查索引范围 |
| ❌ 字典访问不存在的键 | KeyError | 使用get()或先检查 |
| ❌ 整数除法期望得到整数 | 得到浮点数 | 使用//整除 |

---

**维护者**：知识库管理员
**数据来源**：萃取报告/CODE/、萃取报告/PythonAI/
**整合原则**：基于现有萃取报告，不压缩删减
