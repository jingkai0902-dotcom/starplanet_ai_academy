{
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(sqlite3:*)",
      "Bash(dir /s /b \"C:\\\\Users\\\\Frank.J\\\\starplanet_ai_academy\\\\知识库\")",
      "Bash(findstr:*)",
      "Bash(Get-ChildItem -Path \"C:\\\\Users\\\\Frank.J\\\\starplanet_ai_academy\\\\知识库\" -Recurse -Directory)",
      "Bash(Select-Object -First 30 -ExpandProperty FullName)",
      "Bash(python scripts/run.py:*)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/萃取报告/CODE/CODE3_03_高级工程.md\" << 'ENDOFFILE'\n# CODE萃取：CODE3阶段3-3 高级工程\n\n> **来源**：NotebookLM Code Lesson Plan \\(148个来源\\)\n> **萃取日期**：2026-02-06\n> **萃取深度**：10/10多维度（含认知负荷标签、IFC标签、变体示例）\n> **更新日期**：2026-02-06\n\n---\n\n## 单元概览\n\n| 项目 | 内容 |\n|------|------|\n| **单元编号** | 3-3 |\n| **单元名称** | 高级工程 \\(Advanced Engineering\\) |\n| **适用年龄** | 三年级（8-9岁） |\n| **课时数** | 12节 × 90分钟 |\n| **核心目标** | 复杂机械结构设计、多传感器协同、高级运动控制 |\n| **主要教具** | WeDo 2.0套件 + 扩展传感器（红外、超声波）+ 舵机 |\n\n**底层逻辑**\nCODE3-3是CODE体系的收官模块，综合运用前两年所学的机械原理、传感器应用和编程逻辑，完成复杂的工程项目。重点培养学生的系统设计能力和工程思维。\n\n**单元教学策略**\n- 仿生机械（01-02）：六足机器人、投篮机\n- 创意机械（03-05）：花瓣机、发牌机、两脚怪\n- 经典机械（06-08）：投石机、坦克、螃蟹\n- 智能控制（09-12）：巡线车、舞龙、机械臂、电梯\n\n`#执行层` `#测评项`\n[UID: CODE3-M3-001]\n[关联: CODE3-M2-001 CODE游戏开发（前置基础）]\n[关联: PYAI-L1-001 PythonAI入门（进阶衔接）]\n\n---\n\n## 课程列表\n\n| 课次 | 课程名称 | 核心知识点 | 项目内容 | 认知负荷 |\n|------|----------|------------|----------|----------|\n| 1 | 六足机器人 | 三角形稳定性 + 三角步态 + 差速转向 | 仿生昆虫 | 高 |\n| 2 | 投篮机 | 曲柄滑块机构 + 红外计数 + 去抖动 | 自动投篮 | 高 |\n| 3 | 自动花瓣机 | 齿轮传动比 + 双电机协作 + 繁花曲线 | 绘图机 | 高 |\n| 4 | 自动发牌机 | 摩擦力 + 摩擦轮输送 + 舵机定位 | 扑克发牌 | 中-高 |\n| 5 | 两脚怪 | 双曲柄机构 + 重心平衡 + 平行四边形 | 步行机器人 | 高 |\n| 6 | 投石机 | 杠杆原理\\(费力杠杆\\) + 蜗轮蜗杆自锁 | 抛射装置 | 中-高 |\n| 7 | 坦克大战 | 履带传动 + 压强 + 红外通讯 | 对战坦克 | 高 |\n| 8 | 横行霸道的螃蟹 | 垂直传动\\(锥齿轮\\) + 多杆机构 | 仿生螃蟹 | 高 |\n| 9 | 巡线小车 | 红外反射原理 + 巡线算法 + 反馈控制 | 自动导航车 | 高 |\n| 10 | 舞龙 | 曲柄滑块变体 + 相位差 + 电位器调速 | 波浪运动 | 高 |\n| 11 | 机械臂 | 自由度\\(DOF\\) + 蜗轮蜗杆自锁 + 平行四边形抓手 | 工业机械臂 | 高 |\n| 12 | 小小电梯 | 定滑轮 + 蜗轮箱减速 + 楼层定位 | 智能电梯 | 高 |\n\n---\n\n## 通用教学流程（90分钟）\n\n| 环节 | 时间 | 内容 | 认知负荷 | IFC标签 |\n|------|------|------|----------|---------|\n| 课堂问候 | 2分钟 | 自我介绍、安全规则 | `#低负荷-热身` | `#IFC-预防` |\n| 课程回顾 | 5分钟 | 复习上节课知识点 | `#低负荷-热身` | `#IFC-预防` |\n| 情境引入 | 5分钟 | 视频/故事导入 | `#低负荷-热身` | `#IFC-预防` |\n| 任务分析 | 15分钟 | 拆解任务、讲解原理 | `#中负荷-操练` | `#IFC-即时` |\n| 硬件搭建 | 25分钟 | 动手搭建项目 | `#高负荷-产出` | `#IFC-即时` |\n| 编程调试 | 25分钟 | 编写程序、调试 | `#高负荷-产出` | `#IFC-即时` |\n| 家长班会 | 10分钟 | 展示成果、汇报学习 | `#低负荷-热身` | `#IFC-复盘` |\n\n`#执行层` `#测评项`\n[UID: CODE3-M3-FLOW-001]\n\n---\n\n## 详细课程萃取\n\n### 第1课：六足机器人\n\n#### 课程基本信息\n\n| 项目 | 内容 |\n|------|------|\n| **课程编号** | 3-3-01 |\n| **课程名称** | 六足机器人 |\n| **认知负荷** | 高 |\n| **核心技能** | 三角形稳定性、三角步态、差速转向 |\n\n#### 详细教学流程\n\n**步骤1：情境引入（5分钟）** `#低负荷-热身` `#IFC-预防`\n\n**教师话术**\n> \"小朋友们，你们观察过昆虫是怎么走路的吗？蚂蚁、蜘蛛、螳螂...它们都有很多条腿。今天我们要制作一个六足机器人，像昆虫一样稳稳地走路！\"\n\n---\n\n**步骤2：任务分析（15分钟）** `#中负荷-操练` `#IFC-即时` ⭐核心环节\n\n**教师话术**\n> \"六足机器人为什么能稳定行走？秘密就在于'三角步态'！\n>\n> 想象一下：六条腿分成两组，每组三条腿。当一组腿抬起来迈步时，另一组三条腿稳稳地支撑在地上，形成一个三角形。三角形是最稳定的形状！\n>\n> 转向怎么实现呢？用'差速转向'——左边的腿走得慢，右边的腿走得快，机器人就会向左转。就像坦克一样！\"\n\n**变体示例**\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 不理解三角步态 | 用手指演示 | 三根手指支撑，另三根移动 |\n| 机器人不稳 | 检查重心 | 确保重心在支撑三角形内 |\n| 想增加功能 | 添加避障 | 用超声波传感器检测障碍物 |\n\n---\n\n**核心知识点**\n- 三角形稳定性：三点确定一个平面，最稳定\n- 三角步态：六足分两组交替运动\n- 差速转向：两侧速度差实现转向\n\n`#执行层` `#测评项`\n[UID: CODE3-M3-01-001]\n\n---\nENDOFFILE)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/萃取报告/CODE/CODE3_01_智能系统.md\" << 'ENDOFFILE'\n# CODE萃取：CODE3阶段3-1 智能系统\n\n> **来源**：NotebookLM Code Lesson Plan \\(148个来源\\)\n> **萃取日期**：2026-02-06\n> **萃取深度**：10/10多维度（含认知负荷标签、IFC标签、变体示例）\n> **更新日期**：2026-02-06\n\n---\n\n## 单元概览\n\n| 项目 | 内容 |\n|------|------|\n| **单元编号** | 3-1 |\n| **单元名称** | 智能系统 \\(Smart Systems\\) |\n| **适用年龄** | 三年级（8-9岁） |\n| **课时数** | 12节 × 90分钟 |\n| **核心目标** | 多传感器协同、流程图设计、智能控制系统 |\n| **主要教具** | WeDo 2.0套件 + 扩展传感器（光线、红外、超声波、温度）+ 舵机 |\n\n**底层逻辑**\nCODE3-1是三年级的开篇模块，从CODE2的单传感器应用升级到多传感器协同工作。学生将学习如何设计复杂的智能控制系统，理解流程图在程序设计中的重要性。\n\n**单元教学策略**\n- 传感器应用（01-03）：光线传感器、红外通讯、超声波测距\n- 逻辑设计（04-06）：逻辑与、流程图、物理公式\n- 综合系统（07-12）：多传感器协同、安全逻辑\n\n`#执行层` `#测评项`\n[UID: CODE3-M1-001]\n[关联: CODE2-M3-001 CODE算法逻辑（前置基础）]\n[关联: CODE3-M2-001 CODE游戏开发（进阶衔接）]\n\n---\n\n## 课程列表\n\n| 课次 | 课程名称 | 核心知识点 | 项目内容 | 认知负荷 | 状态 |\n|------|----------|------------|----------|----------|------|\n| 1 | 冰箱报警器 | 光线传感器 + 逻辑非\\(NOT\\) + 计时器 | 冰箱门报警 | 中-高 | ✅ |\n| 2 | 神奇遥控器 | 红外通讯原理 + 广播机制 | 无线遥控 | 高 | ✅ |\n| 3 | 魔力电吉他 | 超声波测距 + 数学运算\\(线性变换\\) + 变量 | 电子乐器 | 高 | ✅ |\n| 4 | 楼梯灯 | 逻辑与\\(AND\\) + 流程图设计 + 多传感器协同 | 智能照明 | 高 | ✅ |\n| 5 | 家园卫士 | 雷达扫描逻辑 + 舵机与电机配合 | 安防系统 | 高 | ✅ |\n| 6 | 测速试验车 | 物理公式\\(速度=距离/时间\\) + 计时器 | 速度测量 | 高 | ✅ |\n| 7 | （资料缺失） | 推测：传感器综合应用 | - | - | ❌ |\n| 8 | （资料缺失） | 推测：传感器综合应用 | - | - | ❌ |\n| 9 | （资料缺失） | 推测：传感器综合应用 | - | - | ❌ |\n| 10 | （资料缺失） | 推测：传感器综合应用 | - | - | ❌ |\n| 11 | 火灾通道门 | 流程图应用 + 安全逻辑优先权 + 温度传感器 | 消防安全 | 高 | ✅ |\n| 12 | （资料缺失） | 推测：单元总结项目 | - | - | ❌ |\n\n**说明**：标记为❌的课程在源文档中缺失，共5节课（7-10, 12）\n\n---\n\n## 通用教学流程（90分钟）\n\n| 环节 | 时间 | 内容 | 认知负荷 | IFC标签 |\n|------|------|------|----------|---------|\n| 课堂问候 | 2分钟 | 自我介绍、安全规则 | `#低负荷-热身` | `#IFC-预防` |\n| 课程回顾 | 5分钟 | 复习上节课知识点 | `#低负荷-热身` | `#IFC-预防` |\n| 情境引入 | 5分钟 | 视频/故事导入 | `#低负荷-热身` | `#IFC-预防` |\n| 任务分析 | 15分钟 | 拆解任务、讲解原理 | `#中负荷-操练` | `#IFC-即时` |\n| 硬件搭建 | 25分钟 | 动手搭建项目 | `#高负荷-产出` | `#IFC-即时` |\n| 编程调试 | 25分钟 | 编写程序、调试 | `#高负荷-产出` | `#IFC-即时` |\n| 家长班会 | 10分钟 | 展示成果、汇报学习 | `#低负荷-热身` | `#IFC-复盘` |\n\n`#执行层` `#测评项`\n[UID: CODE3-M1-FLOW-001]\n\n---\n\n## 详细课程萃取\n\n---CONTENT_MARKER---\nENDOFFILE)",
      "Bash(timeout 120 powershell:*)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/萃取报告/PythonAI/L2_02_项目应用.md\" << 'ENDOFFILE'\n# PythonAI萃取：L2-2 项目应用\n\n> **来源**：NotebookLM Python AI Lesson Plan \\(96个来源\\)\n> **萃取日期**：2026-02-09\n> **萃取深度**：5-5多维度（含认知负荷标签、IFC标签、变体示例）\n> **更新日期**：2026-02-09\n\n---\n\n## 单元概览\n\n| 项目 | 内容 |\n|------|------|\n| **单元编号** | PYAI 2-2 |\n| **单元名称** | 项目应用 |\n| **适用年龄** | 四年级及以上（10-12岁） |\n| **课时数** | 12节 × 90分钟 |\n| **核心目标** | 掌握Pygame游戏开发与物理仿真，实现面向对象编程的综合应用 |\n| **主要平台** | Python IDLE + Pygame |\n\n**底层逻辑**\n从面向过程转向面向对象编程，通过游戏开发项目理解类与实例、碰撞检测、物理仿真等核心概念。\n\n**单元教��策略**\n- 面向对象（01）：类和对象基础\n- Pygame入门（02-03）：文字绘制、弹幕生成\n- 图形绘制（04-06）：pygame.draw、蒙特卡洛、星空特效\n- 游戏开发（07-08）：球球大作战、贪食蛇\n- 物理仿真（09-11）：大炮射击系列、Pymunk引擎\n- 阶段复习（12）：知识整合\n\n`#执行层` `#测评项`\n[UID: PYAI-22-001]\n[关联: PYAI-21-001 PythonAI算法数据科学（前置基础）]\n[关联: PYAI-11-001 PythonAI函数封装（前置基础）]\n[关联: PYAI-23-001 PythonAI交互式AI（进阶衔接）]\n\n---\n\n## 课程列表\n\n| 课次 | 课程名称 | 核心知识点 | 项目内容 | 认知负荷 |\n|------|----------|------------|----------|----------|\n| 2-2-1 | 脚踏实地 | class定义、实例创建、self、__init__ | 类和对象 | 高 |\n| 2-2-2 | 电子成绩单 | IDLE环境、Pygame初识、文字绘制 | 电子成绩单 | 中-高 |\n| 2-2-3 | 弹幕生成器 | Pygame综合、Random/Time模块、类实例应用 | 弹幕生成器 | 高 |\n| 2-2-4 | 规矩方圆 | pygame.draw.line\\(\\)、二维列表、RGB色彩 | 规矩方圆 | 中-高 |\n| 2-2-5 | 蒙特卡洛法 | pygame.draw.circle\\(\\)、距离公式、蒙特卡洛算法 | 求圆周率 | 高 |\n| 2-2-6 | 弱肉强食 | 随机模块、类属性控制、for循环高级用法 | 星空特效 | 中-高 |\n| 2-2-7 | 积小致巨1 | 按键交互、碰撞检测、列表动态操作 | 球球大作战 | 高 |\n| 2-2-8 | 积小致巨2 | 多角色联动、列表数据存取、贪食蛇逻辑 | 贪食蛇 | 高 |\n| 2-2-9 | 举重若轻1 | 图像导入变换、能量值变化、游戏环节控制 | 大炮射击1 | 高 |\n| 2-2-10 | 举重若轻2 | 物理运动原理、加速度、速度合并 | 大炮射击2 | 高 |\n| 2-2-11 | 举重若轻3 | 向量拆分合并、爆炸效果、音频加载 | 大炮射击3 | 高 |\n| 2-2-12 | 阶段复习 | 综合复习Pygame与OOP | 阶段测试 | 中 |\n\n---\n\n## 通用教学流程（90分钟）\n\n| 环节 | 时间 | 内容 | 认知负荷 | IFC标签 |\n|------|------|------|----------|---------|\n| 课堂问候 | 2分钟 | 自我介绍、学习目标 | `#低负荷-热身` | `#IFC-预防` |\n| 课程回顾 | 5分钟 | 复习上节课代码知识 | `#低负荷-热身` | `#IFC-预防` |\n| 知识讲解 | 20分钟 | 新概念/语法讲解 | `#中负荷-操练` | `#IFC-即时` |\n| 代码实践 | 40分钟 | 编写游戏代码、调试 | `#高负荷-产出` | `#IFC-即时` |\n| 调节休息 | 3分钟 | 站起来活动 | `#调节-放松` | - |\n| 项目拓展 | 10分钟 | 功能扩展/创意改进 | `#高负荷-产出` | `#IFC-即时` |\n| 成果展示 | 10分钟 | 演示游戏、分享思路 | `#低负荷-热身` | `#IFC-复盘` |\n\n`#执行层` `#测评项`\n[UID: PYAI-22-FLOW-001]\n\n---\n\n## 详细课程萃取\n\n---\nENDOFFILE)",
      "Bash(comm:*)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/萃取报告/PythonAI/L2-3_MicroPython硬件开发.md\" << 'ENDOFFILE'\n# PythonAI萃取：L2-3 MicroPython硬件开发（MP系列）\n\n> **来源**：NotebookLM Python AI Lesson Plan - 智能纪要：Python2-3新课体系培训1 2026年2月5日\n> **萃取日期**：2026-02-09\n> **萃取深度**：10/10标杆级（含认知负荷标签、IFC标签、变体示例、硬件安全）\n> **版本**：V1.0（新课体系首版）\n\n---\n\n## 单元概览\n\n| 项目 | 内容 |\n|------|------|\n| **单元编号** | PYAI 2-3 \\(MP系列\\) |\n| **单元名称** | MicroPython硬件开发 |\n| **适用年龄** | 小学中高年级及以上（需完成PYAI L1） |\n| **课时数** | MP1: 12节×2课时=24课时 |\n| **核心目标** | 掌握MicroPython基础，熟练使用NovaMP库进行创意硬件开发 |\n| **主要平台** | NovaStar ESP32 + Web IDE + NovaMP定制库 |\n\n**底层逻辑**\n将Python软件编程知识迁移到物理世界，打通软硬件壁垒。通过MicroPython统一语法，实现与PYAI L1/L2课程的无缝接轨。\n\n**课程体系规划**\n- **MP1（基础入门）**：玩转基础元件，制作海龟雷达（本文档重点）\n- **MP2（综合实践）**：组装桌面陪伴机器人，实现语音交互、查天气\n- **MP3（物联网拓展）**：接入网络，制作手机远程控制的像素画框\n\n`#执行层` `#测评项`\n[UID: PYAI-23-MP-001]\n[关联: PYAI-14-001 PythonAI智能硬件（旧版，已替换）]\n[关联: PYAI-11-001 PythonAI函数封装（前置基础）]\n\n---\n\n## 技术方案革新\n\n### 旧方案 vs 新方案对比\n\n| 维度 | 旧方案（已淘汰） | 新方案（MP系列） |\n|------|------------------|------------------|\n| **开发语言** | C/C++ \\(Arduino\\) 或图形化 | MicroPython |\n| **入门工具** | Downmixly（局限性大） | 原生Python代码 |\n| **进阶工具** | Duino（C语言门槛高） | NovaMP定制部件库 |\n| **图形化** | Mind+/Mixly（与代码断层） | 完全代码化 |\n| **代码量** | 繁琐底层配置 | 最短三行代码控制硬件 |\n| **语法统一** | 与Python课程断层 | 与PYAI L1/L2完全一致 |\n\n### 新方案核心优势\n1. **语法统一**：MicroPython语法与学生主修的Python纯软课程无缝接轨\n2. **代码简洁**：语法接近自然语言，降低入门门槛\n3. **专注创意**：学生专注于创意逻辑而非底层报错\n4. **标准化接口**：所有驱动提供统一的help\\(\\)和test\\(\\)方法\n\n`#执行层` `#测评项`\n[UID: PYAI-23-MP-TECH-001]\n\n---\n\n## MP1阶段课程列表\n\n| 模块 | 课次 | 课程名称 | 核心知识点 | 项目内容 | 认知负荷 |\n|------|------|----------|------------|----------|----------|\n| **模块一：基础概念与硬件控制** | L1 | 初识MicroPython | ESP32认知、Web IDE、machine模块、Pin类、time模块 | 点亮LED | 中 |\n| | L2 | 按钮与数字输入 | 输入模式、Pin.IN、按键抖动、软件消抖 | 按钮控制LED | 中 |\n| | L3 | 模拟信号与PWM | 数字/模拟信号、ADC模数转换、PWM脉宽调制 | 旋钮调光灯 | 中-高 |\n| **模块二：面向对象编程基础** | L4 | 类与实例\\(1\\) | Class定义、Instance创建、类是图纸/实例是实物 | 编写简单类 | 高 |\n| | L5 | 类与实例\\(2\\) | self关键字、__init__初始化、实例属性 | 类的属性和方法 | 高 |\n| | L6 | 硬件驱动封装 | import三种方式、NPY部件库、help\\(\\)/test\\(\\) | 调用封装驱动 | 中-高 |\n| **模块三：Noahmp核心特性应用** | L7 | 温湿度数据采集 | DHT11传感器、RTC时间戳、文件操作、CSV保存 | 温湿度记录仪 | 中-高 |\n| | L8 | 舵机与映射 | SG90舵机\\(0-180度\\)、数值映射算法 | 旋钮控制舵机 | 中-高 |\n| | L9 | 声光互动 | RGB三基色\\(0-255\\)、NeoPixel库、声音传感器 | 音强流水灯 | 中-高 |\n| **模块四：综合应用项目** | L10 | 海龟雷达\\(1\\) | 超声波测距原理、HC-SR04驱动 | 超声波测距仪 | 高 |\n| | L11 | 海龟雷达\\(2\\) | 串口通信UART、上下位机交互 | ESP32发送数据 | 高 |\n| | L12 | 海龟雷达\\(3\\) | 综合调试、Python海龟画图、数据可视化 | 雷达扫描系统 | 高 |\n\n---\n\n## 通用教学流程（90分钟/2课时）\n\n| 环节 | 时间 | 内容 | 认知负荷 | IFC标签 |\n|------|------|------|----------|---------|\n| 课堂问候 | 2分钟 | 自我介绍、安全规则强调 | `#低负荷-热身` | `#IFC-预防` |\n| 课程回顾 | 5分钟 | 复习上节课代码和硬件知识 | `#低负荷-热身` | `#IFC-预防` |\n| 知识讲解 | 15分钟 | 新概念/新硬件讲解 | `#中负荷-操练` | `#IFC-即时` |\n| 硬件搭建 | 20分钟 | 接线、组装硬件 | `#高负荷-产出` | `#IFC-即时` |\n| 调节休息 | 3分钟 | 站起来活动、眼保健操 | `#调节-放松` | - |\n| 编程调试 | 30分钟 | 编写代码、调试系统 | `#高负荷-产出` | `#IFC-即时` |\n| 成果展示 | 10分钟 | 演示项目、分享思路 | `#低负荷-热身` | `#IFC-复盘` |\n\n`#执行层` `#测评项`\n[UID: PYAI-23-MP-FLOW-001]\n\n---\nENDOFFILE)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/知识库理想架构设计_V1.md\" << 'ENDOFFILE'\n# 斯坦星球知识库理想架构设计\n\n> **创建日期**: 2026-02-09\n> **状态**: 设计稿，待讨论确认\n> **核心原则**: 既有框架逻辑，也有具体内容；既能宏观导航，也能微观查询\n> **参考**: 励步知识库理想架构设计_V1.md\n\n---\n\n## 一、设计理念\n\n### 1.1 当前状态分析\n\n**已完成的工作：**\n| 模块 | 课程数 | 萃取状态 | 质量评估 |\n|------|--------|----------|----------|\n| STEM课程 | 133节 | ✅ 深度萃取 | 10/10 标杆级 |\n| CODE课程 | 120节 | ✅ 原子化萃取 | 10/10 标杆级 |\n| PythonAI课程 | 109节 | ✅ 原子化萃取 | 10/10 标杆级 |\n| 品牌知识 | - | ✅ 深度萃取 | 10/10 标杆级 |\n| **合计** | **362节** | | |\n\n**当前问题：**\n| 问题 | 表现 |\n|------|------|\n| 内容分散 | 萃取报告按\"模块\"组织，而非按\"使用场景\"组织 |\n| 缺少知识点数据库 | 无法回答\"循环语句在哪些课程出现？\" |\n| 缺少螺旋进阶图 | 无法追溯\"变量概念从CODE到Python如何进阶\" |\n| 缺少项目案例库 | 各课程的项目作品分散在各萃取报告中 |\n| 硬件知识分散 | ESP32/传感器知识分布在STEM、CODE、PythonAI多处 |\n\n### 1.2 理想状态\n\n**三个使用场景必须能回答：**\n\n| 场景 | 问题示例 | 知识库应能提供 |\n|------|---------|---------------|\n| 教师备课 | \"CODE1-2-3这节课怎么上？\" | 完整5E流程 + 具体积木/代码 + 教学话术 |\n| 家长沟通 | \"孩子学完STEM小班能做什么？\" | 按阶段的能力目标 + 项目作品展示 |\n| 课程规划 | \"循环语句从哪里开始教？怎么进阶？\" | 跨课程体系的知识点追溯图 |\n| 硬件选型 | \"ESP32在哪些课程用到？\" | 硬件使用汇总 + 接线图 + 代码模板 |\n\n### 1.3 内容分层原则\n\n```\n┌─────────────────────────────────────────────────────┐\n│  第1层：导航层（索引、目录、快速入口）               │  ✅ 已有\n├─────────────────────────────────────────────────────┤\n│  第2层：框架层（教学方法、5E流程、评估标准）         │  ✅ 已有\n├─────────────────────────────────────────────────────┤\n│  第3层：内容层（具体积木、代码、硬件接线）           │  ✅ 已有（萃取报告）\n├─────────────────────────────────────────────────────┤\n│  第4层：原子层（单个知识点，可被检索和关联）         │  ⚠️ 部分缺失\n├─────────────────────────────────────────────────────┤\n│  第5层：关联层（跨课程进阶路线、知识点复现）         │  ❌ 缺失\n└─────────────────────────────────────────────────────┘\n```\n\n---\n\n## 二、理想架构\n\n```\n知识库/\n├── 00_导航中心/\n│   ├── 知识库总索引.md              # 全局入口\n│   ├── 按课程体系导航.md            # STEM→CODE→PythonAI→C++\n│   ├── 按年龄段导航.md              # 3-4岁→5-6岁→7-9岁→10-12岁→12+\n│   ├── 按知识点导航.md              # 编程概念/硬件/AI/数学\n│   └── 按角色导航.md                # 教师/家长/管理者/销售\n│\n├── 01_课程内容库/                   # ★ 核心：按课程组织的教学内容\n│   ├── STEM/\n│   │   ├── 小班/\n│   │   │   ├── 小班_课程总览.md     # 4个模块36节课概览\n│   │   │   ├── 小班_01_机械与工具/  # 每个模块一个文件夹\n│   │   │   │   ├── 模块概览.md\n│   │   │   │   ├── 1-1-01_认识工具.md  # 每节课一个文件\n│   │   │   │   ├── 1-1-02_简单机械.md\n│   │   │   │   └── ...\n│   │   │   ├── 小班_02_动物世界/\n│   │   │   ├── 小班_03_植物百科/\n│   │   │   └── 小班_04_生活科学/\n│   │   ├── 中班/\n│   │   │   └── ...（同上结构）\n│   │   └── 大班/\n│   │       └── ...（同上结构）\n│   │\n│   ├── CODE/\n│   │   ├── CODE1/\n│   │   │   ├── CODE1_课程总览.md\n│   │   │   ├── CODE1_M1_Scratch入门/\n│   │   │   │   ├── 模块概览.md\n│   │   │   │   ├── CODE1-1-1_初识Scratch.md\n│   │   │   │   └── ...\n│   │   │   ├── CODE1_M2_动画创作/\n│   │   │   ├── CODE1_M3_游戏设计/\n│   │   │   └── CODE1_M4_综合项目/\n│   │   ├── CODE2/\n│   │   └── CODE3/\n│   │\n│   ├── PythonAI/\n│   │   ├── Level1/\n│   │   │   ├── L1_课程总览.md\n│   │   │   ├── L1_00_基础语法/\n│   │   │   ├── L1_01_函数封装/\n│   │   │   ├── L1_02_算法逻辑/\n│   │   │   ├── L1_03_数据结构/\n│   │   │   └── L1_04_智能硬件/\n│   │   ├── Level2/\n│   │   │   ├── L2_课程总览.md\n│   │   │   ├── L2_01_算法数据科学/\n│   │   │   ├── L2_02_项目应用/\n│   │   │   ├── L2_03_交互式AI/\n│   │   │   └── L2_04_计算机视觉/\n│   │   └── Level2-3_MP/              # 2026新课体系\n│   │       ├── MP_课程总览.md\n│   │       ├── MP1_基础入门/\n│   │       ├── MP2_综合实践/         # 规划中\n│   │       └── MP3_物联网拓展/       # 规划中\n│   │\n│   └── Cpp/                          # C++课程（待萃取）\n│       └── ...\n│\n├── 02_知识点数据库/                 # ★ 原子层：可检索的最小单位\n│   ├── 编程概念库/\n│   │   ├── 编程概念总表.md          # 全课程编程概念汇总\n│   │   ├── 变量与数据类型.md        # 跨课程追溯\n│   │   ├── 循环结构.md\n│   │   ├── 条件判断.md\n│   │   ├── 函数与封装.md\n│   │   ├── 面向对象.md\n│   │   └── 算法基础.md\n│   │\n│   ├── 硬件知识库/\n│   │   ├── 硬件总表.md              # 全课程硬件汇总\n│   │   ├── ESP32开发板.md           # 跨课程使用汇总\n│   │   ├── 传感器大全.md            # 光线/温湿度/超声波/...\n│   │   ├── 执行器大全.md            # LED/舵机/电机/蜂鸣器/...\n│   │   ├── 接线图汇总.md\n│   │   └── 常见故障排查.md\n│   │\n│   ├── 数学概念库/\n│   │   ├── 数学概念总表.md\n│   │   ├── 坐标系与向量.md\n│   │   ├── 三角函数应用.md\n│   │   ├── 概率与随机.md\n│   │   └── 物理仿真数学.md\n│   │\n│   ├── AI知识库/\n│   │   ├── AI概念总表.md\n│   │   ├── 计算机视觉.md            # OpenCV/MediaPipe\n│   │   ├── 机器学习基础.md\n│   │   └── 人工智能伦理.md\n│   │\n│   └── 螺旋进阶图/\n│       ├── 循环语句进阶.md          # Scratch重复→Python for/while\n│       ├── 变量概念进阶.md          # 图形化变量→Python变量→类属性\n│       ├── 硬件控制进阶.md          # STEM乐高→CODE WeDo→Python ESP32\n│       ├── 项目复杂度进阶.md        # 单功能→多功能→系统级\n│       └── 思维能力进阶.md          # 模仿→理解→创造\n│\n├── 03_项目案例库/                   # ★ 新增：项目作品汇总\n│   ├── STEM项目/\n│   │   ├── 小班项目集.md            # 简单机械、动物模型...\n│   │   ├── 中班项目集.md            # 齿轮装置、植物观察...\n│   │   └── 大班项目集.md            # 智能家居、机器人...\n│   ├── CODE项目/\n│   │   ├── Scratch游戏集.md         # 打地鼠、接苹果、迷宫...\n│   │   ├── WeDo机器人集.md          # 风扇、赛车、机械臂...\n│   │   └── EV3项目集.md             # 循迹车、分拣机...\n│   ├── PythonAI项目/\n│   │   ├── 游戏开发集.md            # 贪食蛇、弹幕、大炮射击...\n│   │   ├── 数据可视化集.md          # 图表、动画、仿真...\n│   │   ├── AI应用集.md              # 人脸识别、手势控制...\n│   │   └── 硬件项目集.md            # 智能夜灯、智能花房、海龟雷达...\n│   └── 跨课程综合项目/\n│       └── 智能家居系统.md          # STEM+CODE+Python综合\n│\n├── 04_教学方法库/                   # 框架层：怎么教\n│   ├── 5E教学法/\n│   │   ├── 5E教学法完整指南.md\n│   │   ├── STEM中的5E应用.md\n│   │   ├── CODE中的5E应用.md\n│   │   └── PythonAI中的5E应用.md\n│   ├── PBL项目制学习/\n│   │   ├── PBL完整指南.md\n│   │   └── PBL案例分析.md\n│   ├── 课堂管理/\n│   │   ├── 低龄段课堂管理.md        # 3-6岁\n│   │   ├── 中龄段课堂管理.md        # 7-9岁\n│   │   └── 高龄段课堂管理.md        # 10-12岁\n│   ├── 差异化教学/\n│   │   ├── 学习风格识别.md\n│   │   └── 个性化调整策略.md\n│   └── 评估方法/\n│       ├── 形成性评估.md\n│       ├── 项目评估标准.md\n│       └── 能力发展评估.md\n│\n├── 05_培训体系/                     # 现有内容保留\n│   ├── 教学部培训/\n│   │   ├── 新教师入职培训/\n│   │   ├── 课程专项培训/\n│   │   └── 教学技能提升/\n│   ├── 销售部培训/\n│   └── 管理层培训/\n│\n├── 06_运营支持/                     # 现有内容整合\n│   ├── 销售话术库/\n│   │   ├── 课程介绍话术.md\n│   │   ├── 异议处理话术.md\n│   │   └── 续费转化话术.md\n│   ├── 家长沟通手册/\n│   │   ├── 学习报告模板.md\n│   │   ├── 常见问题解答.md\n│   │   └── 家长会指南.md\n│   ├── 问题解决库/\n│   │   ├── 硬件故障排查.md\n│   │   ├── 软件问题解决.md\n│   │   └── 课堂突发处理.md\n│   └── 工具模板库/\n│       ├── 教案模板.md\n│       ├── 评估表模板.md\n│       └── 项目展示模板.md\n│\n├── 07_品牌知识/                     # 现有内容保留\n│   ├── 品牌定位.md\n│   ├── 教育理念.md\n│   ├── 产品体系.md\n│   ├── 竞品对比.md\n│   └── 八大能力模型.md\n│\n└── 08_决策参考/                     # 现有内容保留\n    ├── 课程体系全景图.md\n    ├── 能力发展路径图.md\n    ├── 年龄段课程推荐.md\n    └── 教学质量标准.md\n```\n\n---\nENDOFFILE)",
      "Bash(python scripts/split_courses.py:*)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/02_知识点数据库/数学概念库/角度与三角函数.md\" << 'ENDOFFILE'\n# 角度与三角函数\n\n> **用途**：角度和三角函数在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n\n---\n\n## 一、角度基础\n\n### 1.1 角度单位\n\n| 单位 | 说明 | 一圈 |\n|------|------|------|\n| 度\\(degree\\) | 日常使用 | 360° |\n| 弧度\\(radian\\) | 数学/编程 | 2π |\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-3-02 | 冲出包围圈 | 左转、右转指定角度 |\n| CODE1-3-03 | 百变小白 | 造型旋转 |\n| PYAI 1-1-3 | 棱角分明 | 多边形内角计算 |\n| PYAI 2-1-2 | 笔走龙蛇 | 角度转弧度 |\n\n### 1.3 Scratch角度系统\n\n```\n        0°\n        ↑\n   270° ← → 90°\n        ↓\n       180°\n```\n\n**特点**：\n- 0°朝上（与数学不同！）\n- 顺时针为正方向\n- 范围：-180° 到 180°\n\n### 1.4 常用积木\n\n```scratch\n// 旋转\n右转 \\(15\\) 度\n左转 \\(15\\) 度\n\n// 面向方向\n面向 \\(90\\) 方向\n面向 [鼠标指针]\n\n// 获取方向\n\\(方向\\)\n```\n\n### 1.5 教学话术\n\n> \"在Scratch里，角色的方向就像指南针。0度朝上，90度朝右，180度朝下，270度（或-90度）朝左。右转是顺时针，左转是逆时针。\"\n\n---\n\n## 二、多边形与内角\n\n### 2.1 外角公式\n\n```\n正n边形的外角 = 360° / n\n```\n\n| 多边形 | 边数 | 外角 |\n|--------|------|------|\n| 正三角形 | 3 | 120° |\n| 正方形 | 4 | 90° |\n| 正五边形 | 5 | 72° |\n| 正六边形 | 6 | 60° |\n\n### 2.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-3 | 棱角分明 | 绘制正多边形 |\n| PYAI 1-1-4 | 对照实验 | 多参数多边形 |\n\n### 2.3 Python绘制多边形\n\n```python\nimport turtle\n\ndef draw_polygon\\(sides, length\\):\n    \"\"\"绘制正多边形\"\"\"\n    angle = 360 / sides  # 外角\n    for i in range\\(sides\\):\n        turtle.forward\\(length\\)\n        turtle.right\\(angle\\)\n\n# 绘制正六边形\ndraw_polygon\\(6, 50\\)\n```\n\n### 2.4 Scratch绘制多边形\n\n```scratch\n定义 画正多边形 \\(边数\\) \\(边长\\)\n重复 \\(边数\\) 次\n    移动 \\(边长\\) 步\n    右转 \\(\\(360\\) / \\(边数\\)\\) 度\n```\n\n---\n\n## 三、角度与弧度转换\n\n### 3.1 转换公式\n\n```\n弧度 = 角度 × π / 180\n角度 = 弧度 × 180 / π\n```\n\n| 角度 | 弧度 |\n|------|------|\n| 0° | 0 |\n| 30° | π/6 |\n| 45° | π/4 |\n| 60° | π/3 |\n| 90° | π/2 |\n| 180° | π |\n| 360° | 2π |\n\n### 3.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-2 | 笔走龙蛇 | math.radians\\(\\) |\n| CODE3-2-06 | 篮球小子 | 抛物线角度 |\n\n### 3.3 Python转换函数\n\n```python\nimport math\n\n# 角度转弧度\nangle_deg = 90\nangle_rad = math.radians\\(angle_deg\\)  # 1.5707... \\(π/2\\)\n\n# 弧度转角度\nangle_rad = math.pi / 4\nangle_deg = math.degrees\\(angle_rad\\)  # 45.0\n\n# 注意：Python三角函数使用弧度！\nsin_30 = math.sin\\(math.radians\\(30\\)\\)  # 0.5\ncos_60 = math.cos\\(math.radians\\(60\\)\\)  # 0.5\n```\n\n### 3.4 教学话术\n\n> \"Python的三角函数用的是弧度，不是角度。所以我们要先用math.radians\\(\\)把角度转成弧度。记住：180度等于π弧度。\"\n\n---\n\n## 四、三角函数\n\n### 4.1 基本定义\n\n```\n        /|\n       / |\n    斜/  | 对边\n  边/   |\n   /θ   |\n  /_____|\n   邻边\n\nsin\\(θ\\) = 对边 / 斜边\ncos\\(θ\\) = 邻边 / 斜边\ntan\\(θ\\) = 对边 / 邻边\n```\n\n### 4.2 常用值\n\n| 角度 | sin | cos | tan |\n|------|-----|-----|-----|\n| 0° | 0 | 1 | 0 |\n| 30° | 0.5 | 0.866 | 0.577 |\n| 45° | 0.707 | 0.707 | 1 |\n| 60° | 0.866 | 0.5 | 1.732 |\n| 90° | 1 | 0 | ∞ |\n\n### 4.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-2 | 笔走龙蛇 | 绘制正弦曲线 |\n| CODE3-2-06 | 篮球小子 | 抛物线速度分解 |\n| PYAI 2-2-10 | 举重若轻2 | 物理运动模拟 |\n\n### 4.4 绘制正弦曲线\n\n```python\nimport turtle\nimport math\n\nt = turtle.Turtle\\(\\)\nt.speed\\(0\\)\nt.penup\\(\\)\nt.goto\\(-200, 0\\)\nt.pendown\\(\\)\n\n# 绘制正弦曲线\nfor x in range\\(-200, 201\\):\n    rad = math.radians\\(x * 2\\)  # 放大周期\n    y = math.sin\\(rad\\) * 100    # 放大振幅\n    t.goto\\(x, y\\)\n\nturtle.done\\(\\)\n```\n\n### 4.5 速度分解\n\n```python\nimport math\n\n# 已知：速度大小和角度\nspeed = 50\nangle = 45  # 度\n\n# 分解为水平和垂直分量\nvx = speed * math.cos\\(math.radians\\(angle\\)\\)  # 水平速度\nvy = speed * math.sin\\(math.radians\\(angle\\)\\)  # 垂直速度\n\nprint\\(f\"水平速度: {vx:.2f}\"\\)  # 35.36\nprint\\(f\"垂直速度: {vy:.2f}\"\\)  # 35.36\n```\n\n---\n\n## 五、圆周运动\n\n### 5.1 基本公式\n\n```python\n# 圆周运动坐标\nx = center_x + radius * cos\\(angle\\)\ny = center_y + radius * sin\\(angle\\)\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-08 | 万花筒 | 旋转图案 |\n| PYAI 2-2-7 | 积小致巨1 | 粒子圆周运动 |\n\n### 5.3 Python圆周运动\n\n```python\nimport pygame\nimport math\n\npygame.init\\(\\)\nscreen = pygame.display.set_mode\\(\\(400, 400\\)\\)\nclock = pygame.time.Clock\\(\\)\n\ncenter_x, center_y = 200, 200\nradius = 100\nangle = 0\n\nrunning = True\nwhile running:\n    for event in pygame.event.get\\(\\):\n        if event.type == pygame.QUIT:\n            running = False\n\n    screen.fill\\(\\(0, 0, 0\\)\\)\n\n    # 计算圆周上的位置\n    x = center_x + radius * math.cos\\(math.radians\\(angle\\)\\)\n    y = center_y + radius * math.sin\\(math.radians\\(angle\\)\\)\n\n    pygame.draw.circle\\(screen, \\(255, 0, 0\\), \\(int\\(x\\), int\\(y\\)\\), 10\\)\n\n    angle += 2  # 每帧旋转2度\n\n    pygame.display.flip\\(\\)\n    clock.tick\\(60\\)\n\npygame.quit\\(\\)\n```\n\n### 5.4 Scratch圆周运动\n\n```scratch\n当绿旗被点击\n将 [角度] 设为 \\(0\\)\n将 [半径] 设为 \\(100\\)\n重复执行\n    将 x 设为 \\(\\([cos] 的 \\(角度\\)\\) * \\(半径\\)\\)\n    将 y 设为 \\(\\([sin] 的 \\(角度\\)\\) * \\(半径\\)\\)\n    将 [角度] 改变 \\(5\\)\n```\n\n---\n\n## 六、教学建议\n\n### 6.1 认知进阶路线\n\n```\nCODE1-3-02          PYAI 1-1-3          PYAI 2-1-2          CODE3-2-06\n角度旋转     →      多边形内角   →      弧度转换     →      三角函数应用\n   ↓                   ↓                   ↓                   ↓\n 左转右转            外角公式            sin/cos             速度分解\n```\n\n### 6.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| Scratch方向与数学不同 | 强调\"0度朝上\"，用指南针类比 |\n| 弧度概念抽象 | 用\"半圆=π\"作为记忆锚点 |\n| 三角函数理解困难 | 用直角三角形实物演示 |\n| 速度分解 | 用\"斜坡上的小球\"类比 |\n\n### 6.3 禁忌提醒\n\n| 禁忌 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 直接用角度调用sin/cos | 结果错误 | 先用radians\\(\\)转换 |\n| ❌ 混淆Scratch和数学角度 | 方向错误 | 明确说明两种系统的差异 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md]\\(数学概念总表.md\\)、[物理仿真数学.md]\\(物理仿真数学.md\\)\nENDOFFILE)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/02_知识点数据库/AI知识库/计算机视觉.md\" << 'ENDOFFILE'\n# 计算机视觉\n\n> **用途**：OpenCV和图像处理在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/PythonAI/\n\n---\n\n## 一、OpenCV基础\n\n### 1.1 库简介\n\nOpenCV \\(Open Source Computer Vision Library\\) 是最流行的计算机视觉库，支持图像处理、视频分析、物体检测等功能。\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-6 | 智能门禁\\(1\\) | 摄像头采集 |\n| PYAI 2-4-1 | 视频基础 | VideoCapture |\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n\n### 1.3 安装\n\n```bash\npip install opencv-python\n```\n\n### 1.4 基本结构\n\n```python\nimport cv2\nimport numpy as np\n\n# 图像是NumPy数组\n# 形状: \\(高度, 宽度, 通道数\\)\n# 通道顺序: BGR（不是RGB！）\n```\n\n---\n\n## 二、摄像头操作\n\n### 2.1 打开摄像头\n\n```python\nimport cv2\n\n# 打开默认摄像头（索引0）\ncap = cv2.VideoCapture\\(0\\)\n\n# 检查是否成功打开\nif not cap.isOpened\\(\\):\n    print\\(\"无法打开摄像头\"\\)\n    exit\\(\\)\n\nwhile True:\n    # 读取一帧\n    ret, frame = cap.read\\(\\)\n    if not ret:\n        print\\(\"无法读取帧\"\\)\n        break\n\n    # 显示画面\n    cv2.imshow\\('Camera', frame\\)\n\n    # 按q退出\n    if cv2.waitKey\\(1\\) & 0xFF == ord\\('q'\\):\n        break\n\n# 释放资源（重要！）\ncap.release\\(\\)\ncv2.destroyAllWindows\\(\\)\n```\n\n### 2.2 设置摄像头参数\n\n```python\n# 设置分辨率\ncap.set\\(cv2.CAP_PROP_FRAME_WIDTH, 640\\)\ncap.set\\(cv2.CAP_PROP_FRAME_HEIGHT, 480\\)\n\n# 获取帧率\nfps = cap.get\\(cv2.CAP_PROP_FPS\\)\n```\n\n### 2.3 禁忌提醒\n\n| 禁忌 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 忘记释放摄像头 | 下次无法使用 | 程序结束前调用`cap.release\\(\\)` |\n| ❌ 不检查ret返回值 | 程序崩溃 | 始终检查`if not ret: break` |\n\n---\n\n## 三、图像读写\n\n### 3.1 读取图像\n\n```python\nimport cv2\n\n# 读取彩色图像\nimg = cv2.imread\\('image.jpg'\\)\n\n# 读取灰度图像\ngray = cv2.imread\\('image.jpg', cv2.IMREAD_GRAYSCALE\\)\n\n# 检查是否成功读取\nif img is None:\n    print\\(\"无法读取图像\"\\)\n```\n\n### 3.2 保存图像\n\n```python\n# 保存图像\ncv2.imwrite\\('output.jpg', img\\)\n\n# 指定质量（JPEG）\ncv2.imwrite\\('output.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 90]\\)\n```\n\n### 3.3 显示图像\n\n```python\n# 显示图像\ncv2.imshow\\('Window Name', img\\)\ncv2.waitKey\\(0\\)  # 等待按键\ncv2.destroyAllWindows\\(\\)\n```\n\n---\n\n## 四、颜色空间转换\n\n### 4.1 BGR与RGB\n\n```python\n# OpenCV使用BGR，其他库（如matplotlib）使用RGB\n# BGR → RGB\nrgb_img = cv2.cvtColor\\(img, cv2.COLOR_BGR2RGB\\)\n\n# RGB → BGR\nbgr_img = cv2.cvtColor\\(rgb_img, cv2.COLOR_RGB2BGR\\)\n```\n\n### 4.2 灰度转换\n\n```python\n# 彩色 → 灰度\ngray = cv2.cvtColor\\(img, cv2.COLOR_BGR2GRAY\\)\n```\n\n### 4.3 HSV颜色空间\n\n```python\n# BGR → HSV（用于颜色检测）\nhsv = cv2.cvtColor\\(img, cv2.COLOR_BGR2HSV\\)\n\n# HSV范围\n# H: 0-179（色调）\n# S: 0-255（饱和度）\n# V: 0-255（明度）\n```\n\n### 4.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-1 | 眼控开关 | BGR→RGB转换 |\n| PYAI 2-4-3 | 图像编辑1 | 灰度转换 |\n\n---\n\n## 五、图像绘制\n\n### 5.1 基本绘制函数\n\n```python\nimport cv2\nimport numpy as np\n\n# 创建空白图像\nimg = np.zeros\\(\\(400, 600, 3\\), dtype=np.uint8\\)\n\n# 画线\ncv2.line\\(img, \\(0, 0\\), \\(300, 200\\), \\(255, 0, 0\\), 2\\)\n# 参数: 图像, 起点, 终点, 颜色\\(BGR\\), 线宽\n\n# 画矩形\ncv2.rectangle\\(img, \\(50, 50\\), \\(200, 150\\), \\(0, 255, 0\\), 2\\)\n# 参数: 图像, 左上角, 右下角, 颜色, 线宽（-1为填充）\n\n# 画圆\ncv2.circle\\(img, \\(300, 200\\), 50, \\(0, 0, 255\\), -1\\)\n# 参数: 图像, 圆心, 半径, 颜色, 线宽（-1为填充）\n\n# 写文字\ncv2.putText\\(img, 'Hello OpenCV', \\(50, 300\\),\n            cv2.FONT_HERSHEY_SIMPLEX, 1, \\(255, 255, 255\\), 2\\)\n# 参数: 图像, 文字, 位置, 字体, 大小, 颜色, 线宽\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-9 | 手势绘画板 | 绘制轨迹 |\n| PYAI 2-4-10 | 虚拟墨镜 | 绘制装饰 |\n\n---\n\n## 六、像素操作\n\n### 6.1 访问像素\n\n```python\n# 获取像素值（BGR）\npixel = img[100, 200]  # [B, G, R]\nb, g, r = img[100, 200]\n\n# 设置像素值\nimg[100, 200] = [255, 255, 255]  # 白色\n```\n\n### 6.2 ROI（感兴趣区域）\n\n```python\n# 提取ROI\nroi = img[50:150, 100:200]  # [y1:y2, x1:x2]\n\n# 替换ROI\nimg[50:150, 100:200] = another_img\n```\n\n### 6.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n| PYAI 2-4-4 | 图像编辑2 | ROI替换 |\n\n---\n\n## 七、图像处理\n\n### 7.1 调整大小\n\n```python\n# 调整大小\nresized = cv2.resize\\(img, \\(300, 200\\)\\)  # \\(宽, 高\\)\n\n# 按比例缩放\nresized = cv2.resize\\(img, None, fx=0.5, fy=0.5\\)\n```\n\n### 7.2 亮度调整\n\n```python\n# 增加亮度\nbright = cv2.add\\(img, np.array\\([50, 50, 50]\\)\\)\n\n# 使用NumPy（注意溢出）\nbright = np.clip\\(img.astype\\(np.int16\\) + 50, 0, 255\\).astype\\(np.uint8\\)\n```\n\n### 7.3 滤波降噪\n\n```python\n# 均值滤波\nblur = cv2.blur\\(img, \\(5, 5\\)\\)\n\n# 高斯滤波（推荐）\nblur = cv2.GaussianBlur\\(img, \\(5, 5\\), 0\\)\n\n# 中值滤波（去除椒盐噪声）\nblur = cv2.medianBlur\\(img, 5\\)\n```\n\n### 7.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-4 | 图像编辑2 | resize |\n| PYAI 2-4-5 | 滤波降噪 | 三种滤波 |\n\n---\n\n## 八、二值化与阈值\n\n### 8.1 简单阈值\n\n```python\n# 简单阈值\nret, binary = cv2.threshold\\(gray, 127, 255, cv2.THRESH_BINARY\\)\n# 参数: 灰度图, 阈值, 最大值, 类型\n```\n\n### 8.2 自适应阈值\n\n```python\n# 自适应阈值（处理光照不均）\nbinary = cv2.adaptiveThreshold\\(gray, 255,\n    cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\n    cv2.THRESH_BINARY, 11, 2\\)\n```\n\n### 8.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-6 | 文件扫描 | 二值化处理 |\n\n---\n\n## 九、人像分割\n\n### 9.1 MediaPipe Selfie Segmentation\n\n```python\nimport cv2\nimport mediapipe as mp\n\nmp_selfie = mp.solutions.selfie_segmentation\nselfie_seg = mp_selfie.SelfieSegmentation\\(model_selection=1\\)\n\ncap = cv2.VideoCapture\\(0\\)\n\nwhile True:\n    ret, frame = cap.read\\(\\)\n    if not ret:\n        break\n\n    # 转换颜色空间\n    rgb = cv2.cvtColor\\(frame, cv2.COLOR_BGR2RGB\\)\n\n    # 分割\n    results = selfie_seg.process\\(rgb\\)\n\n    # 获取掩膜\n    mask = results.segmentation_mask\n    mask = \\(mask > 0.5\\).astype\\(np.uint8\\) * 255\n\n    # 应用掩膜\n    fg = cv2.bitwise_and\\(frame, frame, mask=mask\\)\n\n    cv2.imshow\\('Segmentation', fg\\)\n    if cv2.waitKey\\(1\\) & 0xFF == ord\\('q'\\):\n        break\n\ncap.release\\(\\)\ncv2.destroyAllWindows\\(\\)\n```\n\n### 9.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-8 | 人像分割 | 背景替换 |\n\n---\n\n## 十、常见错误与禁忌\n\n| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ BGR/RGB混淆 | 颜色显示错误 | OpenCV用BGR，MediaPipe用RGB |\n| ❌ 忘记释放资源 | 摄像头被占用 | 始终调用`cap.release\\(\\)` |\n| ❌ 不检查None | 程序崩溃 | 检查`img is None`和`ret` |\n| ❌ 像素值溢出 | 颜色异常 | 使用`np.clip\\(\\)`或`cv2.add\\(\\)` |\n\n---\n\n## 十一、教学建议\n\n### 11.1 认知进阶路线\n\n```\nPYAI 2-4-1          PYAI 2-4-3          PYAI 2-4-5          PYAI 2-4-8\n摄像头基础   →      像素操作     →      滤波处理     →      人像分割\n   ↓                   ↓                   ↓                   ↓\n VideoCapture        NumPy数组           卷积核              掩膜应用\n```\n\n### 11.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| BGR顺序 | 用\"蓝绿红\"口诀记忆 |\n| 坐标顺序 | 强调`img[y, x]`，先行后列 |\n| 滤波原理 | 用\"取平均\"类比解释卷积 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[AI知识总表.md]\\(AI知识总表.md\\)、[人脸识别.md]\\(人脸识别.md\\)\nENDOFFILE)",
      "Bash(\"C:/Users/Frank.J/starplanet_ai_academy/知识库/02_知识点数据库/AI知识库/人脸识别.md\" << 'ENDOFFILE'\n# 人脸识别\n\n> **用途**：人脸检测与识别技术在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/PythonAI/\n\n---\n\n## 一、技术概述\n\n### 1.1 人脸识别流程\n\n```\n图像采集 → 人脸检测 → 特征提取 → 特征匹配 → 身份确认\n```\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-6 | 智能门禁\\(1\\) | 人脸捕捉 |\n| PYAI 1-4-7 | 智能门禁\\(2\\) | 人脸比对 |\n| PYAI 1-4-8 | 智能门禁\\(3\\) | 刷脸开门 |\n| PYAI 2-3-1 | 眼控开关 | FaceMesh |\n\n---\n\n## 二、MediaPipe FaceMesh\n\n### 2.1 简介\n\nMediaPipe FaceMesh 可以检测468个面部关键点，用于表情识别、眨眼检测等。\n\n### 2.2 安装\n\n```bash\npip install mediapipe\n```\n\n### 2.3 基本使用\n\n```python\nimport cv2\nimport mediapipe as mp\n\n# 初始化\nmp_face_mesh = mp.solutions.face_mesh\nface_mesh = mp_face_mesh.FaceMesh\\(\n    max_num_faces=1,\n    refine_landmarks=True,\n    min_detection_confidence=0.5,\n    min_tracking_confidence=0.5\n\\)\n\n# 绘制工具\nmp_drawing = mp.solutions.drawing_utils\nmp_drawing_styles = mp.solutions.drawing_styles\n\ncap = cv2.VideoCapture\\(0\\)\n\nwhile True:\n    ret, frame = cap.read\\(\\)\n    if not ret:\n        break\n\n    # 转换颜色空间（重要！）\n    rgb_frame = cv2.cvtColor\\(frame, cv2.COLOR_BGR2RGB\\)\n\n    # 检测人脸\n    results = face_mesh.process\\(rgb_frame\\)\n\n    if results.multi_face_landmarks:\n        for face_landmarks in results.multi_face_landmarks:\n            # 绘制关键点\n            mp_drawing.draw_landmarks\\(\n                frame,\n                face_landmarks,\n                mp_face_mesh.FACEMESH_TESSELATION,\n                landmark_drawing_spec=None,\n                connection_drawing_spec=mp_drawing_styles.get_default_face_mesh_tesselation_style\\(\\)\n            \\)\n\n    cv2.imshow\\('FaceMesh', frame\\)\n    if cv2.waitKey\\(1\\) & 0xFF == ord\\('q'\\):\n        break\n\ncap.release\\(\\)\ncv2.destroyAllWindows\\(\\)\n```\n\n### 2.4 获取关键点坐标\n\n```python\nif results.multi_face_landmarks:\n    landmarks = results.multi_face_landmarks[0].landmark\n\n    # 获取特定关键点\n    h, w, c = frame.shape\n    point = landmarks[0]  # 第0个关键点\n    x = int\\(point.x * w\\)\n    y = int\\(point.y * h\\)\n    z = point.z  # 深度（相对值）\n```\n\n---\n\n## 三、关键点索引\n\n### 3.1 眼睛关键点\n\n```\n左眼：\n  - 上眼皮: 159\n  - 下眼皮: 145\n  - 左眼角: 33\n  - 右眼角: 133\n\n右眼：\n  - 上眼皮: 386\n  - 下眼皮: 374\n  - 左眼角: 362\n  - 右眼角: 263\n```\n\n### 3.2 嘴巴关键点\n\n```\n嘴巴：\n  - 上嘴唇中心: 13\n  - 下嘴唇中心: 14\n  - 左嘴角: 61\n  - 右嘴角: 291\n```\n\n### 3.3 其他关键点\n\n```\n鼻尖: 1\n下巴: 152\n左眉: 70\n右眉: 300\n```\n\n---\n\n## 四、眨眼检测\n\n### 4.1 原理\n\n通过计算上下眼皮的距离判断眼睛开合状态。\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-1 | 眼控开关 | 眨眼检测基础 |\n| PYAI 2-3-2 | 眼控开关 | 状态机设计 |\n\n### 4.3 实现代码\n\n```python\ndef get_eye_aspect_ratio\\(landmarks, eye_indices\\):\n    \"\"\"计算眼睛纵横比（EAR）\"\"\"\n    # 垂直距离\n    v1 = abs\\(landmarks[eye_indices[1]].y - landmarks[eye_indices[5]].y\\)\n    v2 = abs\\(landmarks[eye_indices[2]].y - landmarks[eye_indices[4]].y\\)\n    # 水平距离\n    h = abs\\(landmarks[eye_indices[0]].x - landmarks[eye_indices[3]].x\\)\n    # EAR\n    ear = \\(v1 + v2\\) / \\(2.0 * h\\)\n    return ear\n\n# 左眼关键点索引\nLEFT_EYE = [33, 160, 158, 133, 153, 144]\n# 右眼关键点索引\nRIGHT_EYE = [362, 385, 387, 263, 373, 380]\n\n# 简化版：只用上下眼皮\ndef is_eye_closed\\(landmarks, threshold=0.02\\):\n    \"\"\"检测眼睛是否闭合\"\"\"\n    # 左眼\n    left_dist = abs\\(landmarks[159].y - landmarks[145].y\\)\n    # 右眼\n    right_dist = abs\\(landmarks[386].y - landmarks[374].y\\)\n    # 平均\n    avg_dist = \\(left_dist + right_dist\\) / 2\n    return avg_dist < threshold\n```\n\n### 4.4 眨眼计数\n\n```python\nclass BlinkCounter:\n    def __init__\\(self, threshold=0.02\\):\n        self.threshold = threshold\n        self.blink_count = 0\n        self.eye_closed = False\n\n    def update\\(self, landmarks\\):\n        \"\"\"更新眨眼状态\"\"\"\n        closed = is_eye_closed\\(landmarks, self.threshold\\)\n\n        if closed and not self.eye_closed:\n            # 眼睛刚闭上\n            self.eye_closed = True\n        elif not closed and self.eye_closed:\n            # 眼睛刚睁开 = 完成一次眨眼\n            self.eye_closed = False\n            self.blink_count += 1\n\n        return self.blink_count\n```\n\n---\n\n## 五、表情识别\n\n### 5.1 微笑检测\n\n```python\ndef detect_smile\\(landmarks, threshold=0.01\\):\n    \"\"\"检测微笑\"\"\"\n    # 嘴角位置\n    left_corner = landmarks[61]\n    right_corner = landmarks[291]\n    mouth_center = landmarks[13]\n\n    # 嘴角上扬程度\n    left_lift = mouth_center.y - left_corner.y\n    right_lift = mouth_center.y - right_corner.y\n\n    # 判断是否微笑\n    if left_lift > threshold and right_lift > threshold:\n        intensity = \\(left_lift + right_lift\\) / 2\n        return True, intensity\n    return False, 0\n```\n\n### 5.2 张嘴检测\n\n```python\ndef detect_mouth_open\\(landmarks, threshold=0.05\\):\n    \"\"\"检测张嘴\"\"\"\n    upper_lip = landmarks[13]\n    lower_lip = landmarks[14]\n\n    mouth_open = abs\\(upper_lip.y - lower_lip.y\\)\n    return mouth_open > threshold, mouth_open\n```\n\n### 5.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-5 | 表情音乐播放器 | 微笑/张嘴检测 |\n| PYAI 2-3-6 | 表情仪表盘 | 表情强度计算 |\n\n---\n\n## 六、人脸比对\n\n### 6.1 模板匹配方法\n\n```python\nimport cv2\n\ndef compare_faces\\(template_path, current_frame\\):\n    \"\"\"简单的人脸比对（模板匹配）\"\"\"\n    # 读取模板\n    template = cv2.imread\\(template_path, cv2.IMREAD_GRAYSCALE\\)\n    if template is None:\n        return False, 0\n\n    # 当前帧转灰度\n    gray = cv2.cvtColor\\(current_frame, cv2.COLOR_BGR2GRAY\\)\n\n    # 模板匹配\n    result = cv2.matchTemplate\\(gray, template, cv2.TM_CCOEFF_NORMED\\)\n\n    # 获取最大匹配值\n    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc\\(result\\)\n\n    # 判断是否匹配\n    threshold = 0.7\n    return max_val > threshold, max_val\n```\n\n### 6.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-7 | 智能门禁\\(2\\) | 人脸比对算法 |\n\n---\n\n## 七、完整项目：刷脸开门\n\n### 7.1 系统架构\n\n```\n摄像头 → 人脸检测 → 人脸比对 → 舵机控制\n                              ↓\n                         开门/拒绝\n```\n\n### 7.2 核心代码\n\n```python\nimport cv2\nimport mediapipe as mp\n# from servo import Servo  # 假设有舵机控制模块\n\nclass FaceDoorSystem:\n    def __init__\\(self, registered_face_path\\):\n        self.template = cv2.imread\\(registered_face_path, cv2.IMREAD_GRAYSCALE\\)\n        self.mp_face = mp.solutions.face_detection\n        self.face_detection = self.mp_face.FaceDetection\\(min_detection_confidence=0.5\\)\n        # self.servo = Servo\\(pin=9\\)\n\n    def detect_and_verify\\(self, frame\\):\n        \"\"\"检测并验证人脸\"\"\"\n        # 检测人脸\n        rgb = cv2.cvtColor\\(frame, cv2.COLOR_BGR2RGB\\)\n        results = self.face_detection.process\\(rgb\\)\n\n        if not results.detections:\n            return False, \"未检测到人脸\"\n\n        # 提取人脸区域\n        detection = results.detections[0]\n        bbox = detection.location_data.relative_bounding_box\n        h, w, _ = frame.shape\n        x = int\\(bbox.xmin * w\\)\n        y = int\\(bbox.ymin * h\\)\n        face_w = int\\(bbox.width * w\\)\n        face_h = int\\(bbox.height * h\\)\n\n        face_roi = frame[y:y+face_h, x:x+face_w]\n        if face_roi.size == 0:\n            return False, \"人脸区域无效\"\n\n        # 比对\n        gray_face = cv2.cvtColor\\(face_roi, cv2.COLOR_BGR2GRAY\\)\n        gray_face = cv2.resize\\(gray_face, self.template.shape[::-1]\\)\n\n        result = cv2.matchTemplate\\(gray_face, self.template, cv2.TM_CCOEFF_NORMED\\)\n        _, max_val, _, _ = cv2.minMaxLoc\\(result\\)\n\n        if max_val > 0.6:\n            # self.servo.write_angle\\(90\\)  # 开门\n            return True, f\"验证通过 \\({max_val:.2f}\\)\"\n        else:\n            return False, f\"验证失败 \\({max_val:.2f}\\)\"\n```\n\n### 7.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-8 | 智能门禁\\(3\\) | 完整系统集成 |\n\n---\n\n## 八、常见错误与禁忌\n\n| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ BGR直接传给MediaPipe | 检测失败 | 先转换为RGB |\n| ❌ 不检查检测结果 | 程序崩溃 | 检查`results.multi_face_landmarks` |\n| ❌ 阈值设置不当 | 误判 | 根据实际环境调整 |\n| ❌ 光照条件差 | 检测不稳定 | 确保充足均匀的光照 |\n\n---\n\n## 九、教学建议\n\n### 9.1 认知进阶路线\n\n```\nPYAI 1-4-6          PYAI 2-3-1          PYAI 2-3-5          PYAI 1-4-8\n人脸捕捉     →      关键点检测   →      表情识别     →      系统集成\n   ↓                   ↓                   ↓                   ↓\n 摄像头基础          FaceMesh            特征计算            AI+硬件\n```\n\n### 9.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| 关键点索引记忆 | 提供关键点图示，只记常用的 |\n| 阈值调整 | 让学生实验不同阈值，理解影响 |\n| 状态机设计 | 用流程图可视化状态转换 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[AI知识总表.md]\\(AI知识总表.md\\)、[手势识别.md]\\(手势识别.md\\)\nENDOFFILE)",
      "Bash(python convert_kb.py:*)",
      "Bash(git add:*)"
    ]
  }
}
