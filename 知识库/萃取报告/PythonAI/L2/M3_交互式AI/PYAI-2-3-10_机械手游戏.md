# [PYAI-2-3-10] 机械手游戏

> **模块**：L2-M3 交互式AI
> **认知负荷**：中-高/高
> **核心技能**：random库、概率算法
> **UID**：PYAI-23-10-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI 2-3-10/11 |
| **课程名称** | 机械手游戏（猜拳） |
| **认知负荷** | 中-高（第10课）/ 高（第11课） |
| **核心技能** | random库、石头剪刀布判定、random.choices()权重随机、概率算法 |
| **项目内容** | 猜拳机器人、无敌猜拳王 |

---

## 详细教学流程

### 步骤1：知识讲解（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天做一个猜拳机器人！先学习基础版：
>
> **识别玩家手势**：
> - 石头：所有手指弯曲
> - 剪刀：食指+中指伸直
> - 布：所有手指伸直
>
> **电脑出拳**：
> ```python
> import random
> computer = random.choice(['rock', 'scissors', 'paper'])
> ```
>
> **进阶版：无敌猜拳王**
> 记录玩家出拳习惯，用权重随机针对性出拳：
> ```python
> # 如果玩家喜欢出石头，电脑就多出布
> weights = [0.2, 0.3, 0.5]  # 石头、剪刀、布的权重
> computer = random.choices(['rock', 'scissors', 'paper'], weights)[0]
> ```"

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 不理解权重 | 用概率类比 | "就像抽奖，奖品越多越容易抽到" |
| 想让AI更强 | 增加策略 | 记录最近3次出拳，预测下一次 |
| 想做GUI | 加入pygame | 用pygame做游戏界面 |

---

## 核心代码模式

```python
# 猜拳机器人完整框架
import random
import mediapipe as mp

class RockPaperScissors:
    def __init__(self):
        self.hands = mp.solutions.hands.Hands()
        self.player_history = {'rock': 0, 'scissors': 0, 'paper': 0}
        self.wins = {'rock': 'scissors', 'scissors': 'paper', 'paper': 'rock'}

    def detect_gesture(self, fingers_up):
        """识别玩家手势"""
        if fingers_up == [0, 0, 0, 0, 0]:
            return 'rock'
        elif fingers_up == [0, 1, 1, 0, 0]:
            return 'scissors'
        elif fingers_up == [1, 1, 1, 1, 1]:
            return 'paper'
        return None

    def computer_choice_basic(self):
        """基础版：随机出拳"""
        return random.choice(['rock', 'scissors', 'paper'])

    def computer_choice_smart(self):
        """进阶版：根据玩家习惯出拳"""
        total = sum(self.player_history.values())
        if total == 0:
            return self.computer_choice_basic()

        # 计算玩家最常出的手势
        most_common = max(self.player_history, key=self.player_history.get)
        # 出能赢它的手势
        counter = {'rock': 'paper', 'scissors': 'rock', 'paper': 'scissors'}
        return counter[most_common]

    def judge(self, player, computer):
        """判定胜负"""
        if player == computer:
            return 'draw'
        elif self.wins[player] == computer:
            return 'player'
        else:
            return 'computer'

    def update_history(self, player_gesture):
        """更新玩家出拳历史"""
        if player_gesture:
            self.player_history[player_gesture] += 1
```

---

## 核心知识点

- **random.choice()**：随机选择
- **random.choices()**：权重随机
- **概率算法**：记录玩家出拳习惯，针对性出拳

---

## 导航

| 上一课 | 返回模块 | 下一课 |
|--------|----------|--------|
| [PYAI-2-3-09 手势绘画板](PYAI-2-3-09_手势绘画板.md) | [M3 交互式AI](_模块概览.md) | - |
