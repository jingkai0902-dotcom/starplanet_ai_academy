# [PYAI-2-3-08] 手势控制应用

> **模块**：L2-M3 交互式AI
> **认知负荷**：高
> **核心技能**：手势映射、pygame交互控制
> **UID**：PYAI-23-08-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI 2-3-8 |
| **课程名称** | 手势控制应用 |
| **认知负荷** | 高 |
| **核心技能** | 手势映射、pygame交互控制 |
| **项目内容** | 手势控制游戏 |

---

## 详细教学流程

### 步骤1：知识讲解（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "上节课我们学会了识别手势，今天把手势变成**控制指令**！"
>
> "**手势映射设计**：
> ```python
> def gesture_to_command(fingers_up):
>     '''
>     fingers_up: [拇指, 食指, 中指, 无名指, 小指]
>     返回: 控制指令
>     '''
>     if fingers_up == [0, 1, 0, 0, 0]:  # 只有食指
>         return 'UP'
>     elif fingers_up == [0, 1, 1, 0, 0]:  # 食指+中指
>         return 'DOWN'
>     elif fingers_up == [1, 1, 1, 1, 1]:  # 全部张开
>         return 'STOP'
>     elif fingers_up == [0, 0, 0, 0, 0]:  # 握拳
>         return 'GO'
>     return None
> ```
>
> **pygame控制小球**：
> ```python
> import pygame
>
> ball_x, ball_y = 400, 300
> speed = 5
>
> def move_ball(command):
>     global ball_x, ball_y
>     if command == 'UP':
>         ball_y -= speed
>     elif command == 'DOWN':
>         ball_y += speed
>     elif command == 'LEFT':
>         ball_x -= speed
>     elif command == 'RIGHT':
>         ball_x += speed
> ```"

### 步骤2：代码实践（35分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "创建一个手势控制游戏：
> - 用手势控制小球移动
> - 收集屏幕上的金币
> - 避开障碍物"

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 手势识别不稳定 | 添加确认机制 | 连续3帧相同手势才执行 |
| 想用左右手 | 区分左右 | 检测handedness属性 |
| 控制太灵敏 | 添加冷却时间 | 每个指令间隔0.5秒 |

---

## 核心代码模式

```python
# 手势控制游戏框架
import cv2
import mediapipe as mp
import pygame

class GestureController:
    def __init__(self):
        self.hands = mp.solutions.hands.Hands()
        self.finger_tips = [4, 8, 12, 16, 20]  # 指尖索引
        self.finger_pips = [3, 6, 10, 14, 18]  # 指根索引

    def get_fingers_up(self, landmarks):
        fingers = []
        # 拇指特殊处理（比较x坐标）
        if landmarks[4].x < landmarks[3].x:
            fingers.append(1)
        else:
            fingers.append(0)
        # 其他四指（比较y坐标）
        for tip, pip in zip(self.finger_tips[1:], self.finger_pips[1:]):
            if landmarks[tip].y < landmarks[pip].y:
                fingers.append(1)
            else:
                fingers.append(0)
        return fingers
```

---

## 核心知识点

- **手势映射**：将手指状态组合映射为控制指令
- **指尖检测**：比较指尖和指根的y坐标判断伸直
- **pygame交互**：实时响应手势控制游戏元素

---

## 导航

| 上一课 | 返回模块 | 下一课 |
|--------|----------|--------|
| [PYAI-2-3-07 手势识别](PYAI-2-3-07_手势识别.md) | [M3 交互式AI](_模块概览.md) | [PYAI-2-3-09 手势绘画板](PYAI-2-3-09_手势绘画板.md) |
