# [PYAI-2-3-09] 手势绘画板

> **模块**：L2-M3 交互式AI
> **认知负荷**：高
> **核心技能**：指尖追踪、轨迹绘制、颜色切换
> **UID**：PYAI-23-09-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI 2-3-9 |
| **课程名称** | 手势绘画板 |
| **认知负荷** | 高 |
| **核心技能** | 指尖追踪、轨迹绘制、颜色切换 |
| **项目内容** | 空中绘画 |

---

## 详细教学流程

### 步骤1：知识讲解（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天我们做一个**空中绘画板**！用食指在空中画画，电脑会记录轨迹。"
>
> "**指尖追踪**：
> ```python
> # 获取食指指尖坐标
> index_tip = landmarks[8]
>
> # 转换为像素坐标
> h, w = frame.shape[:2]
> x = int(index_tip.x * w)
> y = int(index_tip.y * h)
> ```
>
> **轨迹绘制**：
> ```python
> # 用列表存储轨迹点
> draw_points = []
>
> # 只有食指伸出时才绘制
> if fingers_up == [0, 1, 0, 0, 0]:
>     draw_points.append((x, y))
>
> # 绘制轨迹
> for i in range(1, len(draw_points)):
>     cv2.line(canvas, draw_points[i-1], draw_points[i], color, 5)
> ```
>
> **手势切换颜色**：
> ```python
> colors = [(255, 0, 0), (0, 255, 0), (0, 0, 255), (255, 255, 0)]
> color_index = 0
>
> # 竖起两根手指切换颜色
> if fingers_up == [0, 1, 1, 0, 0]:
>     color_index = (color_index + 1) % len(colors)
> ```"

### 步骤2：代码实践（35分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "创建你的手势绘画板：
> - 食指绘画
> - 两指切换颜色
> - 握拳清除画布
> - 五指张开保存图片"

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 线条断断续续 | 降低检测阈值 | 或增加点之间的连线距离阈值 |
| 想画不同粗细 | 添加手势 | 用手指数量控制线条粗细 |
| 想加橡皮擦 | 特殊手势 | 用拇指+小指表示橡皮擦模式 |

---

## 核心代码模式

```python
# 手势绘画板完整框架
import cv2
import numpy as np
import mediapipe as mp

class GestureDrawingBoard:
    def __init__(self, width=1280, height=720):
        self.canvas = np.zeros((height, width, 3), dtype=np.uint8)
        self.colors = [(255, 0, 0), (0, 255, 0), (0, 0, 255)]
        self.color_index = 0
        self.prev_point = None
        self.drawing = False

    def process(self, frame, landmarks, fingers_up):
        h, w = frame.shape[:2]
        x = int(landmarks[8].x * w)
        y = int(landmarks[8].y * h)

        # 食指绘画
        if fingers_up == [0, 1, 0, 0, 0]:
            if self.prev_point:
                cv2.line(self.canvas, self.prev_point, (x, y),
                        self.colors[self.color_index], 5)
            self.prev_point = (x, y)
        else:
            self.prev_point = None

        # 两指切换颜色
        if fingers_up == [0, 1, 1, 0, 0]:
            self.color_index = (self.color_index + 1) % len(self.colors)

        # 握拳清除
        if fingers_up == [0, 0, 0, 0, 0]:
            self.canvas = np.zeros_like(self.canvas)

        return self.canvas
```

---

## 核心知识点

- **指尖追踪**：获取landmark[8]的坐标并转换为像素
- **轨迹绘制**：存储点序列，用cv2.line连接相邻点
- **画布叠加**：用numpy创建透明画布，与视频帧叠加

---

## 导航

| 上一课 | 返回模块 | 下一课 |
|--------|----------|--------|
| [PYAI-2-3-08 手势控制应用](PYAI-2-3-08_手势控制应用.md) | [M3 交互式AI](_模块概览.md) | [PYAI-2-3-10 机械手游戏](PYAI-2-3-10_机械手游戏.md) |
