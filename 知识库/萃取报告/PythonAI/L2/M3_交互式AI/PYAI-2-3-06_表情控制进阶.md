# [PYAI-2-3-06] 表情控制进阶

> **模块**：L2-M3 交互式AI
> **认知负荷**：高
> **核心技能**：多表情识别、表情强度计算、pygame界面
> **UID**：PYAI-23-06-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI 2-3-6 |
| **课程名称** | 表情控制进阶 |
| **认知负荷** | 高 |
| **核心技能** | 多表情识别、表情强度计算、pygame界面 |
| **项目内容** | 表情仪表盘 |

---

## 详细教学流程

### 步骤1：知识讲解（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天我们升级表情识别系统，不仅识别表情类型，还要计算**表情强度**！"
>
> "**表情强度计算**：
> ```python
> # 微笑强度 = 嘴角上扬程度
> def smile_intensity(landmarks):
>     left_corner = landmarks[61]
>     right_corner = landmarks[291]
>     mouth_center = landmarks[13]
>
>     # 计算嘴角相对于嘴唇中点的上扬距离
>     left_lift = mouth_center.y - left_corner.y
>     right_lift = mouth_center.y - right_corner.y
>
>     # 取平均值，归一化到0-100
>     intensity = (left_lift + right_lift) / 2 * 1000
>     return max(0, min(100, intensity))
> ```
>
> **眉毛检测**（皱眉/惊讶）：
> ```python
> # 眉毛关键点
> left_eyebrow = landmarks[70]   # 左眉中点
> right_eyebrow = landmarks[300] # 右眉中点
> left_eye = landmarks[159]      # 左眼上方
>
> # 眉毛距离眼睛越近 = 皱眉
> eyebrow_distance = left_eyebrow.y - left_eye.y
> if eyebrow_distance < 0.02:
>     print('皱眉')
> elif eyebrow_distance > 0.05:
>     print('惊讶（眉毛上扬）')
> ```"

### 步骤2：pygame界面设计（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "用pygame创建一个表情仪表盘：
> ```python
> import pygame
>
> def draw_emotion_meter(screen, emotion, intensity):
>     # 绘制表情图标
>     emoji_map = {'smile': ':)', 'sad': ':(', 'surprise': ':O'}
>     font = pygame.font.Font(None, 72)
>     text = font.render(emoji_map.get(emotion, ':|'), True, (255, 255, 255))
>     screen.blit(text, (100, 100))
>
>     # 绘制强度条
>     pygame.draw.rect(screen, (100, 100, 100), (50, 200, 200, 30))
>     pygame.draw.rect(screen, (0, 255, 0), (50, 200, intensity * 2, 30))
> ```"

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 强度计算不准 | 校准系数 | 根据实际测试调整归一化系数 |
| 想加更多表情 | 组合特征 | 眉毛+嘴巴+眼睛组合判断 |
| pygame窗口卡顿 | 降低帧率 | 设置pygame.time.Clock().tick(30) |

---

## 核心知识点

- **表情强度**：量化表情程度，不只是有/无
- **眉毛检测**：眉毛位置判断皱眉/惊讶
- **pygame界面**：创建实时反馈的可视化界面

---

## 导航

| 上一课 | 返回模块 | 下一课 |
|--------|----------|--------|
| [PYAI-2-3-05 表情控制](PYAI-2-3-05_表情控制.md) | [M3 交互式AI](_模块概览.md) | [PYAI-2-3-07 手势识别](PYAI-2-3-07_手势识别.md) |
