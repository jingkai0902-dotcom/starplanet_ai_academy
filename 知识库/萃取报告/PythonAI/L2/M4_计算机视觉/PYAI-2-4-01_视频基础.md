# [PYAI-2-4-01] 视频基础

> **模块**：L2-M4 计算机视觉
> **认知负荷**：中
> **核心技能**：cv2.VideoCapture、帧率控制、循环播放
> **UID**：PYAI-24-01-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI-2-4-01 |
| **课程名称** | 视频基础 - 视频播放器 |
| **认知负荷** | 中 |
| **核心技能** | cv2.VideoCapture、帧率控制、循环播放 |
| **项目内容** | 视频播放器 |

---

## 详细教学流程

### 步骤1：知识讲解（20分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天我们来揭开视频的秘密！大家知道视频是什么吗？其实视频就是**很多张图片快速播放**！
>
> 就像翻书动画一样，每秒播放24张以上的图片，人眼就会觉得是连续的动作。这个'每秒多少张'就叫做**帧率(FPS)**。
>
> ```python
> import cv2
>
> # 打开视频文件
> cap = cv2.VideoCapture('video.mp4')
>
> # 获取视频信息
> fps = cap.get(cv2.CAP_PROP_FPS)  # 帧率
> width = cap.get(cv2.CAP_PROP_FRAME_WIDTH)  # 宽度
> height = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)  # 高度
> print(f'帧率: {fps}, 尺寸: {width}x{height}')
> ```"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 不理解帧率 | 用翻书动画演示 | 准备一本翻页动画书 |
| 想用摄像头 | 改用设备编号 | `cv2.VideoCapture(0)` 打开默认摄像头 |
| 视频打不开 | 检查路径 | 确认文件路径正确，使用绝对路径 |

---

### 步骤2：代码实��（35分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "现在我们来写一个视频播放器！关键是用**while循环**不断读取每一帧：
>
> ```python
> while True:
>     ret, frame = cap.read()  # 读取一帧
>
>     if not ret:  # 视频结束
>         cap.set(cv2.CAP_PROP_POS_FRAMES, 0)  # 回到开头，循环播放
>         continue
>
>     cv2.imshow('Video Player', frame)
>
>     # 按Q键退出
>     if cv2.waitKey(30) & 0xFF == ord('q'):
>         break
>
> cap.release()  # 释放资源
> cv2.destroyAllWindows()
> ```
>
> **重点**：`cv2.waitKey(30)` 控制播放速度，30毫秒约等于33帧/秒。"

---

## 核心代码模式

```python
# 视频播放标准模板
cap = cv2.VideoCapture('video.mp4')
while True:
    ret, frame = cap.read()
    if not ret:
        break  # 或循环播放
    cv2.imshow('Window', frame)
    if cv2.waitKey(30) & 0xFF == ord('q'):
        break
cap.release()
cv2.destroyAllWindows()
```

---

## 禁忌提醒

- 忘记`cv2.waitKey()`——窗口会卡死无响应
- 忘记`cap.release()`——下次无法打开摄像头
- waitKey参数为0——会暂停等待按键

---

## 核心知识点

- 视频本质：连续图片帧的快速播放
- 帧率(FPS)：每秒播放的帧数，通常24-60fps
- VideoCapture：OpenCV读取视频/摄像头的核心类
- waitKey：控制播放速度和键盘响应

`#执行层` `#测评项`
[UID: PYAI-24-01-001]
[关联: PYAI-24-03-001 图像编辑（后续课程）]

---

[上一课](../_模块概览.md) | [模块概览](_模块概览.md) | [下一课](PYAI-2-4-03_图像编辑1.md)
