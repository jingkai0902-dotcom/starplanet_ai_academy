# [PYAI-2-2-05] 蒙特卡洛法

> **模块**：L2-M2 项目应用
> **认知负荷**：高
> **核心技能**：pygame.draw.circle()、距离公式、蒙特卡洛算法
> **UID**：PYAI-22-05-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 2-2-5 |
| **课程名称** | 蒙特卡洛法 |
| **认知负荷** | 高 |
| **核心技能** | pygame.draw.circle()、距离公式、蒙特卡洛算法 |

---

## 详细教学流程

**步骤1：知识讲解（20分钟）** `#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天我们用**随机数**来计算**圆周率π**！这种方法叫**蒙特卡洛法**。"
>
> "**原理**：
> 1. 画一个正方形，边长为2r
> 2. 在正方形内画一个内切圆，半径为r
> 3. 随机撒点，统计落在圆内的点数
> 4. 圆内点数/总点数 ≈ 圆面积/正方形面积 = πr²/(2r)² = π/4
> 5. 所以 π ≈ 4 × (圆内点数/总点数)"
>
> "**判断点是否在圆内**：
> - 计算点到圆心的距离
> - 距离公式：d = √((x-cx)² + (y-cy)²)
> - 如果 d ≤ r，点在圆内"

---

## 核心代码模式

```python
import pygame
import random
import math

pygame.init()
screen = pygame.display.set_mode((600, 600))
font = pygame.font.Font(None, 36)

# 圆心和半径
cx, cy = 300, 300
radius = 250

inside_count = 0
total_count = 0

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # 每帧撒10个点
    for _ in range(10):
        x = random.randint(cx - radius, cx + radius)
        y = random.randint(cy - radius, cy + radius)

        # 计算到圆心的距离
        distance = math.sqrt((x - cx)**2 + (y - cy)**2)

        total_count += 1
        if distance <= radius:
            inside_count += 1
            color = (255, 0, 0)  # 圆内红色
        else:
            color = (0, 0, 255)  # 圆外蓝色

        pygame.draw.circle(screen, color, (x, y), 2)

    # 计算π的估计值
    if total_count > 0:
        pi_estimate = 4 * inside_count / total_count
        text = font.render(f'Pi = {pi_estimate:.6f}', True, (0, 0, 0))
        pygame.draw.rect(screen, (255, 255, 255), (10, 10, 200, 40))
        screen.blit(text, (20, 20))

    pygame.display.flip()
    pygame.time.delay(10)

pygame.quit()
```

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 不理解蒙特卡洛 | 用投飞镖类比 | "随机投飞镖，统计落在靶心的比例" |
| π值不准确 | 增加点数 | 点越多越接近真实值 |
| 想加速计算 | 减少绘制 | 不是每���点都画出来 |

---

## 核心知识点

- 蒙特卡洛算法：用随机数模拟概率
- 距离公式：d = √((x₁-x₂)² + (y₁-y₂)²)
- 概率与面积的关系

---

## 底层逻辑

- **随机模拟**：用大量随机样本逼近真实结果
- **数学应用**：几何概率在编程中的应用

---

`#执行层` `#测评项`
[UID: PYAI-22-05-001]

---

[上一课](PYAI-2-2-04_规矩方圆.md) | [下一课](PYAI-2-2-06_弱肉强食.md) | [返回模块概览](_模块概览.md)
