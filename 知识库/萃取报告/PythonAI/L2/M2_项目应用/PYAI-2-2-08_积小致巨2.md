# [PYAI-2-2-08] 积小致巨2

> **模块**：L2-M2 项目应用
> **认知负荷**：高
> **核心技能**：多角色联动、列表数据存取、贪食蛇逻辑
> **UID**：PYAI-22-08-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 2-2-8 |
| **课程名称** | 积小致巨2 |
| **认知负荷** | 高 |
| **核心技能** | 多角色联动、列表数据存取、贪食蛇逻辑 |

---

## 详细教学流程

**步骤1：知识讲解（20分钟）** `#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天做经典游戏**贪食蛇**！蛇的身体是一串方块，吃到食物就变长。"
>
> "**贪食蛇的核心逻辑**：
> 1. 蛇身用**列表**存储每个方块的坐标
> 2. 移动时：头部添加新位置，尾部删除
> 3. 吃到食物：头部添加，尾部不删除（变长）
>
> ```python
> snake = [(100, 100), (80, 100), (60, 100)]  # 头在前
> direction = (20, 0)  # 向右移动
>
> # 移动
> new_head = (snake[0][0] + direction[0], snake[0][1] + direction[1])
> snake.insert(0, new_head)  # 头部添加
> snake.pop()  # 尾部删除
> ```"

---

## 核心代码模式

```python
import pygame
import random

pygame.init()
screen = pygame.display.set_mode((800, 600))

GRID_SIZE = 20

# 蛇身（列表存储坐标）
snake = [(200, 200), (180, 200), (160, 200)]
direction = (GRID_SIZE, 0)  # 初始向右

# 食物
food = (random.randint(0, 39) * GRID_SIZE, random.randint(0, 29) * GRID_SIZE)

score = 0
game_over = False

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT and direction != (GRID_SIZE, 0):
                direction = (-GRID_SIZE, 0)
            elif event.key == pygame.K_RIGHT and direction != (-GRID_SIZE, 0):
                direction = (GRID_SIZE, 0)
            elif event.key == pygame.K_UP and direction != (0, GRID_SIZE):
                direction = (0, -GRID_SIZE)
            elif event.key == pygame.K_DOWN and direction != (0, -GRID_SIZE):
                direction = (0, GRID_SIZE)

    if not game_over:
        # 计算新头部位置
        new_head = (snake[0][0] + direction[0], snake[0][1] + direction[1])

        # 边界检测
        if new_head[0] < 0 or new_head[0] >= 800 or new_head[1] < 0 or new_head[1] >= 600:
            game_over = True

        # 自身碰撞检测
        if new_head in snake:
            game_over = True

        if not game_over:
            snake.insert(0, new_head)

            # 吃到食物
            if new_head == food:
                score += 10
                food = (random.randint(0, 39) * GRID_SIZE, random.randint(0, 29) * GRID_SIZE)
            else:
                snake.pop()  # 没吃到就删除尾部

    # 绘制
    screen.fill((0, 0, 0))

    # 绘制食物
    pygame.draw.rect(screen, (255, 0, 0), (food[0], food[1], GRID_SIZE-2, GRID_SIZE-2))

    # 绘制蛇
    for i, segment in enumerate(snake):
        color = (0, 255, 0) if i == 0 else (0, 200, 0)  # 头部亮一点
        pygame.draw.rect(screen, color, (segment[0], segment[1], GRID_SIZE-2, GRID_SIZE-2))

    pygame.display.flip()
    pygame.time.delay(100)  # 控制蛇的速度

pygame.quit()
```

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 蛇移动太快 | 增加delay | 把100改成150或200 |
| 想加障碍物 | 添加墙壁列表 | 碰到墙壁也游戏结束 |
| 想显示分数 | 用font渲染 | 在屏幕上显示当前分数 |

---

## 禁忌提醒

- ❌ 允许180度转向——蛇会撞到自己
- ❌ 食物生成在蛇身上——需要检测避免

---

## 核心知识点

- 列表作为数据结构：存储蛇身坐标
- insert()和pop()：实现蛇的移动
- 方向控制：防止180度转向

---

## 底层逻辑

- **队列思想**：头部入队，尾部出队
- **状态管理**：用变量控制游戏状态

---

`#执行层` `#测评项`
[UID: PYAI-22-08-001]

---

[上一课](PYAI-2-2-07_积小致巨1.md) | [下一课](PYAI-2-2-09_举重若轻1.md) | [返回模块概览](_模块概览.md)
