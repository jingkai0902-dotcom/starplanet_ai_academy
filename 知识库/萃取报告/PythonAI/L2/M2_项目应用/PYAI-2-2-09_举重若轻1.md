# [PYAI-2-2-09] 举重若轻1

> **模块**：L2-M2 项目应用
> **认知负荷**：高
> **核心技能**：图像导入变换、能量值变化、游戏环节控制
> **UID**：PYAI-22-09-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 2-2-9 |
| **课程名称** | 举重若轻1 |
| **认知负荷** | 高 |
| **核心技能** | 图像导入变换、能量值变化、游戏环节控制 |

---

## 详细教学流程

**步骤1：知识讲解（20分钟）** `#中负荷-操练` `#IFC-即时`

**教师话术**
> "今天开始做一个**大炮射击**游戏！这是一个三节课的大项目，我们会学到图像处理、物理运动、音效等很多知识。"
>
> "**Pygame图像加载**：
> ```python
> import pygame
>
> # 加载图像
> cannon_img = pygame.image.load('cannon.png')
>
> # 缩放图像
> cannon_img = pygame.transform.scale(cannon_img, (100, 50))
>
> # 旋转图像（角度，逆时针为正）
> rotated = pygame.transform.rotate(cannon_img, 45)
>
> # 绘制到屏幕
> screen.blit(cannon_img, (x, y))
> ```
>
> **能量条设计**：
> - 按住空格键蓄力，能量值增加
> - 松开空格键发射，能量值决定初速度"

---

## 核心代码模式

```python
import pygame

pygame.init()
screen = pygame.display.set_mode((800, 600))

# 加载图像
cannon_img = pygame.image.load('cannon.png')
cannon_img = pygame.transform.scale(cannon_img, (80, 40))

# 大炮位置和角度
cannon_x, cannon_y = 50, 500
cannon_angle = 45

# 能量系统
energy = 0
max_energy = 100
charging = False

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_SPACE:
                charging = True
        if event.type == pygame.KEYUP:
            if event.key == pygame.K_SPACE:
                charging = False
                # 发射炮弹（下节课实现）
                print(f'发射！能量：{energy}')
                energy = 0

    # 蓄力
    if charging and energy < max_energy:
        energy += 2

    # 角度控制
    keys = pygame.key.get_pressed()
    if keys[pygame.K_UP] and cannon_angle < 80:
        cannon_angle += 1
    if keys[pygame.K_DOWN] and cannon_angle > 10:
        cannon_angle -= 1

    screen.fill((135, 206, 235))  # 天蓝色背景

    # 绘制大炮（旋转）
    rotated_cannon = pygame.transform.rotate(cannon_img, cannon_angle)
    screen.blit(rotated_cannon, (cannon_x, cannon_y - cannon_angle))

    # 绘制能量条
    pygame.draw.rect(screen, (100, 100, 100), (20, 20, 104, 24))  # 边框
    pygame.draw.rect(screen, (0, 255, 0), (22, 22, energy, 20))   # 能量

    pygame.display.flip()
    pygame.time.delay(16)

pygame.quit()
```

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 图像加载失败 | 检查路径 | 确认图片文件在正确位置 |
| 旋转后图像变形 | 解释原理 | 旋转会改变图像尺寸，需要调整位置 |
| 能量条不显示 | 检查坐标 | 确认绘制位置在屏幕范围内 |

---

## 禁忌提醒

- ❌ 图像路径错误——FileNotFoundError
- ❌ 忘记convert()——大图像可能卡顿

---

## 核心知识点

- 图像加载：`pygame.image.load()`
- 图像变换：`pygame.transform.scale()` / `rotate()`
- 能量系统：按键蓄力、松开释放
- 游戏状态：用变量控制不同阶段

---

`#执行层` `#测评项`
[UID: PYAI-22-09-001]

---

[上一课](PYAI-2-2-08_积小致巨2.md) | [下一课](PYAI-2-2-10_举重若轻2.md) | [返回模块概览](_模块概览.md)
