# [PYAI-2-2-12] 阶段复习

> **模块**：L2-M2 项目应用
> **认知负荷**：中
> **核心技能**：综合复习Pygame与OOP
> **UID**：PYAI-22-12-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 2-2-12 |
| **课程名称** | 阶段复习 |
| **认知负荷** | 中 |
| **核心技能** | 综合复习Pygame与OOP |

---

## 详细教学流程

**步骤1：知识回顾（30分钟）** `#中负荷-操练` `#IFC-即时`

**教师话术**
> "这个单元我们学了很多内容！让我们来回顾一下：
>
> **面向对象编程(OOP)**：
> - class定义类，是模板/蓝图
> - 实例是根据类创建的具体对象
> - `__init__`是初始化方法
> - `self`代表实例本身
>
> **Pygame基础**：
> - `pygame.init()` 初始化
> - `pygame.display.set_mode()` 创建窗口
> - 游戏主循环：事件处理 → 更新 → 绘制 → 刷新
>
> **图形绘制**：
> - `pygame.draw.line/rect/circle()`
> - RGB颜色：(R, G, B)，每个值0-255
>
> **图像处理**：
> - `pygame.image.load()` 加载
> - `pygame.transform.scale/rotate()` 变换
>
> **物理仿真**：
> - 抛物线：水平匀速 + 垂直加速
> - 重力：每帧vy += gravity
> - 碰撞检测：距离 < 半径之和"

---

**步骤2：综合练习（40分钟）** `#高负荷-产出` `#IFC-即时`

**教师话术**
> "现在来做一个**综合测试**！完成以下任务：
>
> 1. 创建一个Ball类，包含位置、速度、颜色属性
> 2. 让球在屏幕内弹跳（碰到边界反弹）
> 3. 用键盘控制一个方块，碰到球就得分
>
> 这个练习综合了OOP、Pygame绑图、按键控制、碰撞检测！"

---

## 核心代码模式（参考答案）

```python
import pygame
import random

pygame.init()
screen = pygame.display.set_mode((800, 600))
font = pygame.font.Font(None, 48)

class Ball:
    def __init__(self):
        self.x = random.randint(100, 700)
        self.y = random.randint(100, 500)
        self.vx = random.choice([-4, -3, 3, 4])
        self.vy = random.choice([-4, -3, 3, 4])
        self.radius = 15
        self.color = (random.randint(50,255), random.randint(50,255), random.randint(50,255))

    def update(self):
        self.x += self.vx
        self.y += self.vy
        # 边界反弹
        if self.x < self.radius or self.x > 800 - self.radius:
            self.vx = -self.vx
        if self.y < self.radius or self.y > 600 - self.radius:
            self.vy = -self.vy

    def draw(self, screen):
        pygame.draw.circle(screen, self.color, (int(self.x), int(self.y)), self.radius)

# 玩家方块
player_x, player_y = 400, 300
player_size = 30
speed = 5
score = 0

# 创建多个球
balls = [Ball() for _ in range(5)]

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # 键盘控制
    keys = pygame.key.get_pressed()
    if keys[pygame.K_LEFT]: player_x -= speed
    if keys[pygame.K_RIGHT]: player_x += speed
    if keys[pygame.K_UP]: player_y -= speed
    if keys[pygame.K_DOWN]: player_y += speed

    # 边界限制
    player_x = max(0, min(800 - player_size, player_x))
    player_y = max(0, min(600 - player_size, player_y))

    # 碰撞检测
    player_center = (player_x + player_size/2, player_y + player_size/2)
    for ball in balls[:]:
        dist = ((ball.x - player_center[0])**2 + (ball.y - player_center[1])**2)**0.5
        if dist < ball.radius + player_size/2:
            balls.remove(ball)
            balls.append(Ball())  # 生成新球
            score += 10

    screen.fill((30, 30, 30))

    # 绘制球
    for ball in balls:
        ball.update()
        ball.draw(screen)

    # 绘制玩家
    pygame.draw.rect(screen, (0, 255, 0), (player_x, player_y, player_size, player_size))

    # 显示分数
    text = font.render(f'Score: {score}', True, (255, 255, 255))
    screen.blit(text, (20, 20))

    pygame.display.flip()
    pygame.time.delay(16)

pygame.quit()
```

---

## 变体示例

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 完成太快 | 增加难度 | 球越来越快，或者加入躲避模式 |
| 有困难 | 简化任务 | 先只做弹跳球，再加玩家控制 |
| 想做更多 | 鼓励创意 | 加入计时、关卡、音效等 |

---

**步骤3：成果展示（10分钟）** `#低负荷-热身` `#IFC-复盘`

**教师话术**
> "谁来展示一下你的作品？说说你用了哪些知识点？
>
> 这个单元我们从零开始，学会了用Python做游戏！
> - 面向对象让代码更有组织
> - Pygame让我们能画图、放音乐、做交互
> - 物理仿真让游戏更真实
>
> 下个单元我们会学习更多AI相关的内容！"

---

## 核心知识点

- OOP综合：类定义、实例创建、方法调用
- Pygame综合：初始化、主循环、绑图、事件
- 物理综合：运动、碰撞、反弹
- 游戏设计：玩家控制、得分系统

---

## 底层逻辑

- **知识整合**：将分散的知识点串联成完整项目
- **能力迁移**：从模仿到独立创作

---

`#执行层` `#测评项`
[UID: PYAI-22-12-001]

---

[上一课](PYAI-2-2-11_举重若轻3.md) | [返回模块概览](_模块概览.md)
