# [PYAI-1-4-10] 智能花房(1) - 自动浇水系统

> **模块**：L1-M4 智能硬件
> **认知负荷**：中-高
> **核心技能**：土壤湿度传感器、水泵控制、自动化灌溉
> **UID**：PYAI-14-10-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI-1-4-10 |
| **课程名称** | 智能花房(1) - 自动浇水系统 |
| **认知负荷** | 中-高 |
| **核心技能** | 土壤湿度传感器、水泵控制、自动化灌溉 |
| **课时** | 90分钟 |
| **系列** | 智能花房（1/2） |

---

## 详细教学流程

### 步骤1：课程导入（5分钟）

`#低负荷-热身` `#IFC-预防`

**教师话术**
> "同学们养过植物吗？最头疼的是不是忘记浇水？今天我们来做一个**自动浇水系统**，让植物自己'喝水'！"

---

### 步骤2：知识讲解（15分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "**土壤湿度传感器**的工作原理：
> - 两个金属探针插入土壤
> - 土壤越湿，导电性越好，数值越低
> - 土壤越干，导电性越差，数值越高
>
> **数值范围**（参考）：
> - 0-300：非常湿润（刚浇过水）
> - 300-700：适中
> - 700-1000：偏干
> - 1000以上：很干（需要浇水）
>
> **水泵控制**：
> ```python
> from mpython import *
>
> # 水泵连接到P8（通过继电器）
> pump = Pin(Pin.P8, Pin.OUT)
>
> pump.write_digital(1)  # 开启水泵
> time.sleep(2)          # 浇水2秒
> pump.write_digital(0)  # 关闭水泵
> ```"

**核心代码模式**

```python
from mpython import *
import time

# 土壤湿度传感器连接到P0
soil_sensor = Pin(Pin.P0, Pin.IN)

# 水泵连接到P8
pump = Pin(Pin.P8, Pin.OUT)

# 干燥阈值
DRY_THRESHOLD = 800

while True:
    # 读取土壤湿度
    soil_value = soil_sensor.read_analog()
    print(f"土壤湿度: {soil_value}")

    # 判断是否需要浇水
    if soil_value > DRY_THRESHOLD:
        print("土壤干燥，开始浇水...")
        pump.write_digital(1)
        time.sleep(3)  # 浇水3秒
        pump.write_digital(0)
        print("浇水完成，等待30秒...")
        time.sleep(30)  # 等待水分渗透
    else:
        print("土壤湿润，无需浇水")

    time.sleep(5)  # 每5秒检测一次
```

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 数值不稳定 | 检查探针接触 | 探针要完全插入土壤 |
| 阈值不准 | 实际测量 | 先测干土和湿土的数值 |
| 想防止过度浇水 | 加冷却时间 | 浇水后等待一段时间再检测 |

---

### 步骤3：硬件搭建（20分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "今天的硬件包括：
>
> **土壤湿度传感器接线**：
> ```
> VCC → 3.3V
> GND → GND
> AO  → P0（模拟输出）
> ```
>
> **水泵模块接线**（通过继电器）：
> ```
> 继电器 VCC → 5V
> 继电器 GND → GND
> 继电器 IN  → P8
> 水泵接继电器的常开端
> ```
>
> **注意**：水泵需要单独供电，不能直接接ESP32！"

**禁忌提醒**

❌ **水泵直接接ESP32**——电流太大会烧毁
❌ **传感器长时间通电**——会加速腐蚀
❌ **水溅到电路板**——会短路
❌ **水管脱落**——会漏水

---

### 步骤4：编程调试（30分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "测试步骤：
>
> 1. 先测试传感器：
>    - 探针在空气中的数值
>    - 探针插入干土的数值
>    - 探针插入湿土的数值
>
> 2. 再测试水泵：
>    - 手动控制开关
>    - 确认水流正常
>
> 3. 最后联调：
>    - 把探针插入干土
>    - 观察是否自动浇水"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 水泵不工作 | 检查继电器 | 听继电器是否有"咔嗒"声 |
| 浇水太多 | 减少浇水时间 | 把3秒改成1秒 |
| 想加指示灯 | 用RGB显示状态 | 绿色=湿润，红色=干燥 |

---

### 步骤5：成果展示（10分钟）

`#低负荷-热身` `#IFC-复盘`

**教师话术**
> "谁的自动浇水系统做好了？演示一下！
>
> 思考：真正的智能花房还需要什么？
> - 光照检测（是否需要补光）
> - 温度检测（是否需要加热）
> - 远程监控（手机查看状态）"

---

## 核心知识点

- 土壤湿度传感器：数值越高越干燥
- 水泵控制：通过继电器间接控制
- 防过度浇水：加入冷却等待时间
- 阈值校准：根据实际土壤调整

---

## 底层逻辑

- **农业物联网**：感知土壤 → 智能决策 → 自动执行
- **反馈控制**：检测 → 执行 → 等待 → 再检测

---

`#执行层` `#测评项`
[UID: PYAI-14-10-001]

---

[上一课](PYAI-1-4-09_音强流水灯.md) | [返回模块](_模块概览.md) | [下一课](PYAI-1-4-11_智能花房2.md)
