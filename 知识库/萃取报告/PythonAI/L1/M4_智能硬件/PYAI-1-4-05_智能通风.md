# [PYAI-1-4-05] 智能通风 - 气体检测系统

> **模块**：L1-M4 智能硬件
> **认知负荷**：高
> **核心技能**：MQ-2B气体传感器、电机控制、安全阈值
> **UID**：PYAI-14-05-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | PYAI-1-4-05 |
| **课程名称** | 智能通风 - 气体检测系统 |
| **认知负荷** | 高 |
| **核心技能** | MQ-2B气体传感器、电机控制、安全阈值 |
| **课时** | 90分钟 |

---

## 详细教学流程

### 步骤1：课程导入（5分钟）

`#低负荷-热身` `#IFC-预防`

**教师话术**
> "同学们，家里的燃气报警器见过吗？今天我们要做一个类似的智能通风系统——检测到有害气体就自动开启风扇！"

---

### 步骤2：知识讲解（15分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "**MQ-2B气体传感器**可以检测：
> - 可燃气体（天然气、液化气）
> - 烟雾
> - 酒精蒸汽
>
> **工作原理**：
> - 传感器内部有加热丝，需要预热1-2分钟
> - 检测到气体时，输出值会升高
> - 正常空气：100-300
> - 检测到气体：500以上
>
> **电机控制**：
> ```python
> from mpython import *
>
> # 电机连接到P8引脚
> motor = Pin(Pin.P8, Pin.OUT)
>
> motor.write_digital(1)  # 开启电机
> motor.write_digital(0)  # 关闭电机
> ```"

**核心代码模式**

```python
from mpython import *
import time

# 气体传感器连接到P0
gas_sensor = Pin(Pin.P0, Pin.IN)

# 电机连接到P8
motor = Pin(Pin.P8, Pin.OUT)

# 安全阈值
DANGER_THRESHOLD = 500

while True:
    # 读取气体浓度
    gas_value = gas_sensor.read_analog()
    print(f"气体浓度: {gas_value}")

    # 判断是否超标
    if gas_value > DANGER_THRESHOLD:
        motor.write_digital(1)  # 开启风扇
        rgb.fill((255, 0, 0))   # 红色警告
        buzzer.on()             # 蜂鸣器报警
    else:
        motor.write_digital(0)  # 关闭风扇
        rgb.fill((0, 255, 0))   # 绿色安全
        buzzer.off()

    rgb.write()
    time.sleep(0.5)
```

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 传感器数值不稳定 | 等待预热 | MQ-2B需要预热1-2分钟 |
| 想测试效果 | 用酒精棉球 | 靠近传感器可触发检测 |
| 阈值不合适 | 观察正常值 | 先记录正常空气的数值 |

---

### 步骤3：硬件搭建（20分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "今天的接线比较复杂，请仔细听：
>
> **气体传感器接线**：
> ```
> VCC → 5V（注意：MQ-2B需要5V供电）
> GND → GND
> AO  → P0（模拟输出）
> ```
>
> **电机模块接线**：
> ```
> VCC → 5V
> GND → GND
> IN  → P8（控制信号）
> ```
>
> **重要**：MQ-2B传感器会发热，这是正常的！"

**禁忌提醒**

❌ **触摸发热的传感器**——会烫伤
❌ **用明火测试**——危险！用酒精棉球代替
❌ **电机反接**——可能烧毁驱动模块
❌ **忘记预热**——数值不准确

---

### 步骤4：编程调试（30分钟）

`#高负荷-产出` `#IFC-即时`

**教师话术**
> "代码上传后，先观察正常空气的数值是多少。
>
> 然后用酒精棉球靠近传感器测试：
> 1. 数值是否升高？
> 2. 风扇是否启动？
> 3. 蜂鸣器是否响起？
>
> 如果没反应，检查：
> - 传感器是否预热完成
> - 阈值设置是否合理
> - 接线是否正确"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 风扇不转 | 检查电机接线 | 确认IN接到正确引脚 |
| 一直报警 | 降低阈值 | 可能环境本身气体浓度高 |
| 想加显示 | 用OLED显示 | 在屏幕上显示当前数值 |

---

### 步骤5：成果展示（10分钟）

`#低负荷-热身` `#IFC-复盘`

**教师话术**
> "谁的智能通风系统做好了？演示一下！
>
> 思考：这个系统还能怎么改进？
> - 加入OLED显示当前气体浓度
> - 加入WiFi功能，远程报警
> - 记录历史数据"

---

## 核心知识点

- MQ-2B气体传感器：检测可燃气体和烟雾
- 传感器预热：需要1-2分钟预热才能准确
- 电机控制：`write_digital(1/0)` 开关控制
- 安全阈值：根据实际环境调整

---

## 底层逻辑

- **安全系统设计**：检测 → 判断 → 响应
- **多输出联动**：风扇 + 灯光 + 声音

---

`#执行层` `#测评项`
[UID: PYAI-14-05-001]

---

[上一课](PYAI-1-4-04_智能光控2.md) | [返回模块](_模块概览.md) | [下一课](PYAI-1-4-06_智能门禁1.md)
