# [CODE3-2-06] 篮球小子-关卡与判定

> **模块**：M2 游戏开发
> **认知负荷**：高
> **核心技能**：抛物线算法、碰撞检测、关卡系统
> **UID**：CODE3-M2-06-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 3-2-06 |
| **课程名称** | 篮球小子-关卡与判定 |
| **认知负荷** | 高 |
| **核心技能** | 抛物线算法、碰撞检测、关卡系统 |
| **所属项目** | 项目二：篮球小子（第4-6课） |

---

## 详细教学流程

### 步骤1：项目回顾（5分钟）

`#低负荷-热身` `#IFC-预防`

**教师话术**
> "我们已经有了力度和角度控制，今天要让球真正飞起来！球在空中的轨迹是什么形状？对，是抛物线！"

---

### 步骤2：任务分析（15分钟）

`#中负荷-操练` `#IFC-即时` ⭐核心环节

**教师话术**
> "抛物线的物理原理：
> 1. **水平方向**：匀速运动，X每次增加固定值
> 2. **垂直方向**：先上升后下降，Y速度逐渐减小
>
> 代码逻辑：
> ```
> X速度 = 力度 × cos(角度)  // 水平分量
> Y速度 = 力度 × sin(角度)  // 垂直分量
>
> 每帧：
>   X增加（X速度）  // 水平匀速
>   Y增加（Y速度）  // 垂直变速
>   Y速度减少1     // 重力作用
> ```
>
> 这就是物理课学的抛体运动！"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 不理解三角函数 | 简化公式 | 用固定比例代替sin/cos |
| 球飞太远/太近 | 调整力度系数 | 修改力度的乘数 |
| 想增加功能 | 添加风力 | X速度受风力影响 |

**核心代码模式**
```
// 篮���飞行（篮球角色）
当收到 [开始投篮]
移到 [运动员] 位置
显示
// 简化版：用角度45度近似
将 [X速度] 设为 ((投篮力度) * 0.7)
将 [Y速度] 设为 ((投篮力度) * 0.7)
重复执行直到 <<碰到 [地面] ?> 或 <碰到 [篮筐] ?>>
  将 x 增加 (X速度)
  将 y 增加 (Y速度)
  将 [Y速度] 增加 (-0.5)  // 重力
结束
如果 <碰到 [篮筐] ?> 那么
  将 [得分] 增加 (1)
  播放声音 [进球]
  说 [好球！] (1) 秒
结束
隐藏
将 [游戏状态] 设为 [运球]
```

---

### 步骤3：关卡系统（15分钟）

`#中负荷-操练` `#IFC-即时`

**教师话术**
> "一个好游戏需要多个关卡！每个关卡篮筐的位置不同：
> - 第1关：篮筐在近处
> - 第2关：篮筐在远处
> - 第3关：篮筐在高处
>
> 每进3个球就进入下一关！"

**核心代码模式**
```
// 关卡控制
当绿旗被点击
将 [关卡] 设为 (1)
将 [本关得分] 设为 (0)
广播 [设置关卡]

当收到 [设置关卡]
如果 <(关卡) = (1)> 那么
  篮筐移到 x: (150) y: (50)
结束
如果 <(关卡) = (2)> 那么
  篮筐移到 x: (200) y: (50)
结束
如果 <(关卡) = (3)> 那么
  篮筐移到 x: (150) y: (100)
结束

// 进球后检查关卡
当 [得分] 变化时
将 [本关得分] 增加 (1)
如果 <(本关得分) >= (3)> 那么
  将 [关卡] 增加 (1)
  将 [本关得分] 设为 (0)
  说 (连接 [恭喜进入第] 和 (关卡) 和 [关！])
  广播 [设置关卡]
结束
```

---

### 步骤4：家长班会（10分钟）

`#低负荷-热身` `#IFC-复盘`

**教师话术**
> "各位家长大家好！篮球小子项目完成了！三节课下来，孩子们学会了：
> 1. **状态机**：程序根据状态决定行为
> 2. **游标控制**：力度和角度的交互设计
> 3. **抛物线算法**：物理运动的编程实现
> 4. **关卡系统**：游戏难度递进设计
>
> 这是一个完整的物理模拟游戏！"

---

## 核心知识点

- 抛物线运动：水平匀速+垂直变速
- 碰撞检测：检测球是否进入篮筐
- 关卡系统：根据得分切换关卡
- 物理模拟：用代码模拟真实物理

---

## 底层逻辑

- **物理与编程**：将物理知识转化为代码
- **游戏设计**：关卡递进增加可玩性

---

## 导航

- **上一课**：[CODE3-2-05 篮球小子-力度与角度](CODE3-2-05_篮球小子-力度与角度.md)
- **下一课**：[CODE3-2-07 植物大战僵尸-阳光与种植](CODE3-2-07_植物大战僵尸-阳光与种植.md)
- **模块概览**：[M2 游戏开发](_模块概览.md)

---

`#执行层` `#测评项`
[UID: CODE3-M2-06-001]
