# [CODE3-2-08] 植物大战僵尸-射手与子弹

> **模块**：M2 游戏开发
> **认知负荷**：高
> **核心技能**：射线检测、克隆体通信、攻击逻辑
> **UID**：CODE3-M2-08-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 3-2-08 |
| **课程名称** | 植物大战僵尸-射手与子弹 |
| **认知负荷** | 高 |
| **核心技能** | 射线检测、克隆体通信、攻击逻辑 |
| **所属项目** | 项目三：植物大战僵尸（第7-9课） |

---

## 详细教学流程

### 步骤1：项目回顾（5分钟）

`#低负荷-热身` `#IFC-预防`

**教师话术**
> "上节课我们做了阳光收集和植物种植。今天要让植物'活'起来——豌豆射手要发射豌豆！"

---

### 步骤2：任务分析（15分钟）

`#中负荷-操练` `#IFC-即时` ⭐核心环节

**教师话术**
> "豌豆射手的攻击逻辑：
> 1. 检测同一行有没有僵尸（射线检测）
> 2. 如果有僵尸，发射豌豆
> 3. 豌豆飞行，碰到僵尸就消失，僵尸扣血
>
> 什么是'射线检测'？
> - 想象豌豆射手往右边'看'
> - 如果看到僵尸，就开火
> - 如果没看到，就不发射（节省资源）
>
> 这里有个难点：豌豆射手是克隆体，僵尸也是克隆体，它们怎么通信？
> - 用'私有变量'记录每个克隆体的行号
> - 豌豆射手只攻击同一行的僵尸"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 射线检测困难 | 简化逻辑 | 先做"一直发射"，再优化 |
| 豌豆太慢 | 调整速度 | 从10步改为15步 |
| 想增加植物 | 添加寒冰射手 | 豌豆变蓝色，僵尸减速 |

**核心代码模式**
```
// 豌豆射手（种下后的行为）
当作为克隆体启动时
将 [我的行号] 设为 (格子Y)  // 私有变量，记录在哪一行
显示
重复执行
  // 射线检测：检查同一行有没有僵尸
  将 [检测到僵尸] 设为 [否]
  // 遍历检测（简化版：直接检测颜色）
  如果 <颜色 [绿色] 碰到 [僵尸颜色] ?> 那么
    将 [检测到僵尸] 设为 [是]
  结束

  如果 <(检测到僵尸) = [是]> 那么
    // 发射豌豆
    广播 (连接 [发射豌豆-行] 和 (我的行号))
    等待 (1.5) 秒  // 攻击间隔
  结束
结束

// 豌豆角色
当收到 [发射豌豆-行0]  // 第0行的豌豆
克隆 [自己]

当作为克隆体启动时
将 [豌豆行号] 设为 (0)  // 根据消息设置行号
移到 [发射位置]
显示
重复执行直到 <<碰到边缘?> 或 <碰到 [僵尸] ?>>
  将 x 增加 (10)
结束
如果 <碰到 [僵尸] ?> 那么
  广播 [僵尸受伤]
结束
删除此克隆体
```

---

### 步骤3：家长班会（10分钟）

`#低负荷-热身` `#IFC-复盘`

**教师话术**
> "各位家长好！今天孩子们学习了'射线检测'和'克隆体通信'。
> 1. **射线检测**：让程序'看'到远处的物体
> 2. **克隆体通信**：多个相似对象之间传递信息
>
> 这些是游戏开发中非常重要的技术！"

---

## 核心知识点

- 射线检测：检测某个方向上是否有目标
- 克隆体通信：用广播+私有变量实现
- 攻击间隔：控制发射频率

---

## 导航

- **上一课**：[CODE3-2-07 植物大战僵尸-阳光与种植](CODE3-2-07_植物大战僵尸-阳光与种植.md)
- **下一课**：[CODE3-2-09 植物大战僵尸-僵尸潮](CODE3-2-09_植物大战僵尸-僵尸潮.md)
- **模块概览**：[M2 游戏开发](_模块概览.md)

---

`#执行层` `#测评项`
[UID: CODE3-M2-08-001]
