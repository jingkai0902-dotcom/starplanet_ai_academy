# [CODE3-2-07] 植物大战僵尸-阳光与种植

> **模块**：M2 游戏开发
> **认知负荷**：高
> **核心技能**：阳光掉落、鼠标跟随、网格对齐
> **UID**：CODE3-M2-07-001

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| **课程编号** | 3-2-07 |
| **课程名称** | 植物大战僵尸-阳光与种植 |
| **认知负荷** | 高 |
| **核心技能** | 阳光掉落、鼠标跟随、网格对齐 |
| **所属项目** | 项目三：植物大战僵尸（第7-9课） |

---

## 项目结构

| 课次 | 内容 | 核心知识点 | 认知负荷 |
|------|------|------------|----------|
| 第7课 | 阳光与种植 | 阳光掉落、鼠标跟随、网格对齐 | 高 |
| 第8课 | 射手与子弹 | 射线检测、克隆体通信 | 高 |
| 第9课 | 僵尸潮 | 列表(List)应用、胜负判定 | 高 |

---

## 详细教学流程

### 步骤1：情境引入（5分钟）

`#低负荷-热身` `#IFC-预防`

**教师话术**
> "小朋友们，你们玩过植物大战僵尸吗？这是一个超级经典的塔防游戏！今天开始，我们要用三节课的时间，自己做一个植物大战僵尸！"

---

### 步骤2：任务分析（15分钟）

`#中负荷-操练` `#IFC-即时` ⭐核心环节

**教师话术**
> "植物大战僵尸有几个核心元素：
> 1. **阳光**：从天上掉下来，点击收集
> 2. **植物**：用阳光购买，种在草坪上
> 3. **僵尸**：从右边走过来，要被植物消灭
>
> 今天我们先做阳光系统和种植系统！
>
> 阳光的逻辑：
> - 阳光从天上随机位置掉落
> - 点击阳光，阳光消失，阳光值+25
>
> 种植的逻辑：
> - 点击植物卡片，植物跟随鼠标
> - 点击草坪，植物种下（要对齐格子！）
> - 阳光值减少"

**变体示例**

| 学生情况 | 调整方案 | 说明 |
|----------|----------|------|
| 阳光掉太快 | 调整下落速度 | 从-3改为-2 |
| 网格对齐困难 | 简化格子 | 先用5×3的大格子 |
| 想增加功能 | 添加向日葵 | 向日葵可以生产阳光 |

**核心代码模式**
```
// 阳光掉落（阳光角色）
当绿旗被点击
隐藏
重复执行
  等待 (在 3 到 8 之间取随机数) 秒
  克隆 [自己]
结束

当作为克隆体启动时
移到 x: (在 -200 到 200 之间取随机数) y: (180)
显示
重复执行直到 <(y) < (-100)>
  将 y 增加 (-2)
  如果 <碰到 [鼠标指针] ?> 那么
    如果 <按下鼠标?> 那么
      将 [阳光值] 增加 (25)
      播放声音 [收集]
      删除此克隆体
    结束
  结束
结束
删除此克隆体

// 网格对齐算法
// 草坪格子：每格80像素宽，60像素高
// 左上角起点：x=-200, y=100
当按下鼠标
如果 <(种植模式) = [是]> 那么
  // 计算对齐后的格子位置
  将 [格子X] 设为 (取整 (((鼠标x) + 200) / 80))
  将 [格子Y] 设为 (取整 ((100 - (鼠标y)) / 60))
  // 转换回实际坐标
  将 [种植X] 设为 (-200 + (格子X) * 80 + 40)
  将 [种植Y] 设为 (100 - (格子Y) * 60 - 30)
  // 种植植物
  移到 x: (种植X) y: (种植Y)
  将 [种植模式] 设为 [否]
结束
```

**禁忌提醒**
- 不要让阳光掉出屏幕外——设置边界检测
- 不要忘记网格对齐——植物乱放会很丑

---

## 核心知识点

- 阳光掉落：克隆+随机位置+下落动画
- 鼠标跟随：植物跟随鼠标移动
- 网格对齐：坐标取整算法，让植物对齐格子

---

## 导航

- **上一课**：[CODE3-2-06 篮球小子-关卡与判定](CODE3-2-06_篮球小子-关卡与判定.md)
- **下一课**：[CODE3-2-08 植物大战僵尸-射手与子弹](CODE3-2-08_植物大战僵尸-射手与子弹.md)
- **模块概览**：[M2 游戏开发](_模块概览.md)

---

`#执行层` `#测评项`
[UID: CODE3-M2-07-001]
