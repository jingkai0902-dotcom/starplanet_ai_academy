{
  "title": "函数与封装",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\编程概念库\\函数与封装.md",
  "sections": [
    {
      "title": "一、函数基础",
      "content": "### 概念定义\n函数是一段可重复使用的代码块，用于完成特定任务。通过函数可以实现代码复用，提高程序的可读性和可维护性。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-08 | 自制积木（函数） | 定义与调用 |\n| PYAI 1-1-1 | 函数定义 | `def attack_enemy():` |\n\n---"
    },
    {
      "title": "二、函数定义与调用",
      "content": "### 2.1 Scratch自制积木\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-08 | 自制积木 | 代码复用 |\n\n#### Scratch示例\n```\n定义 画正方形\n    重复 4 次\n        移动 100 步\n        右转 90 度\n\n当绿旗被点击\n画正方形\n画正方形\n画正方形\n```\n\n### 2.2 Python函数定义\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-1 | 函数定义 | `def function_name():` |\n\n#### Python示例\n```python\n# 定义函数\ndef attack_enemy():\n    hero.attack(enemy)\n\n# 调用函数\nattack_enemy()\nattack_enemy()\nattack_enemy()\n```\n\n### 教学要点\n- 函数是\"工具\"，定义一次，使用多次\n- 函数名要有意义，描述函数的功能\n- 先定义，后调用\n\n---"
    },
    {
      "title": "三、参数传递",
      "content": "### 3.1 形式参数与实际参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-2 | 形式参数 | `def attack_target(target):` |\n| PYAI 1-1-4 | 多参数函数 | `def move_and_attack(x, y, target):` |\n\n#### Python示例\n```python\n# 形式参数（定义时）\ndef greet(name):        # name是形式参数\n    print(f\"你好，{name}！\")\n\n# 实际参数（调用时）\ngreet(\"张三\")           # \"张三\"是实际参数\ngreet(\"李四\")           # \"李四\"是实际参数\n```\n\n### 3.2 位置参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-4 | 位置参数 | 按顺序传递参数 |\n\n#### Python示例\n```python\ndef draw_rectangle(width, height):\n    print(f\"宽: {width}, 高: {height}\")\n\n# 位置参数按顺序匹配\ndraw_rectangle(100, 50)   # width=100, height=50\ndraw_rectangle(50, 100)   # width=50, height=100（顺序不同，结果不同）\n```\n\n### 3.3 默认参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-5 | 默认参数 | `def greet(name='Friend'):` |\n\n#### Python示例\n```python\ndef greet(name='朋友'):\n    print(f\"你好，{name}！\")\n\ngreet()           # 输出: 你好，朋友！（使用默认值）\ngreet(\"张三\")     # 输出: 你好，张三！（覆盖默认值）\n```\n\n### 3.4 绘图函数参数应用\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-3 | 绘图指令 | `def draw_polygon(sides, length):` |\n\n#### Python示例\n```python\nimport turtle\n\ndef draw_polygon(sides, length):\n    \"\"\"绘制正多边形\"\"\"\n    angle = 360 / sides\n    for i in range(sides):\n        turtle.forward(length)\n        turtle.right(angle)\n\n# 调用绘制不同图形\ndraw_polygon(3, 100)   # 三角形\ndraw_polygon(4, 100)   # 正方形\ndraw_polygon(6, 80)    # 六边形\n```\n\n---"
    },
    {
      "title": "四、返回值",
      "content": "### 概念定义\n函数可以通过`return`语句返回一个值给调用者。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-3 | 返回值(return) | 利息计算模型 |\n\n### Python示例\n```python\n# 无返回值的函数\ndef say_hello():\n    print(\"Hello!\")\n\n# 有返回值的函数\ndef add(a, b):\n    return a + b\n\n# 使用返回值\nresult = add(3, 5)\nprint(result)  # 输出: 8\n\n# 实际应用：计算利息\ndef calculate_interest(principal, rate, years):\n    interest = principal * rate * years\n    return interest\n\nmy_interest = calculate_interest(10000, 0.05, 3)\nprint(f\"利息: {my_interest}\")  # 输出: 利息: 1500.0\n```\n\n### 教学要点\n- `return`会立即结束函数执行\n- 没有`return`的函数返回`None`\n- 返回值可以是任何类型（数字、字符串、列表等）\n\n---"
    },
    {
      "title": "五、事件与回调函数",
      "content": "### 概念定义\n事件驱动编程中，当特定事件发生时，自动调用预先定义的函数。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-3-01 | 事件驱动 | 当绿旗被点击、当按下按键 |\n| CODE1-4-05 | 广播消息 | 角色间通信 |\n| PYAI 1-1-6 | 事件监听 | `pet.on('hear', speak)` |\n\n### Scratch示例\n```\n当绿旗被点击\n    说 \"游戏开始！\"\n\n当按下 [空格键]\n    跳跃\n\n当收到 [游戏结束 v]\n    说 \"Game Over\"\n```\n\n### Python示例\n```python\n# 事件监听（CodeCombat风格）\ndef on_hear(event):\n    pet.say(event.message)\n\npet.on('hear', on_hear)\n\n# Pygame事件处理\nimport pygame\n\ndef handle_events():\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            return False\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_SPACE:\n                player.jump()\n    return True\n```\n\n---"
    },
    {
      "title": "六、输入输出函数",
      "content": "### 6.1 input()函数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-06 | 人机交互 | 询问...并等待、回答 |\n| PYAI 1-1-8 | input输入 | `age = int(input('年龄:'))` |\n\n#### Scratch示例\n```\n询问 [你叫什么名字？] 并等待\n说 (字符串连接 [你好，] 和 (回答))\n```\n\n#### Python示例\n```python\n# 基本输入\nname = input(\"请输入你的名字: \")\nprint(f\"你好，{name}！\")\n\n# 输入数字（需要类型转换）\nage = int(input(\"请输入你的年龄: \"))\nprice = float(input(\"请输入价格: \"))\n```\n\n### 6.2 print()函数\n\n#### Python示例\n```python\n# 基本输出\nprint(\"Hello, World!\")\n\n# 格式化输出\nname = \"张三\"\nscore = 95\nprint(f\"{name}的成绩是{score}分\")\n\n# 多个值输出\nprint(\"姓名:\", name, \"成绩:\", score)\n\n# 不换行输出\nprint(\"Loading\", end=\"\")\nprint(\"...\", end=\"\")\nprint(\"Done!\")  # 输出: Loading...Done!\n```\n\n---"
    },
    {
      "title": "七、递归函数",
      "content": "### 概念定义\n函数调用自身的编程技巧，用于解决可以分解为相同子问题的问题。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-3 | 递归函数 | 递归终止条件、调用栈 |\n| PYAI 2-1-4 | 递归应用 | 分治思想、汉诺塔 |\n\n### Python示例\n```python\n# 阶乘（经典递归）\ndef factorial(n):\n    if n <= 1:          # 终止条件\n        return 1\n    return n * factorial(n - 1)  # 递归调用\n\nprint(factorial(5))  # 输出: 120\n\n# 汉诺塔\ndef hanoi(n, source, auxiliary, target):\n    if n == 1:\n        print(f\"移动盘子从 {source} 到 {target}\")\n        return\n    hanoi(n - 1, source, target, auxiliary)\n    print(f\"移动盘子从 {source} 到 {target}\")\n    hanoi(n - 1, auxiliary, source, target)\n\nhanoi(3, 'A', 'B', 'C')\n```\n\n### 教学要点\n- 必须有终止条件，否则无限递归\n- 用俄罗斯套娃比喻递归\n- 递归深度有限制（Python默认1000层）\n\n---"
    },
    {
      "title": "八、模块导入",
      "content": "### 概念定义\n将其他文件中的函数导入到当前程序中使用。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-1 | import模块导入 | `import math` |\n| PYAI 2-1-2 | turtle模块 | `import turtle` |\n| PYAI 2-1-7 | matplotlib | `import matplotlib.pyplot as plt` |\n\n### Python示例\n```python\n# 导入整个模块\nimport math\nprint(math.sqrt(16))  # 4.0\n\n# 导入特定函数\nfrom math import sqrt, pi\nprint(sqrt(16))       # 4.0\nprint(pi)             # 3.14159...\n\n# 导入并重命名\nimport matplotlib.pyplot as plt\nplt.plot([1, 2, 3], [1, 4, 9])\nplt.show()\n\n# 导入自定义模块\nfrom my_module import my_function\n```\n\n---"
    },
    {
      "title": "九、函数进阶路线",
      "content": "```\nCODE1-4-08          PYAI 1-1-1          PYAI 1-1-2          PYAI 1-2-3          PYAI 2-1-3\n自制积木     →      def函数      →      带参数函数    →     返回值       →      递归函数\n   ↓                   ↓                   ↓                   ↓                   ↓\n 代码复用           函数定义            参数传递            return             自我调用\n```\n\n---"
    },
    {
      "title": "十、Scratch → Python 映射",
      "content": "| Scratch | Python | 说明 |\n|---------|--------|------|\n| 定义 [自制积木] | `def function_name():` | 函数定义 |\n| 自制积木 | `function_name()` | 函数调用 |\n| 定义 [积木] (参数1) | `def func(param):` | 带参数函数 |\n| 询问...并等待 | `input(\"...\")` | 用户输入 |\n| 回答 | 变量存储input返回值 | 获取输入值 |\n| 广播 [消息] | 事件/回调函数 | 消息传递 |\n\n---"
    },
    {
      "title": "十一、常见错误与禁忌",
      "content": "| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 函数定义后忘记调用 | 函数不执行 | 定义后要调用 |\n| ❌ 参数顺序错误 | 结果错误 | 注意参数顺序 |\n| ❌ 忘记return | 返回None | 需要返回值时加return |\n| ❌ 递归无终止条件 | 栈溢出 | 必须有终止条件 |\n| ❌ 修改全局变量忘记global | 创建局部变量 | 使用global声明 |\n\n---\n\n**维护者**：知识库管理员\n**数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n**整合原则**：基于现有萃取报告，不压缩删减"
    }
  ],
  "full_content": "# 函数与封装\n\n> **用途**：跨课程函数与封装概念详细说明\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n> **整合原则**：基于现有萃取报告，不压缩删减\n\n---\n\n## 一、函数基础\n\n### 概念定义\n函数是一段可重复使用的代码块，用于完成特定任务。通过函数可以实现代码复用，提高程序的可读性和可维护性。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-08 | 自制积木（函数） | 定义与调用 |\n| PYAI 1-1-1 | 函数定义 | `def attack_enemy():` |\n\n---\n\n## 二、函数定义与调用\n\n### 2.1 Scratch自制积木\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-08 | 自制积木 | 代码复用 |\n\n#### Scratch示例\n```\n定义 画正方形\n    重复 4 次\n        移动 100 步\n        右转 90 度\n\n当绿旗被点击\n画正方形\n画正方形\n画正方形\n```\n\n### 2.2 Python函数定义\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-1 | 函数定义 | `def function_name():` |\n\n#### Python示例\n```python\n# 定义函数\ndef attack_enemy():\n    hero.attack(enemy)\n\n# 调用函数\nattack_enemy()\nattack_enemy()\nattack_enemy()\n```\n\n### 教学要点\n- 函数是\"工具\"，定义一次，使用多次\n- 函数名要有意义，描述函数的功能\n- 先定义，后调用\n\n---\n\n## 三、参数传递\n\n### 3.1 形式参数与实际参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-2 | 形式参数 | `def attack_target(target):` |\n| PYAI 1-1-4 | 多参数函数 | `def move_and_attack(x, y, target):` |\n\n#### Python示例\n```python\n# 形式参数（定义时）\ndef greet(name):        # name是形式参数\n    print(f\"你好，{name}！\")\n\n# 实际参数（调用时）\ngreet(\"张三\")           # \"张三\"是实际参数\ngreet(\"李四\")           # \"李四\"是实际参数\n```\n\n### 3.2 位置参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-4 | 位置参数 | 按顺序传递参数 |\n\n#### Python示例\n```python\ndef draw_rectangle(width, height):\n    print(f\"宽: {width}, 高: {height}\")\n\n# 位置参数按顺序匹配\ndraw_rectangle(100, 50)   # width=100, height=50\ndraw_rectangle(50, 100)   # width=50, height=100（顺序不同，结果不同）\n```\n\n### 3.3 默认参数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-5 | 默认参数 | `def greet(name='Friend'):` |\n\n#### Python示例\n```python\ndef greet(name='朋友'):\n    print(f\"你好，{name}！\")\n\ngreet()           # 输出: 你好，朋友！（使用默认值）\ngreet(\"张三\")     # 输出: 你好，张三！（覆盖默认值）\n```\n\n### 3.4 绘图函数参数应用\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-1-3 | 绘图指令 | `def draw_polygon(sides, length):` |\n\n#### Python示例\n```python\nimport turtle\n\ndef draw_polygon(sides, length):\n    \"\"\"绘制正多边形\"\"\"\n    angle = 360 / sides\n    for i in range(sides):\n        turtle.forward(length)\n        turtle.right(angle)\n\n# 调用绘制不同图形\ndraw_polygon(3, 100)   # 三角形\ndraw_polygon(4, 100)   # 正方形\ndraw_polygon(6, 80)    # 六边形\n```\n\n---\n\n## 四、返回值\n\n### 概念定义\n函数可以通过`return`语句返回一个值给调用者。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-3 | 返回值(return) | 利息计算模型 |\n\n### Python示例\n```python\n# 无返回值的函数\ndef say_hello():\n    print(\"Hello!\")\n\n# 有返回值的函数\ndef add(a, b):\n    return a + b\n\n# 使用返回值\nresult = add(3, 5)\nprint(result)  # 输出: 8\n\n# 实际应用：计算利息\ndef calculate_interest(principal, rate, years):\n    interest = principal * rate * years\n    return interest\n\nmy_interest = calculate_interest(10000, 0.05, 3)\nprint(f\"利息: {my_interest}\")  # 输出: 利息: 1500.0\n```\n\n### 教学要点\n- `return`会立即结束函数执行\n- 没有`return`的函数返回`None`\n- 返回值可以是任何类型（数字、字符串、列表等）\n\n---\n\n## 五、事件与回调函数\n\n### 概念定义\n事件驱动编程中，当特定事件发生时，自动调用预先定义的函数。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-3-01 | 事件驱动 | 当绿旗被点击、当按下按键 |\n| CODE1-4-05 | 广播消息 | 角色间通信 |\n| PYAI 1-1-6 | 事件监听 | `pet.on('hear', speak)` |\n\n### Scratch示例\n```\n当绿旗被点击\n    说 \"游戏开始！\"\n\n当按下 [空格键]\n    跳跃\n\n当收到 [游戏结束 v]\n    说 \"Game Over\"\n```\n\n### Python示例\n```python\n# 事件监听（CodeCombat风格）\ndef on_hear(event):\n    pet.say(event.message)\n\npet.on('hear', on_hear)\n\n# Pygame事件处理\nimport pygame\n\ndef handle_events():\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            return False\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_SPACE:\n                player.jump()\n    return True\n```\n\n---\n\n## 六、输入输出函数\n\n### 6.1 input()函数\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-06 | 人机交互 | 询问...并等待、回答 |\n| PYAI 1-1-8 | input输入 | `age = int(input('年龄:'))` |\n\n#### Scratch示例\n```\n询问 [你叫什么名字？] 并等待\n说 (字符串连接 [你好，] 和 (回答))\n```\n\n#### Python示例\n```python\n# 基本输入\nname = input(\"请输入你的名字: \")\nprint(f\"你好，{name}！\")\n\n# 输入数字（需要类型转换）\nage = int(input(\"请输入你的年龄: \"))\nprice = float(input(\"请输入价格: \"))\n```\n\n### 6.2 print()函数\n\n#### Python示例\n```python\n# 基本输出\nprint(\"Hello, World!\")\n\n# 格式化输出\nname = \"张三\"\nscore = 95\nprint(f\"{name}的成绩是{score}分\")\n\n# 多个值输出\nprint(\"姓名:\", name, \"成绩:\", score)\n\n# 不换行输出\nprint(\"Loading\", end=\"\")\nprint(\"...\", end=\"\")\nprint(\"Done!\")  # 输出: Loading...Done!\n```\n\n---\n\n## 七、递归函数\n\n### 概念定义\n函数调用自身的编程技巧，用于解决可以分解为相同子问题的问题。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-3 | 递归函数 | 递归终止条件、调用栈 |\n| PYAI 2-1-4 | 递归应用 | 分治思想、汉诺塔 |\n\n### Python示例\n```python\n# 阶乘（经典递归）\ndef factorial(n):\n    if n <= 1:          # 终止条件\n        return 1\n    return n * factorial(n - 1)  # 递归调用\n\nprint(factorial(5))  # 输出: 120\n\n# 汉诺塔\ndef hanoi(n, source, auxiliary, target):\n    if n == 1:\n        print(f\"移动盘子从 {source} 到 {target}\")\n        return\n    hanoi(n - 1, source, target, auxiliary)\n    print(f\"移动盘子从 {source} 到 {target}\")\n    hanoi(n - 1, auxiliary, source, target)\n\nhanoi(3, 'A', 'B', 'C')\n```\n\n### 教学要点\n- 必须有终止条件，否则无限递归\n- 用俄罗斯套娃比喻递归\n- 递归深度有限制（Python默认1000层）\n\n---\n\n## 八、模块导入\n\n### 概念定义\n将其他文件中的函数导入到当前程序中使用。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-1-1 | import模块导入 | `import math` |\n| PYAI 2-1-2 | turtle模块 | `import turtle` |\n| PYAI 2-1-7 | matplotlib | `import matplotlib.pyplot as plt` |\n\n### Python示例\n```python\n# 导入整个模块\nimport math\nprint(math.sqrt(16))  # 4.0\n\n# 导入特定函数\nfrom math import sqrt, pi\nprint(sqrt(16))       # 4.0\nprint(pi)             # 3.14159...\n\n# 导入并重命名\nimport matplotlib.pyplot as plt\nplt.plot([1, 2, 3], [1, 4, 9])\nplt.show()\n\n# 导入自定义模块\nfrom my_module import my_function\n```\n\n---\n\n## 九、函数进阶路线\n\n```\nCODE1-4-08          PYAI 1-1-1          PYAI 1-1-2          PYAI 1-2-3          PYAI 2-1-3\n自制积木     →      def函数      →      带参数函数    →     返回值       →      递归函数\n   ↓                   ↓                   ↓                   ↓                   ↓\n 代码复用           函数定义            参数传递            return             自我调用\n```\n\n---\n\n## 十、Scratch → Python 映射\n\n| Scratch | Python | 说明 |\n|---------|--------|------|\n| 定义 [自制积木] | `def function_name():` | 函数定义 |\n| 自制积木 | `function_name()` | 函数调用 |\n| 定义 [积木] (参数1) | `def func(param):` | 带参数函数 |\n| 询问...并等待 | `input(\"...\")` | 用户输入 |\n| 回答 | 变量存储input返回值 | 获取输入值 |\n| 广播 [消息] | 事件/回调函数 | 消息传递 |\n\n---\n\n## 十一、常见错误与禁忌\n\n| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 函数定义后忘记调用 | 函数不执行 | 定义后要调用 |\n| ❌ 参数顺序错误 | 结果错误 | 注意参数顺序 |\n| ❌ 忘记return | 返回None | 需要返回值时加return |\n| ❌ 递归无终止条件 | 栈溢出 | 必须有终止条件 |\n| ❌ 修改全局变量忘记global | 创建局部变量 | 使用global声明 |\n\n---\n\n**维护者**：知识库管理员\n**数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n**整合原则**：基于现有萃取报告，不压缩删减\n"
}