{
  "title": "[PYAI-1-4-02] 按钮控制LED",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\萃取报告\\PythonAI\\L1\\M4_智能硬件\\PYAI-1-4-02_按钮控制LED.md",
  "sections": [
    {
      "title": "课程基本信息",
      "content": "| 项目 | 内容 |\n|------|------|\n| **课程编号** | PYAI-1-4-02 |\n| **课程名称** | 按钮控制LED |\n| **认知负荷** | 中 |\n| **核心技能** | GPIO输入、button.value()、消抖处理 |\n| **课时** | 90分钟 |\n\n---"
    },
    {
      "title": "详细教学流程",
      "content": "### 步骤1：课程回顾（5分钟）\n\n`#低负荷-热身` `#IFC-预防`\n\n**教师话术**\n> \"上节课我们学会了用代码控制LED闪烁。但那是自动的，如果我想用按钮来控制呢？今天学习**GPIO输入**——让开发板'感知'按钮状态！\"\n\n---\n\n### 步骤2：知识讲解（15分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"**GPIO输入模式**：之前LED是输出(OUT)，按钮是输入(IN)\n>\n> ```python\n> import machine\n>\n> # LED是输出\n> led = machine.Pin(2, machine.Pin.OUT)\n>\n> # 按钮是输入\n> button = machine.Pin(4, machine.Pin.IN)\n> ```\n>\n> **读取按钮状态**：用`value()`方法\n> ```python\n> state = button.value()\n> # 返回 0 表示按下（低电平）\n> # 返回 1 表示松开（高电平）\n> ```\n>\n> **为什么按下是0？**\n> - 按钮接地(GND)，按下时引脚接地，电压为0\n> - 松开时引脚悬空或接高电平，电压为1\"\n\n**核心代码模式**\n\n```python\nimport machine\nimport time\n\n# 初始化引脚\nled = machine.Pin(2, machine.Pin.OUT)\nbutton = machine.Pin(4, machine.Pin.IN)\n\nwhile True:\n    if button.value() == 0:  # 按钮按下\n        led.value(1)         # 开灯\n    else:\n        led.value(0)         # 关灯\n    time.sleep_ms(20)        # 消抖延时\n```\n\n**变体示例**\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 不理解0和1 | 用开关类比 | \"按下接通=0，松开断开=1\" |\n| 按钮不灵敏 | 检查接线 | 确认按钮一端接引脚，一端接GND |\n| 想做切换功能 | 引导状态变量 | 用变量记录当前灯的状态 |\n\n---\n\n### 步骤3：硬件搭建（20分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"今天的接线很简单：\n>\n> **按钮接线**：\n> ```\n> 按钮一端 → P4引脚\n> 按钮另一端 → GND\n> ```\n>\n> **LED接线**（如果用外部LED）：\n> ```\n> LED正极 → P2引脚\n> LED负极 → GND（通过电阻）\n> ```\n>\n> **消抖处理**：按钮按下时会有机械抖动，产生多次0-1变化。加入`time.sleep_ms(20)`延时可以消除抖动。\"\n\n**禁忌提醒**\n\n❌ **按钮两端都接VCC**——无法检测按下\n❌ **忘记消抖**——按一次可能触发多次\n❌ **LED不串电阻**——可能烧毁LED\n\n---\n\n### 步骤4：编程调试（30分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"现在来做一个**切换开关**——按一次开灯，再按一次关灯：\n>\n> ```python\n> import machine\n> import time\n>\n> led = machine.Pin(2, machine.Pin.OUT)\n> button = machine.Pin(4, machine.Pin.IN)\n>\n> light_on = False  # 记录灯的状态\n> last_state = 1    # 记录上次按钮状态\n>\n> while True:\n>     current_state = button.value()\n>\n>     # 检测按下瞬间（从1变成0）\n>     if current_state == 0 and last_state == 1:\n>         light_on = not light_on  # 切换状态\n>         led.value(1 if light_on else 0)\n>         time.sleep_ms(200)  # 防止连续触发\n>\n>     last_state = current_state\n>     time.sleep_ms(20)\n> ```\"\n\n**变体示例**\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 切换不灵 | 检查边沿检测 | 确认是检测\"按下瞬间\"而非\"按住\" |\n| 想加多个按钮 | 扩展引脚 | 每个按钮用不同引脚 |\n| 想做长按功能 | 计时检测 | 记录按下时长，超过1秒执行不同操作 |\n\n---\n\n### 步骤5：成果展示（10分钟）\n\n`#低负荷-热身` `#IFC-复盘`\n\n**教师话术**\n> \"谁的按钮开关做好了？演示一下！\n>\n> 挑战：能不能做一个'双击'功能？双击按钮切换不同颜色的RGB灯。\"\n\n---"
    },
    {
      "title": "核心知识点",
      "content": "- GPIO输入模式：`machine.Pin(pin, machine.Pin.IN)`\n- 读取状态：`button.value()` 返回0或1\n- 消抖处理：加入短暂延时消除机械抖动\n- 边沿检测：检测状态变化的瞬间\n\n---"
    },
    {
      "title": "底层逻辑",
      "content": "- **输入输出**：GPIO既可以输出控制设备，也可以输入感知状态\n- **状态机**：用变量记录状态，实现切换功能\n\n---\n\n`#执行层` `#测评项`\n[UID: PYAI-14-02-001]\n\n---\n\n[上一课](PYAI-1-4-01_硬件系统.md) | [返回模块](_模块概览.md) | [下一课](PYAI-1-4-03_智能光控1.md)"
    }
  ],
  "full_content": "# [PYAI-1-4-02] 按钮控制LED\n\n> **模块**：L1-M4 智能硬件\n> **认知负荷**：中\n> **核心技能**：GPIO输入、button.value()、消抖处理\n> **UID**：PYAI-14-02-001\n\n---\n\n## 课程基本信息\n\n| 项目 | 内容 |\n|------|------|\n| **课程编号** | PYAI-1-4-02 |\n| **课程名称** | 按钮控制LED |\n| **认知负荷** | 中 |\n| **核心技能** | GPIO输入、button.value()、消抖处理 |\n| **课时** | 90分钟 |\n\n---\n\n## 详细教学流程\n\n### 步骤1：课程回顾（5分钟）\n\n`#低负荷-热身` `#IFC-预防`\n\n**教师话术**\n> \"上节课我们学会了用代码控制LED闪烁。但那是自动的，如果我想用按钮来控制呢？今天学习**GPIO输入**——让开发板'感知'按钮状态！\"\n\n---\n\n### 步骤2：知识讲解（15分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"**GPIO输入模式**：之前LED是输出(OUT)，按钮是输入(IN)\n>\n> ```python\n> import machine\n>\n> # LED是输出\n> led = machine.Pin(2, machine.Pin.OUT)\n>\n> # 按钮是输入\n> button = machine.Pin(4, machine.Pin.IN)\n> ```\n>\n> **读取按钮状态**：用`value()`方法\n> ```python\n> state = button.value()\n> # 返回 0 表示按下（低电平）\n> # 返回 1 表示松开（高电平）\n> ```\n>\n> **为什么按下是0？**\n> - 按钮接地(GND)，按下时引脚接地，电压为0\n> - 松开时引脚悬空或接高电平，电压为1\"\n\n**核心代码模式**\n\n```python\nimport machine\nimport time\n\n# 初始化引脚\nled = machine.Pin(2, machine.Pin.OUT)\nbutton = machine.Pin(4, machine.Pin.IN)\n\nwhile True:\n    if button.value() == 0:  # 按钮按下\n        led.value(1)         # 开灯\n    else:\n        led.value(0)         # 关灯\n    time.sleep_ms(20)        # 消抖延时\n```\n\n**变体示例**\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 不理解0和1 | 用开关类比 | \"按下接通=0，松开断开=1\" |\n| 按钮不灵敏 | 检查接线 | 确认按钮一端接引脚，一端接GND |\n| 想做切换功能 | 引导状态变量 | 用变量记录当前灯的状态 |\n\n---\n\n### 步骤3：硬件搭建（20分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"今天的接线很简单：\n>\n> **按钮接线**：\n> ```\n> 按钮一端 → P4引脚\n> 按钮另一端 → GND\n> ```\n>\n> **LED接线**（如果用外部LED）：\n> ```\n> LED正极 → P2引脚\n> LED负极 → GND（通过电阻）\n> ```\n>\n> **消抖处理**：按钮按下时会有机械抖动，产生多次0-1变化。加入`time.sleep_ms(20)`延时可以消除抖动。\"\n\n**禁忌提醒**\n\n❌ **按钮两端都接VCC**——无法检测按下\n❌ **忘记消抖**——按一次可能触发多次\n❌ **LED不串电阻**——可能烧毁LED\n\n---\n\n### 步骤4：编程调试（30分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"现在来做一个**切换开关**——按一次开灯，再按一次关灯：\n>\n> ```python\n> import machine\n> import time\n>\n> led = machine.Pin(2, machine.Pin.OUT)\n> button = machine.Pin(4, machine.Pin.IN)\n>\n> light_on = False  # 记录灯的状态\n> last_state = 1    # 记录上次按钮状态\n>\n> while True:\n>     current_state = button.value()\n>\n>     # 检测按下瞬间（从1变成0）\n>     if current_state == 0 and last_state == 1:\n>         light_on = not light_on  # 切换状态\n>         led.value(1 if light_on else 0)\n>         time.sleep_ms(200)  # 防止连续触发\n>\n>     last_state = current_state\n>     time.sleep_ms(20)\n> ```\"\n\n**变体示例**\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 切换不灵 | 检查边沿检测 | 确认是检测\"按下瞬间\"而非\"按住\" |\n| 想加多个按钮 | 扩展引脚 | 每个按钮用不同引脚 |\n| 想做长按功能 | 计时检测 | 记录按下时长，超过1秒执行不同操作 |\n\n---\n\n### 步骤5：成果展示（10分钟）\n\n`#低负荷-热身` `#IFC-复盘`\n\n**教师话术**\n> \"谁的按钮开关做好了？演示一下！\n>\n> 挑战：能不能做一个'双击'功能？双击按钮切换不同颜色的RGB灯。\"\n\n---\n\n## 核心知识点\n\n- GPIO输入模式：`machine.Pin(pin, machine.Pin.IN)`\n- 读取状态：`button.value()` 返回0或1\n- 消抖处理：加入短暂延时消除机械抖动\n- 边沿检测：检测状态变化的瞬间\n\n---\n\n## 底层逻辑\n\n- **输入输出**：GPIO既可以输出控制设备，也可以输入感知状态\n- **状态机**：用变量记录状态，实现切换功能\n\n---\n\n`#执行层` `#测评项`\n[UID: PYAI-14-02-001]\n\n---\n\n[上一课](PYAI-1-4-01_硬件系统.md) | [返回模块](_模块概览.md) | [下一课](PYAI-1-4-03_智能光控1.md)\n"
}