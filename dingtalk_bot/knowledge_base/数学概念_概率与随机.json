{
  "title": "概率与随机",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\数学概念库\\概率与随机.md",
  "sections": [
    {
      "title": "一、随机数基础",
      "content": "### 1.1 基本概念\n\n随机数：在指定范围内随机生成的数值，每次结果不可预测。\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-02 | 斯斯接苹果 | 苹果随机位置 |\n| CODE3-2-02 | 太空防卫战 | 敌机随机生成 |\n| PYAI 2-3-10 | 机械手游戏 | 石头剪刀布 |\n\n### 1.3 Scratch随机数\n\n```scratch\n// 生成1到10的随机整数\n(随机取数 (1) 到 (10))\n\n// 随机位置\n移到 x: (随机取数 (-200) 到 (200)) y: (随机取数 (-150) 到 (150))\n\n// 随机等待\n等待 (随机取数 (1) 到 (3)) 秒\n```\n\n### 1.4 Python随机数\n\n```python\nimport random\n\n# 随机整数（包含两端）\nnum = random.randint(1, 10)  # 1到10\n\n# 随机浮点数\nnum = random.random()  # 0.0到1.0\nnum = random.uniform(1.5, 5.5)  # 1.5到5.5\n\n# 随机选择\nchoice = random.choice(['A', 'B', 'C'])\n\n# 打乱列表\nitems = [1, 2, 3, 4, 5]\nrandom.shuffle(items)\n```\n\n### 1.5 教学话术\n\n> \"随机数就像掷骰子，每次结果都不一样。我们可以用它让游戏更有趣——敌人从不同位置出现，道具随机掉落。\"\n\n---"
    },
    {
      "title": "二、随机位置生成",
      "content": "### 2.1 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-02 | 斯斯接苹果 | 苹果从顶部随机位置掉落 |\n| CODE3-2-02 | 太空防卫战 | 敌机从顶部随机出现 |\n| CODE3-2-09 | 植物大战僵尸 | 僵尸从右侧随机行出现 |\n\n### 2.2 Scratch实现\n\n```scratch\n// 苹果从顶部随机位置掉落\n当作为克隆体启动时\n移到 x: (随机取数 (-200) 到 (200)) y: (180)\n重复执行直到 <(y 座标) < (-170)>\n    将 y 改变 (-5)\n删除此克隆体\n```\n\n### 2.3 Python实现\n\n```python\nimport random\n\ndef spawn_enemy(screen_width, screen_height):\n    \"\"\"在屏幕顶部随机位置生成敌人\"\"\"\n    x = random.randint(50, screen_width - 50)\n    y = 0  # 顶部\n    return x, y\n\n# 在指定行随机生成（植物大战僵尸）\ndef spawn_zombie(rows, screen_width):\n    \"\"\"在随机行生成僵尸\"\"\"\n    row = random.randint(0, rows - 1)\n    x = screen_width\n    y = row * 80 + 40  # 假设每行80像素\n    return x, y, row\n```\n\n---"
    },
    {
      "title": "三、随机选择",
      "content": "### 3.1 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-10 | 机械手游戏 | 电脑随机出拳 |\n| CODE2-3-01 | 猜数游戏 | 随机生成目标数 |\n\n### 3.2 等概率选择\n\n```python\nimport random\n\n# 石头剪刀布\nchoices = ['rock', 'paper', 'scissors']\ncomputer_choice = random.choice(choices)\n\n# 随机颜色\ncolors = ['red', 'green', 'blue', 'yellow']\ncolor = random.choice(colors)\n```\n\n### 3.3 Scratch实现\n\n```scratch\n// 随机选择\n将 [电脑出拳] 设为 ((列表 [出拳选项] 的第 (随机取数 (1) 到 (3)) 项))\n```\n\n---"
    },
    {
      "title": "四、权重随机",
      "content": "### 4.1 基本概念\n\n权重随机：不同选项有不同的被选中概率。\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-11 | 机械手游戏进阶 | 策略性出拳 |\n| CODE3-2-03 | 太空防卫战-大招与平衡 | 道具掉落概率 |\n\n### 4.3 Python权重随机\n\n```python\nimport random\n\n# 使用random.choices()（Python 3.6+）\nresult = random.choices(\n    ['rock', 'paper', 'scissors'],\n    weights=[0.5, 0.3, 0.2],  # 50%石头, 30%布, 20%剪刀\n    k=1\n)[0]\n\n# 道具掉落概率\nitems = ['金币', '血瓶', '大招', '无']\nweights = [0.3, 0.2, 0.05, 0.45]  # 30%金币, 20%血瓶, 5%大招, 45%无\ndrop = random.choices(items, weights=weights)[0]\n```\n\n### 4.4 手动实现权重随机\n\n```python\nimport random\n\ndef weighted_choice(options, weights):\n    \"\"\"手动实现权重随机\"\"\"\n    total = sum(weights)\n    r = random.uniform(0, total)\n    cumulative = 0\n    for option, weight in zip(options, weights):\n        cumulative += weight\n        if r <= cumulative:\n            return option\n    return options[-1]\n\n# 使用\nresult = weighted_choice(['A', 'B', 'C'], [0.5, 0.3, 0.2])\n```\n\n### 4.5 Scratch权重随机\n\n```scratch\n// 权重随机实现\n将 [随机值] 设为 (随机取数 (1) 到 (100))\n如果 <(随机值) < (50)> 那么\n    将 [结果] 设为 [石头]  // 50%\n否则\n    如果 <(随机值) < (80)> 那么\n        将 [结果] 设为 [布]  // 30%\n    否则\n        将 [结果] 设为 [剪刀]  // 20%\n```\n\n### 4.6 教学话术\n\n> \"普通随机是公平的，每个选项机会一样。但有时候我们想让某些东西更容易出现，比如金币多一点，大招少一点。这就是权重随机——给每个选项设置不同的'重量'。\"\n\n---"
    },
    {
      "title": "五、随机种子",
      "content": "### 5.1 基本概念\n\n随机种子：控制随机数生成的起始状态，相同种子产生相同的随机序列。\n\n### 5.2 应用场景\n\n- 游戏存档：重现相同的随机事件\n- 调试：复现随机相关的bug\n- 测试：确保测试结果可重复\n\n### 5.3 Python实现\n\n```python\nimport random\n\n# 设置随机种子\nrandom.seed(42)\n\n# 之后的随机数序列是固定的\nprint(random.randint(1, 100))  # 总是82\nprint(random.randint(1, 100))  # 总是15\nprint(random.randint(1, 100))  # 总是4\n\n# 重新设置相同种子，序列重复\nrandom.seed(42)\nprint(random.randint(1, 100))  # 又是82\n```\n\n---"
    },
    {
      "title": "六、概率计算",
      "content": "### 6.1 基本公式\n\n```\n概率 = 有利结果数 / 总结果数\n```\n\n### 6.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-5 | 蒙特卡洛法 | 用随机模拟计算π |\n\n### 6.3 蒙特卡洛法计算π\n\n```python\nimport random\n\ndef estimate_pi(num_points):\n    \"\"\"用蒙特卡洛法估算π\"\"\"\n    inside_circle = 0\n\n    for _ in range(num_points):\n        x = random.uniform(-1, 1)\n        y = random.uniform(-1, 1)\n        if x**2 + y**2 <= 1:\n            inside_circle += 1\n\n    # π ≈ 4 × (圆内点数 / 总点数)\n    return 4 * inside_circle / num_points\n\n# 点数越多，估算越准确\nprint(estimate_pi(1000))    # 约3.1\nprint(estimate_pi(100000))  # 约3.14\nprint(estimate_pi(1000000)) # 约3.1415\n```\n\n### 6.4 教学话术\n\n> \"蒙特卡洛法很神奇——我们往正方形里随机撒点，数一数有多少点落在圆里，就能算出π！撒的点越多，算得越准。\"\n\n---"
    },
    {
      "title": "七、游戏中的随机应用",
      "content": "### 7.1 敌人生成\n\n```python\nimport random\nimport time\n\nclass EnemySpawner:\n    def __init__(self):\n        self.last_spawn = time.time()\n        self.spawn_interval = 2  # 基础间隔2秒\n\n    def should_spawn(self):\n        \"\"\"判断是否应该生成敌人\"\"\"\n        now = time.time()\n        # 添加随机性：1.5到2.5秒\n        interval = self.spawn_interval + random.uniform(-0.5, 0.5)\n        if now - self.last_spawn > interval:\n            self.last_spawn = now\n            return True\n        return False\n```\n\n### 7.2 道具掉落\n\n```python\ndef drop_item(enemy_type):\n    \"\"\"敌人死亡时掉落道具\"\"\"\n    if enemy_type == 'boss':\n        # Boss必掉好东西\n        items = ['大招', '满血', '金币x10']\n        weights = [0.3, 0.3, 0.4]\n    else:\n        # 普通敌人\n        items = ['金币', '血瓶', '无']\n        weights = [0.2, 0.1, 0.7]\n\n    return random.choices(items, weights=weights)[0]\n```\n\n### 7.3 伤害浮动\n\n```python\ndef calculate_damage(base_damage):\n    \"\"\"计算带浮动的伤害\"\"\"\n    # 基础伤害 ± 20%\n    min_damage = int(base_damage * 0.8)\n    max_damage = int(base_damage * 1.2)\n    return random.randint(min_damage, max_damage)\n\n# 示例\ndamage = calculate_damage(100)  # 80到120之间\n```\n\n---"
    },
    {
      "title": "八、教学建议",
      "content": "### 8.1 认知进阶路线\n\n```\nCODE1-4-02          CODE3-2-02          PYAI 2-3-10          PYAI 2-2-5\n基础随机     →      随机生成     →      权重随机     →      概率计算\n   ↓                   ↓                   ↓                   ↓\n 随机位置            敌人生成            策略设计            蒙特卡洛\n```\n\n### 8.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| 随机不是\"真随机\" | 解释伪随机数概念，用种子演示 |\n| 权重概念抽象 | 用\"抽奖转盘\"类比，扇形大小代表概率 |\n| 蒙特卡洛法 | 用实物演示：往纸上撒豆子 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)"
    }
  ],
  "full_content": "# 概率与随机\n\n> **用途**：概率和随机数在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n\n---\n\n## 一、随机数基础\n\n### 1.1 基本概念\n\n随机数：在指定范围内随机生成的数值，每次结果不可预测。\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-02 | 斯斯接苹果 | 苹果随机位置 |\n| CODE3-2-02 | 太空防卫战 | 敌机随机生成 |\n| PYAI 2-3-10 | 机械手游戏 | 石头剪刀布 |\n\n### 1.3 Scratch随机数\n\n```scratch\n// 生成1到10的随机整数\n(随机取数 (1) 到 (10))\n\n// 随机位置\n移到 x: (随机取数 (-200) 到 (200)) y: (随机取数 (-150) 到 (150))\n\n// 随机等待\n等待 (随机取数 (1) 到 (3)) 秒\n```\n\n### 1.4 Python随机数\n\n```python\nimport random\n\n# 随机整数（包含两端）\nnum = random.randint(1, 10)  # 1到10\n\n# 随机浮点数\nnum = random.random()  # 0.0到1.0\nnum = random.uniform(1.5, 5.5)  # 1.5到5.5\n\n# 随机选择\nchoice = random.choice(['A', 'B', 'C'])\n\n# 打乱列表\nitems = [1, 2, 3, 4, 5]\nrandom.shuffle(items)\n```\n\n### 1.5 教学话术\n\n> \"随机数就像掷骰子，每次结果都不一样。我们可以用它让游戏更有趣——敌人从不同位置出现，道具随机掉落。\"\n\n---\n\n## 二、随机位置生成\n\n### 2.1 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-02 | 斯斯接苹果 | 苹果从顶部随机位置掉落 |\n| CODE3-2-02 | 太空防卫战 | 敌机从顶部随机出现 |\n| CODE3-2-09 | 植物大战僵尸 | 僵尸从右侧随机行出现 |\n\n### 2.2 Scratch实现\n\n```scratch\n// 苹果从顶部随机位置掉落\n当作为克隆体启动时\n移到 x: (随机取数 (-200) 到 (200)) y: (180)\n重复执行直到 <(y 座标) < (-170)>\n    将 y 改变 (-5)\n删除此克隆体\n```\n\n### 2.3 Python实现\n\n```python\nimport random\n\ndef spawn_enemy(screen_width, screen_height):\n    \"\"\"在屏幕顶部随机位置生成敌人\"\"\"\n    x = random.randint(50, screen_width - 50)\n    y = 0  # 顶部\n    return x, y\n\n# 在指定行随机生成（植物大战僵尸）\ndef spawn_zombie(rows, screen_width):\n    \"\"\"在随机行生成僵尸\"\"\"\n    row = random.randint(0, rows - 1)\n    x = screen_width\n    y = row * 80 + 40  # 假设每行80像素\n    return x, y, row\n```\n\n---\n\n## 三、随机选择\n\n### 3.1 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-10 | 机械手游戏 | 电脑随机出拳 |\n| CODE2-3-01 | 猜数游戏 | 随机生成目标数 |\n\n### 3.2 等概率选择\n\n```python\nimport random\n\n# 石头剪刀布\nchoices = ['rock', 'paper', 'scissors']\ncomputer_choice = random.choice(choices)\n\n# 随机颜色\ncolors = ['red', 'green', 'blue', 'yellow']\ncolor = random.choice(colors)\n```\n\n### 3.3 Scratch实现\n\n```scratch\n// 随机选择\n将 [电脑出拳] 设为 ((列表 [出拳选项] 的第 (随机取数 (1) 到 (3)) 项))\n```\n\n---\n\n## 四、权重随机\n\n### 4.1 基本概念\n\n权重随机：不同选项有不同的被选中概率。\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-11 | 机械手游戏进阶 | 策略性出拳 |\n| CODE3-2-03 | 太空防卫战-大招与平衡 | 道具掉落概率 |\n\n### 4.3 Python权重随机\n\n```python\nimport random\n\n# 使用random.choices()（Python 3.6+）\nresult = random.choices(\n    ['rock', 'paper', 'scissors'],\n    weights=[0.5, 0.3, 0.2],  # 50%石头, 30%布, 20%剪刀\n    k=1\n)[0]\n\n# 道具掉落概率\nitems = ['金币', '血瓶', '大招', '无']\nweights = [0.3, 0.2, 0.05, 0.45]  # 30%金币, 20%血瓶, 5%大招, 45%无\ndrop = random.choices(items, weights=weights)[0]\n```\n\n### 4.4 手动实现权重随机\n\n```python\nimport random\n\ndef weighted_choice(options, weights):\n    \"\"\"手动实现权重随机\"\"\"\n    total = sum(weights)\n    r = random.uniform(0, total)\n    cumulative = 0\n    for option, weight in zip(options, weights):\n        cumulative += weight\n        if r <= cumulative:\n            return option\n    return options[-1]\n\n# 使用\nresult = weighted_choice(['A', 'B', 'C'], [0.5, 0.3, 0.2])\n```\n\n### 4.5 Scratch权重随机\n\n```scratch\n// 权重随机实现\n将 [随机值] 设为 (随机取数 (1) 到 (100))\n如果 <(随机值) < (50)> 那么\n    将 [结果] 设为 [石头]  // 50%\n否则\n    如果 <(随机值) < (80)> 那么\n        将 [结果] 设为 [布]  // 30%\n    否则\n        将 [结果] 设为 [剪刀]  // 20%\n```\n\n### 4.6 教学话术\n\n> \"普通随机是公平的，每个选项机会一样。但有时候我们想让某些东西更容易出现，比如金币多一点，大招少一点。这就是权重随机——给每个选项设置不同的'重量'。\"\n\n---\n\n## 五、随机种子\n\n### 5.1 基本概念\n\n随机种子：控制随机数生成的起始状态，相同种子产生相同的随机序列。\n\n### 5.2 应用场景\n\n- 游戏存档：重现相同的随机事件\n- 调试：复现随机相关的bug\n- 测试：确保测试结果可重复\n\n### 5.3 Python实现\n\n```python\nimport random\n\n# 设置随机种子\nrandom.seed(42)\n\n# 之后的随机数序列是固定的\nprint(random.randint(1, 100))  # 总是82\nprint(random.randint(1, 100))  # 总是15\nprint(random.randint(1, 100))  # 总是4\n\n# 重新设置相同种子，序列重复\nrandom.seed(42)\nprint(random.randint(1, 100))  # 又是82\n```\n\n---\n\n## 六、概率计算\n\n### 6.1 基本公式\n\n```\n概率 = 有利结果数 / 总结果数\n```\n\n### 6.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-5 | 蒙特卡洛法 | 用随机模拟计算π |\n\n### 6.3 蒙特卡洛法计算π\n\n```python\nimport random\n\ndef estimate_pi(num_points):\n    \"\"\"用蒙特卡洛法估算π\"\"\"\n    inside_circle = 0\n\n    for _ in range(num_points):\n        x = random.uniform(-1, 1)\n        y = random.uniform(-1, 1)\n        if x**2 + y**2 <= 1:\n            inside_circle += 1\n\n    # π ≈ 4 × (圆内点数 / 总点数)\n    return 4 * inside_circle / num_points\n\n# 点数越多，估算越准确\nprint(estimate_pi(1000))    # 约3.1\nprint(estimate_pi(100000))  # 约3.14\nprint(estimate_pi(1000000)) # 约3.1415\n```\n\n### 6.4 教学话术\n\n> \"蒙特卡洛法很神奇——我们往正方形里随机撒点，数一数有多少点落在圆里，就能算出π！撒的点越多，算得越准。\"\n\n---\n\n## 七、游戏中的随机应用\n\n### 7.1 敌人生成\n\n```python\nimport random\nimport time\n\nclass EnemySpawner:\n    def __init__(self):\n        self.last_spawn = time.time()\n        self.spawn_interval = 2  # 基础间隔2秒\n\n    def should_spawn(self):\n        \"\"\"判断是否应该生成敌人\"\"\"\n        now = time.time()\n        # 添加随机性：1.5到2.5秒\n        interval = self.spawn_interval + random.uniform(-0.5, 0.5)\n        if now - self.last_spawn > interval:\n            self.last_spawn = now\n            return True\n        return False\n```\n\n### 7.2 道具掉落\n\n```python\ndef drop_item(enemy_type):\n    \"\"\"敌人死亡时掉落道具\"\"\"\n    if enemy_type == 'boss':\n        # Boss必掉好东西\n        items = ['大招', '满血', '金币x10']\n        weights = [0.3, 0.3, 0.4]\n    else:\n        # 普通敌人\n        items = ['金币', '血瓶', '无']\n        weights = [0.2, 0.1, 0.7]\n\n    return random.choices(items, weights=weights)[0]\n```\n\n### 7.3 伤害浮动\n\n```python\ndef calculate_damage(base_damage):\n    \"\"\"计算带浮动的伤害\"\"\"\n    # 基础伤害 ± 20%\n    min_damage = int(base_damage * 0.8)\n    max_damage = int(base_damage * 1.2)\n    return random.randint(min_damage, max_damage)\n\n# 示例\ndamage = calculate_damage(100)  # 80到120之间\n```\n\n---\n\n## 八、教学建议\n\n### 8.1 认知进阶路线\n\n```\nCODE1-4-02          CODE3-2-02          PYAI 2-3-10          PYAI 2-2-5\n基础随机     →      随机生成     →      权重随机     →      概率计算\n   ↓                   ↓                   ↓                   ↓\n 随机位置            敌人生成            策略设计            蒙特卡洛\n```\n\n### 8.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| 随机不是\"真随机\" | 解释伪随机数概念，用种子演示 |\n| 权重概念抽象 | 用\"抽奖转盘\"类比，扇形大小代表概率 |\n| 蒙特卡洛法 | 用实物演示：往纸上撒豆子 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)\n"
}