{
  "title": "计算机视觉",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\AI知识库\\计算机视觉.md",
  "sections": [
    {
      "title": "一、OpenCV基础",
      "content": "### 1.1 库简介\n\nOpenCV (Open Source Computer Vision Library) 是最流行的计算机视觉库，支持图像处理、视频分析、物体检测等功能。\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-6 | 智能门禁(1) | 摄像头采集 |\n| PYAI 2-4-1 | 视频基础 | VideoCapture |\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n\n### 1.3 安装\n\n```bash\npip install opencv-python\n```\n\n### 1.4 基本结构\n\n```python\nimport cv2\nimport numpy as np\n\n# 图像是NumPy数组\n# 形状: (高度, 宽度, 通道数)\n# 通道顺序: BGR（不是RGB！）\n```\n\n---"
    },
    {
      "title": "二、摄像头操作",
      "content": "### 2.1 打开摄像头\n\n```python\nimport cv2\n\n# 打开默认摄像头（索引0）\ncap = cv2.VideoCapture(0)\n\n# 检查是否成功打开\nif not cap.isOpened():\n    print(\"无法打开摄像头\")\n    exit()\n\nwhile True:\n    # 读取一帧\n    ret, frame = cap.read()\n    if not ret:\n        print(\"无法读取帧\")\n        break\n\n    # 显示画面\n    cv2.imshow('Camera', frame)\n\n    # 按q退出\n    if cv2.waitKey(1) & 0xFF == ord('q'):\n        break\n\n# 释放资源（重要！）\ncap.release()\ncv2.destroyAllWindows()\n```\n\n### 2.2 设置摄像头参数\n\n```python\n# 设置分辨率\ncap.set(cv2.CAP_PROP_FRAME_WIDTH, 640)\ncap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)\n\n# 获取帧率\nfps = cap.get(cv2.CAP_PROP_FPS)\n```\n\n### 2.3 禁忌提醒\n\n| 禁忌 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 忘记释放摄像头 | 下次无法使用 | 程序结束前调用`cap.release()` |\n| ❌ 不检查ret返回值 | 程序崩溃 | 始终检查`if not ret: break` |\n\n---"
    },
    {
      "title": "三、图像读写",
      "content": "### 3.1 读取图像\n\n```python\nimport cv2\n\n# 读取彩色图像\nimg = cv2.imread('image.jpg')\n\n# 读取灰度图像\ngray = cv2.imread('image.jpg', cv2.IMREAD_GRAYSCALE)\n\n# 检查是否成功读取\nif img is None:\n    print(\"无法读取图像\")\n```\n\n### 3.2 保存图像\n\n```python\n# 保存图像\ncv2.imwrite('output.jpg', img)\n\n# 指定质量（JPEG）\ncv2.imwrite('output.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 90])\n```\n\n### 3.3 显示图像\n\n```python\n# 显示图像\ncv2.imshow('Window Name', img)\ncv2.waitKey(0)  # 等待按键\ncv2.destroyAllWindows()\n```\n\n---"
    },
    {
      "title": "四、颜色空间转换",
      "content": "### 4.1 BGR与RGB\n\n```python\n# OpenCV使用BGR，其他库（如matplotlib）使用RGB\n# BGR → RGB\nrgb_img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\n\n# RGB → BGR\nbgr_img = cv2.cvtColor(rgb_img, cv2.COLOR_RGB2BGR)\n```\n\n### 4.2 灰度转换\n\n```python\n# 彩色 → 灰度\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n```\n\n### 4.3 HSV颜色空间\n\n```python\n# BGR → HSV（用于颜色检测）\nhsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)\n\n# HSV范围\n# H: 0-179（色调）\n# S: 0-255（饱和度）\n# V: 0-255（明度）\n```\n\n### 4.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-1 | 眼控开关 | BGR→RGB转换 |\n| PYAI 2-4-3 | 图像编辑1 | 灰度转换 |\n\n---"
    },
    {
      "title": "五、图像绘制",
      "content": "### 5.1 基本绘制函数\n\n```python\nimport cv2\nimport numpy as np\n\n# 创建空白图像\nimg = np.zeros((400, 600, 3), dtype=np.uint8)\n\n# 画线\ncv2.line(img, (0, 0), (300, 200), (255, 0, 0), 2)\n# 参数: 图像, 起点, 终点, 颜色(BGR), 线宽\n\n# 画矩形\ncv2.rectangle(img, (50, 50), (200, 150), (0, 255, 0), 2)\n# 参数: 图像, 左上角, 右下角, 颜色, 线宽（-1为填充）\n\n# 画圆\ncv2.circle(img, (300, 200), 50, (0, 0, 255), -1)\n# 参数: 图像, 圆心, 半径, 颜色, 线宽（-1为填充）\n\n# 写文字\ncv2.putText(img, 'Hello OpenCV', (50, 300),\n            cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 255, 255), 2)\n# 参数: 图像, 文字, 位置, 字体, 大小, 颜色, 线宽\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-9 | 手势绘画板 | 绘制轨迹 |\n| PYAI 2-4-10 | 虚拟墨镜 | 绘制装饰 |\n\n---"
    },
    {
      "title": "六、像素操作",
      "content": "### 6.1 访问像素\n\n```python\n# 获取像素值（BGR）\npixel = img[100, 200]  # [B, G, R]\nb, g, r = img[100, 200]\n\n# 设置像素值\nimg[100, 200] = [255, 255, 255]  # 白色\n```\n\n### 6.2 ROI（感兴趣区域）\n\n```python\n# 提取ROI\nroi = img[50:150, 100:200]  # [y1:y2, x1:x2]\n\n# 替换ROI\nimg[50:150, 100:200] = another_img\n```\n\n### 6.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n| PYAI 2-4-4 | 图像编辑2 | ROI替换 |\n\n---"
    },
    {
      "title": "七、图像处理",
      "content": "### 7.1 调整大小\n\n```python\n# 调整大小\nresized = cv2.resize(img, (300, 200))  # (宽, 高)\n\n# 按比例缩放\nresized = cv2.resize(img, None, fx=0.5, fy=0.5)\n```\n\n### 7.2 亮度调整\n\n```python\n# 增加亮度\nbright = cv2.add(img, np.array([50, 50, 50]))\n\n# 使用NumPy（注意溢出）\nbright = np.clip(img.astype(np.int16) + 50, 0, 255).astype(np.uint8)\n```\n\n### 7.3 滤波降噪\n\n```python\n# 均值滤波\nblur = cv2.blur(img, (5, 5))\n\n# 高斯滤波（推荐）\nblur = cv2.GaussianBlur(img, (5, 5), 0)\n\n# 中值滤波（去除椒盐噪声）\nblur = cv2.medianBlur(img, 5)\n```\n\n### 7.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-4 | 图像编辑2 | resize |\n| PYAI 2-4-5 | 滤波降噪 | 三种滤波 |\n\n---"
    },
    {
      "title": "八、二值化与阈值",
      "content": "### 8.1 简单阈值\n\n```python\n# 简单阈值\nret, binary = cv2.threshold(gray, 127, 255, cv2.THRESH_BINARY)\n# 参数: 灰度图, 阈值, 最大值, 类型\n```\n\n### 8.2 自适应阈值\n\n```python\n# 自适应阈值（处理光照不均）\nbinary = cv2.adaptiveThreshold(gray, 255,\n    cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\n    cv2.THRESH_BINARY, 11, 2)\n```\n\n### 8.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-6 | 文件扫描 | 二值化处理 |\n\n---"
    },
    {
      "title": "九、人像分割",
      "content": "### 9.1 MediaPipe Selfie Segmentation\n\n```python\nimport cv2\nimport mediapipe as mp\n\nmp_selfie = mp.solutions.selfie_segmentation\nselfie_seg = mp_selfie.SelfieSegmentation(model_selection=1)\n\ncap = cv2.VideoCapture(0)\n\nwhile True:\n    ret, frame = cap.read()\n    if not ret:\n        break\n\n    # 转换颜色空间\n    rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)\n\n    # 分割\n    results = selfie_seg.process(rgb)\n\n    # 获取掩膜\n    mask = results.segmentation_mask\n    mask = (mask > 0.5).astype(np.uint8) * 255\n\n    # 应用掩膜\n    fg = cv2.bitwise_and(frame, frame, mask=mask)\n\n    cv2.imshow('Segmentation', fg)\n    if cv2.waitKey(1) & 0xFF == ord('q'):\n        break\n\ncap.release()\ncv2.destroyAllWindows()\n```\n\n### 9.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-8 | 人像分割 | 背景替换 |\n\n---"
    },
    {
      "title": "十、常见错误与禁忌",
      "content": "| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ BGR/RGB混淆 | 颜色显示错误 | OpenCV用BGR，MediaPipe用RGB |\n| ❌ 忘记释放资源 | 摄像头被占用 | 始终调用`cap.release()` |\n| ❌ 不检查None | 程序崩溃 | 检查`img is None`和`ret` |\n| ❌ 像素值溢出 | 颜色异常 | 使用`np.clip()`或`cv2.add()` |\n\n---"
    },
    {
      "title": "十一、教学建议",
      "content": "### 11.1 认知进阶路线\n\n```\nPYAI 2-4-1          PYAI 2-4-3          PYAI 2-4-5          PYAI 2-4-8\n摄像头基础   →      像素操作     →      滤波处理     →      人像分割\n   ↓                   ↓                   ↓                   ↓\n VideoCapture        NumPy数组           卷积核              掩膜应用\n```\n\n### 11.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| BGR顺序 | 用\"蓝绿红\"口诀记忆 |\n| 坐标顺序 | 强调`img[y, x]`，先行后列 |\n| 滤波原理 | 用\"取平均\"类比解释卷积 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[AI知识总表.md](AI知识总表.md)、[人脸识别.md](人脸识别.md)"
    }
  ],
  "full_content": "# 计算机视觉\n\n> **用途**：OpenCV和图像处理在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/PythonAI/\n\n---\n\n## 一、OpenCV基础\n\n### 1.1 库简介\n\nOpenCV (Open Source Computer Vision Library) 是最流行的计算机视觉库，支持图像处理、视频分析、物体检测等功能。\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-4-6 | 智能门禁(1) | 摄像头采集 |\n| PYAI 2-4-1 | 视频基础 | VideoCapture |\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n\n### 1.3 安装\n\n```bash\npip install opencv-python\n```\n\n### 1.4 基本结构\n\n```python\nimport cv2\nimport numpy as np\n\n# 图像是NumPy数组\n# 形状: (高度, 宽度, 通道数)\n# 通道顺序: BGR（不是RGB！）\n```\n\n---\n\n## 二、摄像头操作\n\n### 2.1 打开摄像头\n\n```python\nimport cv2\n\n# 打开默认摄像头（索引0）\ncap = cv2.VideoCapture(0)\n\n# 检查是否成功打开\nif not cap.isOpened():\n    print(\"无法打开摄像头\")\n    exit()\n\nwhile True:\n    # 读取一帧\n    ret, frame = cap.read()\n    if not ret:\n        print(\"无法读取帧\")\n        break\n\n    # 显示画面\n    cv2.imshow('Camera', frame)\n\n    # 按q退出\n    if cv2.waitKey(1) & 0xFF == ord('q'):\n        break\n\n# 释放资源（重要！）\ncap.release()\ncv2.destroyAllWindows()\n```\n\n### 2.2 设置摄像头参数\n\n```python\n# 设置分辨率\ncap.set(cv2.CAP_PROP_FRAME_WIDTH, 640)\ncap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)\n\n# 获取帧率\nfps = cap.get(cv2.CAP_PROP_FPS)\n```\n\n### 2.3 禁忌提醒\n\n| 禁忌 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 忘记释放摄像头 | 下次无法使用 | 程序结束前调用`cap.release()` |\n| ❌ 不检查ret返回值 | 程序崩溃 | 始终检查`if not ret: break` |\n\n---\n\n## 三、图像读写\n\n### 3.1 读取图像\n\n```python\nimport cv2\n\n# 读取彩色图像\nimg = cv2.imread('image.jpg')\n\n# 读取灰度图像\ngray = cv2.imread('image.jpg', cv2.IMREAD_GRAYSCALE)\n\n# 检查是否成功读取\nif img is None:\n    print(\"无法读取图像\")\n```\n\n### 3.2 保存图像\n\n```python\n# 保存图像\ncv2.imwrite('output.jpg', img)\n\n# 指定质量（JPEG）\ncv2.imwrite('output.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 90])\n```\n\n### 3.3 显示图像\n\n```python\n# 显示图像\ncv2.imshow('Window Name', img)\ncv2.waitKey(0)  # 等待按键\ncv2.destroyAllWindows()\n```\n\n---\n\n## 四、颜色空间转换\n\n### 4.1 BGR与RGB\n\n```python\n# OpenCV使用BGR，其他库（如matplotlib）使用RGB\n# BGR → RGB\nrgb_img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\n\n# RGB → BGR\nbgr_img = cv2.cvtColor(rgb_img, cv2.COLOR_RGB2BGR)\n```\n\n### 4.2 灰度转换\n\n```python\n# 彩色 → 灰度\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n```\n\n### 4.3 HSV颜色空间\n\n```python\n# BGR → HSV（用于颜色检测）\nhsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)\n\n# HSV范围\n# H: 0-179（色调）\n# S: 0-255（饱和度）\n# V: 0-255（明度）\n```\n\n### 4.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-1 | 眼控开关 | BGR→RGB转换 |\n| PYAI 2-4-3 | 图像编辑1 | 灰度转换 |\n\n---\n\n## 五、图像绘制\n\n### 5.1 基本绘制函数\n\n```python\nimport cv2\nimport numpy as np\n\n# 创建空白图像\nimg = np.zeros((400, 600, 3), dtype=np.uint8)\n\n# 画线\ncv2.line(img, (0, 0), (300, 200), (255, 0, 0), 2)\n# 参数: 图像, 起点, 终点, 颜色(BGR), 线宽\n\n# 画矩形\ncv2.rectangle(img, (50, 50), (200, 150), (0, 255, 0), 2)\n# 参数: 图像, 左上角, 右下角, 颜色, 线宽（-1为填充）\n\n# 画圆\ncv2.circle(img, (300, 200), 50, (0, 0, 255), -1)\n# 参数: 图像, 圆心, 半径, 颜色, 线宽（-1为填充）\n\n# 写文字\ncv2.putText(img, 'Hello OpenCV', (50, 300),\n            cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 255, 255), 2)\n# 参数: 图像, 文字, 位置, 字体, 大小, 颜色, 线宽\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-3-9 | 手势绘画板 | 绘制轨迹 |\n| PYAI 2-4-10 | 虚拟墨镜 | 绘制装饰 |\n\n---\n\n## 六、像素操作\n\n### 6.1 访问像素\n\n```python\n# 获取像素值（BGR）\npixel = img[100, 200]  # [B, G, R]\nb, g, r = img[100, 200]\n\n# 设置像素值\nimg[100, 200] = [255, 255, 255]  # 白色\n```\n\n### 6.2 ROI（感兴趣区域）\n\n```python\n# 提取ROI\nroi = img[50:150, 100:200]  # [y1:y2, x1:x2]\n\n# 替换ROI\nimg[50:150, 100:200] = another_img\n```\n\n### 6.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-3 | 图像编辑1 | 像素操作 |\n| PYAI 2-4-4 | 图像编辑2 | ROI替换 |\n\n---\n\n## 七、图像处理\n\n### 7.1 调整大小\n\n```python\n# 调整大小\nresized = cv2.resize(img, (300, 200))  # (宽, 高)\n\n# 按比例缩放\nresized = cv2.resize(img, None, fx=0.5, fy=0.5)\n```\n\n### 7.2 亮度调整\n\n```python\n# 增加亮度\nbright = cv2.add(img, np.array([50, 50, 50]))\n\n# 使用NumPy（注意溢出）\nbright = np.clip(img.astype(np.int16) + 50, 0, 255).astype(np.uint8)\n```\n\n### 7.3 滤波降噪\n\n```python\n# 均值滤波\nblur = cv2.blur(img, (5, 5))\n\n# 高斯滤波（推荐）\nblur = cv2.GaussianBlur(img, (5, 5), 0)\n\n# 中值滤波（去除椒盐噪声）\nblur = cv2.medianBlur(img, 5)\n```\n\n### 7.4 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-4 | 图像编辑2 | resize |\n| PYAI 2-4-5 | 滤波降噪 | 三种滤波 |\n\n---\n\n## 八、二值化与阈值\n\n### 8.1 简单阈值\n\n```python\n# 简单阈值\nret, binary = cv2.threshold(gray, 127, 255, cv2.THRESH_BINARY)\n# 参数: 灰度图, 阈值, 最大值, 类型\n```\n\n### 8.2 自适应阈值\n\n```python\n# 自适应阈值（处理光照不均）\nbinary = cv2.adaptiveThreshold(gray, 255,\n    cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\n    cv2.THRESH_BINARY, 11, 2)\n```\n\n### 8.3 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-6 | 文件扫描 | 二值化处理 |\n\n---\n\n## 九、人像分割\n\n### 9.1 MediaPipe Selfie Segmentation\n\n```python\nimport cv2\nimport mediapipe as mp\n\nmp_selfie = mp.solutions.selfie_segmentation\nselfie_seg = mp_selfie.SelfieSegmentation(model_selection=1)\n\ncap = cv2.VideoCapture(0)\n\nwhile True:\n    ret, frame = cap.read()\n    if not ret:\n        break\n\n    # 转换颜色空间\n    rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)\n\n    # 分割\n    results = selfie_seg.process(rgb)\n\n    # 获取掩膜\n    mask = results.segmentation_mask\n    mask = (mask > 0.5).astype(np.uint8) * 255\n\n    # 应用掩膜\n    fg = cv2.bitwise_and(frame, frame, mask=mask)\n\n    cv2.imshow('Segmentation', fg)\n    if cv2.waitKey(1) & 0xFF == ord('q'):\n        break\n\ncap.release()\ncv2.destroyAllWindows()\n```\n\n### 9.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-4-8 | 人像分割 | 背景替换 |\n\n---\n\n## 十、常见错误与禁忌\n\n| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ BGR/RGB混淆 | 颜色显示错误 | OpenCV用BGR，MediaPipe用RGB |\n| ❌ 忘记释放资源 | 摄像头被占用 | 始终调用`cap.release()` |\n| ❌ 不检查None | 程序崩溃 | 检查`img is None`和`ret` |\n| ❌ 像素值溢出 | 颜色异常 | 使用`np.clip()`或`cv2.add()` |\n\n---\n\n## 十一、教学建议\n\n### 11.1 认知进阶路线\n\n```\nPYAI 2-4-1          PYAI 2-4-3          PYAI 2-4-5          PYAI 2-4-8\n摄像头基础   →      像素操作     →      滤波处理     →      人像分割\n   ↓                   ↓                   ↓                   ↓\n VideoCapture        NumPy数组           卷积核              掩膜应用\n```\n\n### 11.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| BGR顺序 | 用\"蓝绿红\"口诀记忆 |\n| 坐标顺序 | 强调`img[y, x]`，先行后列 |\n| 滤波原理 | 用\"取平均\"类比解释卷积 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[AI知识总表.md](AI知识总表.md)、[人脸识别.md](人脸识别.md)\n"
}