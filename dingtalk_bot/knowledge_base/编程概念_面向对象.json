{
  "title": "面向对象编程",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\编程概念库\\面向对象.md",
  "sections": [
    {
      "title": "一、面向对象基础",
      "content": "### 概念定义\n面向对象编程（OOP）是一种编程范式，将数据和操作数据的方法封装在一起，形成\"对象\"。通过类（Class）定义对象的模板，通过实例化创建具体的对象。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | class定义 | 实例创建、self、__init__ |\n| PYAI 2-2-3 | 类实例应用 | Pygame综合 |\n| PYAI 2-2-6 | 类属性控制 | 随机模块、for循环高级用法 |\n| MP1-L4 | 类与实例(1) | OOP基础 |\n| MP1-L5 | 类与实例(2) | self和__init__ |\n\n---"
    },
    {
      "title": "二、类的定义与实例化",
      "content": "### 2.1 基本类定义\n\n```python\n# 定义一个简单的类\nclass Dog:\n    pass  # 空类\n\n# 创建实例\nmy_dog = Dog()\n```\n\n### 2.2 带属性的类\n\n```python\nclass Dog:\n    def __init__(self, name, age):\n        self.name = name    # 实例属性\n        self.age = age      # 实例属性\n\n# 创建实例\ndog1 = Dog(\"旺财\", 3)\ndog2 = Dog(\"小黑\", 5)\n\n# 访问属性\nprint(dog1.name)  # 输出: 旺财\nprint(dog2.age)   # 输出: 5\n```\n\n### 教学要点\n- 类是\"模板\"，实例是\"具体对象\"\n- 用饼干模具比喻：类是模具，饼干是实例\n- 每个实例有自己独立的属性值\n\n---"
    },
    {
      "title": "三、self关键字",
      "content": "### 概念定义\n`self`代表类的实例本身，用于在类的方法中访问实例的属性和其他方法。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | self | 实例自身引用 |\n| MP1-L5 | self | 类方法中的self |\n\n### Python示例\n```python\nclass Dog:\n    def __init__(self, name):\n        self.name = name    # self.name是实例属性\n\n    def bark(self):\n        print(f\"{self.name}在叫: 汪汪!\")\n\n    def introduce(self):\n        print(f\"我是{self.name}\")\n\n# 使用\ndog = Dog(\"旺财\")\ndog.bark()        # 输出: 旺财在叫: 汪汪!\ndog.introduce()   # 输出: 我是旺财\n```\n\n### 教学要点\n- `self`是方法的第一个参数，但调用时不需要传递\n- `self.属性名`访问实例属性\n- `self.方法名()`调用实例方法\n\n---"
    },
    {
      "title": "四、__init__方法",
      "content": "### 概念定义\n`__init__`是构造方法，在创建实例时自动调用，用于初始化实例的属性。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | __init__ | 构造方法 |\n| MP1-L5 | __init__ | 初始化方法 |\n\n### Python示例\n```python\nclass Player:\n    def __init__(self, name, health=100):\n        self.name = name\n        self.health = health\n        self.score = 0      # 默认值\n        print(f\"玩家 {name} 已创建!\")\n\n# 创建实例时自动调用__init__\nplayer1 = Player(\"勇士\")        # 输出: 玩家 勇士 已创建!\nplayer2 = Player(\"法师\", 80)    # 输出: 玩家 法师 已创建!\n\nprint(player1.health)  # 100（默认值）\nprint(player2.health)  # 80（传入的值）\n```\n\n---"
    },
    {
      "title": "五、实例方法",
      "content": "### 概念定义\n定义在类中的函数，用于操作实例的属性或执行特定行为。\n\n### Python示例\n```python\nclass Player:\n    def __init__(self, name, health=100):\n        self.name = name\n        self.health = health\n        self.is_alive = True\n\n    def take_damage(self, damage):\n        \"\"\"受到伤害\"\"\"\n        self.health -= damage\n        print(f\"{self.name}受到{damage}点伤害，剩余血量: {self.health}\")\n        if self.health <= 0:\n            self.die()\n\n    def heal(self, amount):\n        \"\"\"治疗\"\"\"\n        self.health += amount\n        print(f\"{self.name}恢复{amount}点血量，当前血量: {self.health}\")\n\n    def die(self):\n        \"\"\"死亡\"\"\"\n        self.is_alive = False\n        print(f\"{self.name}已阵亡!\")\n\n# 使用\nplayer = Player(\"勇士\")\nplayer.take_damage(30)   # 勇士受到30点伤害，剩余血量: 70\nplayer.heal(20)          # 勇士恢复20点血量，当前血量: 90\nplayer.take_damage(100)  # 勇士受到100点伤害，剩余血量: -10\n                         # 勇士已阵亡!\n```\n\n---"
    },
    {
      "title": "六、类在游戏开发中的应用",
      "content": "### 6.1 Pygame中的类应用\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-3 | 弹幕类 | `class Danmaku:` |\n| PYAI 2-2-6 | 星星类 | 类属性控制 |\n| PYAI 2-2-7 | 游戏角色类 | 按键交互、碰撞检测 |\n\n#### 弹幕游戏示例\n```python\nimport pygame\nimport random\n\nclass Danmaku:\n    def __init__(self, text, y):\n        self.text = text\n        self.x = 800           # 从右边开始\n        self.y = y\n        self.speed = random.randint(2, 5)\n        self.color = (random.randint(0, 255),\n                      random.randint(0, 255),\n                      random.randint(0, 255))\n\n    def update(self):\n        \"\"\"更新位置\"\"\"\n        self.x -= self.speed\n\n    def draw(self, screen, font):\n        \"\"\"绘制弹幕\"\"\"\n        text_surface = font.render(self.text, True, self.color)\n        screen.blit(text_surface, (self.x, self.y))\n\n    def is_off_screen(self):\n        \"\"\"检查是否离开屏幕\"\"\"\n        return self.x < -200\n\n# 使用\ndanmakus = []\ndanmakus.append(Danmaku(\"Hello!\", 100))\ndanmakus.append(Danmaku(\"World!\", 200))\n\n# 游戏循环中\nfor danmaku in danmakus[:]:\n    danmaku.update()\n    danmaku.draw(screen, font)\n    if danmaku.is_off_screen():\n        danmakus.remove(danmaku)\n```\n\n### 6.2 星星类示例\n\n```python\nimport pygame\nimport random\n\nclass Star:\n    def __init__(self):\n        self.x = random.randint(0, 800)\n        self.y = random.randint(0, 600)\n        self.size = random.randint(1, 3)\n        self.speed = random.uniform(0.5, 2)\n        self.brightness = random.randint(100, 255)\n\n    def update(self):\n        \"\"\"星星闪烁效果\"\"\"\n        self.brightness += random.randint(-10, 10)\n        self.brightness = max(100, min(255, self.brightness))\n\n    def draw(self, screen):\n        color = (self.brightness, self.brightness, self.brightness)\n        pygame.draw.circle(screen, color, (int(self.x), int(self.y)), self.size)\n\n# 创建100颗星星\nstars = [Star() for _ in range(100)]\n\n# 游戏循环中\nfor star in stars:\n    star.update()\n    star.draw(screen)\n```\n\n---"
    },
    {
      "title": "七、MicroPython中的类应用",
      "content": "### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| MP1-L6 | 硬件驱动封装 | NovaMP库使用 |\n\n### NovaMP库类示例\n```python\nfrom novaMP import LED, Button, SG90\n\n# LED类使用\nled = LED(2)\nled.test()              # 测试方法\nled.fill((255, 0, 0))   # 设置颜色\nled.write()             # 更新显示\n\n# Button类使用\nbutton = Button(4)\nif button.is_pressed():\n    print(\"按钮被按下\")\n\n# SG90舵机类使用\nservo = SG90(5)\nservo.angle(90)         # 转到90度\n```\n\n### 自定义硬件类\n```python\nclass SmartLight:\n    def __init__(self, led_pin, sensor_pin):\n        self.led = LED(led_pin)\n        self.sensor = ADC(Pin(sensor_pin))\n        self.threshold = 500\n\n    def auto_control(self):\n        \"\"\"根据光线自动控制\"\"\"\n        light_value = self.sensor.read()\n        if light_value < self.threshold:\n            self.led.fill((255, 255, 255))  # 开灯\n        else:\n            self.led.fill((0, 0, 0))        # 关灯\n        self.led.write()\n\n# 使用\nsmart_light = SmartLight(4, 34)\nwhile True:\n    smart_light.auto_control()\n    time.sleep(0.5)\n```\n\n---"
    },
    {
      "title": "八、类的进阶概念",
      "content": "### 8.1 类属性 vs 实例属性\n\n```python\nclass Player:\n    # 类属性（所有实例共享）\n    game_name = \"冒险游戏\"\n    player_count = 0\n\n    def __init__(self, name):\n        # 实例属性（每个实例独有）\n        self.name = name\n        Player.player_count += 1\n\n# 类属性通过类名访问\nprint(Player.game_name)  # 冒险游戏\n\n# 创建实例\np1 = Player(\"勇士\")\np2 = Player(\"法师\")\n\nprint(Player.player_count)  # 2（类属性被修改）\nprint(p1.name)              # 勇士（实例属性）\nprint(p2.name)              # 法师（实例属性）\n```\n\n### 8.2 私有属性（约定）\n\n```python\nclass BankAccount:\n    def __init__(self, balance):\n        self._balance = balance  # 单下划线：约定为私有\n\n    def deposit(self, amount):\n        if amount > 0:\n            self._balance += amount\n\n    def get_balance(self):\n        return self._balance\n\naccount = BankAccount(1000)\naccount.deposit(500)\nprint(account.get_balance())  # 1500\n```\n\n---"
    },
    {
      "title": "九、OOP进阶路线",
      "content": "```\nPYAI 2-2-1          MP1-L4/L5          PYAI 2-2-3          PYAI 2-2-6\nclass定义    →      self/__init__  →   类实例应用    →     类属性控制\n   ↓                    ↓                  ↓                   ↓\n 类模板             初始化方法          游戏对象            共享属性\n```\n\n---"
    },
    {
      "title": "十、常见错误与禁忌",
      "content": "| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 忘记self参数 | TypeError | 方法第一个参数必须是self |\n| ❌ 忘记self.访问属性 | NameError | 用self.属性名访问实例属性 |\n| ❌ __init__写成__init | 不会自动调用 | 注意双下划线 |\n| ❌ 修改类属性影响所有实例 | 意外行为 | 区分类属性和实例属性 |\n| ❌ 在类外直接访问私有属性 | 破坏封装 | 通过方法访问 |\n\n### 常见错误示例\n```python\n# ❌ 错误：忘记self\nclass Dog:\n    def __init__(name):  # 缺少self\n        name = name      # 这是局部变量，不是实例属性\n\n# ✅ 正确\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n# ❌ 错误：忘记self.\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n    def bark(self):\n        print(f\"{name}在叫\")  # NameError: name未定义\n\n# ✅ 正确\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n    def bark(self):\n        print(f\"{self.name}在叫\")  # 使用self.name\n```\n\n---\n\n**维护者**：知识库管理员\n**数据来源**：萃取报告/PythonAI/\n**整合原则**：基于现有萃取报告，不压缩删减"
    }
  ],
  "full_content": "# 面向对象编程\n\n> **用途**：跨课程面向对象编程（OOP）概念详细说明\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/PythonAI/\n> **整合原则**：基于现有萃取报告，不压缩删减\n\n---\n\n## 一、面向对象基础\n\n### 概念定义\n面向对象编程（OOP）是一种编程范式，将数据和操作数据的方法封装在一起，形成\"对象\"。通过类（Class）定义对象的模板，通过实例化创建具体的对象。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | class定义 | 实例创建、self、__init__ |\n| PYAI 2-2-3 | 类实例应用 | Pygame综合 |\n| PYAI 2-2-6 | 类属性控制 | 随机模块、for循环高级用法 |\n| MP1-L4 | 类与实例(1) | OOP基础 |\n| MP1-L5 | 类与实例(2) | self和__init__ |\n\n---\n\n## 二、类的定义与实例化\n\n### 2.1 基本类定义\n\n```python\n# 定义一个简单的类\nclass Dog:\n    pass  # 空类\n\n# 创建实例\nmy_dog = Dog()\n```\n\n### 2.2 带属性的类\n\n```python\nclass Dog:\n    def __init__(self, name, age):\n        self.name = name    # 实例属性\n        self.age = age      # 实例属性\n\n# 创建实例\ndog1 = Dog(\"旺财\", 3)\ndog2 = Dog(\"小黑\", 5)\n\n# 访问属性\nprint(dog1.name)  # 输出: 旺财\nprint(dog2.age)   # 输出: 5\n```\n\n### 教学要点\n- 类是\"模板\"，实例是\"具体对象\"\n- 用饼干模具比喻：类是模具，饼干是实例\n- 每个实例有自己独立的属性值\n\n---\n\n## 三、self关键字\n\n### 概念定义\n`self`代表类的实例本身，用于在类的方法中访问实例的属性和其他方法。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | self | 实例自身引用 |\n| MP1-L5 | self | 类方法中的self |\n\n### Python示例\n```python\nclass Dog:\n    def __init__(self, name):\n        self.name = name    # self.name是实例属性\n\n    def bark(self):\n        print(f\"{self.name}在叫: 汪汪!\")\n\n    def introduce(self):\n        print(f\"我是{self.name}\")\n\n# 使用\ndog = Dog(\"旺财\")\ndog.bark()        # 输出: 旺财在叫: 汪汪!\ndog.introduce()   # 输出: 我是旺财\n```\n\n### 教学要点\n- `self`是方法的第一个参数，但调用时不需要传递\n- `self.属性名`访问实例属性\n- `self.方法名()`调用实例方法\n\n---\n\n## 四、__init__方法\n\n### 概念定义\n`__init__`是构造方法，在创建实例时自动调用，用于初始化实例的属性。\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | __init__ | 构造方法 |\n| MP1-L5 | __init__ | 初始化方法 |\n\n### Python示例\n```python\nclass Player:\n    def __init__(self, name, health=100):\n        self.name = name\n        self.health = health\n        self.score = 0      # 默认值\n        print(f\"玩家 {name} 已创建!\")\n\n# 创建实例时自动调用__init__\nplayer1 = Player(\"勇士\")        # 输出: 玩家 勇士 已创建!\nplayer2 = Player(\"法师\", 80)    # 输出: 玩家 法师 已创建!\n\nprint(player1.health)  # 100（默认值）\nprint(player2.health)  # 80（传入的值）\n```\n\n---\n\n## 五、实例方法\n\n### 概念定义\n定义在类中的函数，用于操作实例的属性或执行特定行为。\n\n### Python示例\n```python\nclass Player:\n    def __init__(self, name, health=100):\n        self.name = name\n        self.health = health\n        self.is_alive = True\n\n    def take_damage(self, damage):\n        \"\"\"受到伤害\"\"\"\n        self.health -= damage\n        print(f\"{self.name}受到{damage}点伤害，剩余血量: {self.health}\")\n        if self.health <= 0:\n            self.die()\n\n    def heal(self, amount):\n        \"\"\"治疗\"\"\"\n        self.health += amount\n        print(f\"{self.name}恢复{amount}点血量，当前血量: {self.health}\")\n\n    def die(self):\n        \"\"\"死亡\"\"\"\n        self.is_alive = False\n        print(f\"{self.name}已阵亡!\")\n\n# 使用\nplayer = Player(\"勇士\")\nplayer.take_damage(30)   # 勇士受到30点伤害，剩余血量: 70\nplayer.heal(20)          # 勇士恢复20点血量，当前血量: 90\nplayer.take_damage(100)  # 勇士受到100点伤害，剩余血量: -10\n                         # 勇士已阵亡!\n```\n\n---\n\n## 六、类在游戏开发中的应用\n\n### 6.1 Pygame中的类应用\n\n#### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-3 | 弹幕类 | `class Danmaku:` |\n| PYAI 2-2-6 | 星星类 | 类属性控制 |\n| PYAI 2-2-7 | 游戏角色类 | 按键交互、碰撞检测 |\n\n#### 弹幕游戏示例\n```python\nimport pygame\nimport random\n\nclass Danmaku:\n    def __init__(self, text, y):\n        self.text = text\n        self.x = 800           # 从右边开始\n        self.y = y\n        self.speed = random.randint(2, 5)\n        self.color = (random.randint(0, 255),\n                      random.randint(0, 255),\n                      random.randint(0, 255))\n\n    def update(self):\n        \"\"\"更新位置\"\"\"\n        self.x -= self.speed\n\n    def draw(self, screen, font):\n        \"\"\"绘制弹幕\"\"\"\n        text_surface = font.render(self.text, True, self.color)\n        screen.blit(text_surface, (self.x, self.y))\n\n    def is_off_screen(self):\n        \"\"\"检查是否离开屏幕\"\"\"\n        return self.x < -200\n\n# 使用\ndanmakus = []\ndanmakus.append(Danmaku(\"Hello!\", 100))\ndanmakus.append(Danmaku(\"World!\", 200))\n\n# 游戏循环中\nfor danmaku in danmakus[:]:\n    danmaku.update()\n    danmaku.draw(screen, font)\n    if danmaku.is_off_screen():\n        danmakus.remove(danmaku)\n```\n\n### 6.2 星星类示例\n\n```python\nimport pygame\nimport random\n\nclass Star:\n    def __init__(self):\n        self.x = random.randint(0, 800)\n        self.y = random.randint(0, 600)\n        self.size = random.randint(1, 3)\n        self.speed = random.uniform(0.5, 2)\n        self.brightness = random.randint(100, 255)\n\n    def update(self):\n        \"\"\"星星闪烁效果\"\"\"\n        self.brightness += random.randint(-10, 10)\n        self.brightness = max(100, min(255, self.brightness))\n\n    def draw(self, screen):\n        color = (self.brightness, self.brightness, self.brightness)\n        pygame.draw.circle(screen, color, (int(self.x), int(self.y)), self.size)\n\n# 创建100颗星星\nstars = [Star() for _ in range(100)]\n\n# 游戏循环中\nfor star in stars:\n    star.update()\n    star.draw(screen)\n```\n\n---\n\n## 七、MicroPython中的类应用\n\n### 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| MP1-L6 | 硬件驱动封装 | NovaMP库使用 |\n\n### NovaMP库类示例\n```python\nfrom novaMP import LED, Button, SG90\n\n# LED类使用\nled = LED(2)\nled.test()              # 测试方法\nled.fill((255, 0, 0))   # 设置颜色\nled.write()             # 更新显示\n\n# Button类使用\nbutton = Button(4)\nif button.is_pressed():\n    print(\"按钮被按下\")\n\n# SG90舵机类使用\nservo = SG90(5)\nservo.angle(90)         # 转到90度\n```\n\n### 自定义硬件类\n```python\nclass SmartLight:\n    def __init__(self, led_pin, sensor_pin):\n        self.led = LED(led_pin)\n        self.sensor = ADC(Pin(sensor_pin))\n        self.threshold = 500\n\n    def auto_control(self):\n        \"\"\"根据光线自动控制\"\"\"\n        light_value = self.sensor.read()\n        if light_value < self.threshold:\n            self.led.fill((255, 255, 255))  # 开灯\n        else:\n            self.led.fill((0, 0, 0))        # 关灯\n        self.led.write()\n\n# 使用\nsmart_light = SmartLight(4, 34)\nwhile True:\n    smart_light.auto_control()\n    time.sleep(0.5)\n```\n\n---\n\n## 八、类的进阶概念\n\n### 8.1 类属性 vs 实例属性\n\n```python\nclass Player:\n    # 类属性（所有实例共享）\n    game_name = \"冒险游戏\"\n    player_count = 0\n\n    def __init__(self, name):\n        # 实例属性（每个实例独有）\n        self.name = name\n        Player.player_count += 1\n\n# 类属性通过类名访问\nprint(Player.game_name)  # 冒险游戏\n\n# 创建实例\np1 = Player(\"勇士\")\np2 = Player(\"法师\")\n\nprint(Player.player_count)  # 2（类属性被修改）\nprint(p1.name)              # 勇士（实例属性）\nprint(p2.name)              # 法师（实例属性）\n```\n\n### 8.2 私有属性（约定）\n\n```python\nclass BankAccount:\n    def __init__(self, balance):\n        self._balance = balance  # 单下划线：约定为私有\n\n    def deposit(self, amount):\n        if amount > 0:\n            self._balance += amount\n\n    def get_balance(self):\n        return self._balance\n\naccount = BankAccount(1000)\naccount.deposit(500)\nprint(account.get_balance())  # 1500\n```\n\n---\n\n## 九、OOP进阶路线\n\n```\nPYAI 2-2-1          MP1-L4/L5          PYAI 2-2-3          PYAI 2-2-6\nclass定义    →      self/__init__  →   类实例应用    →     类属性控制\n   ↓                    ↓                  ↓                   ↓\n 类模板             初始化方法          游戏对象            共享属性\n```\n\n---\n\n## 十、常见错误与禁忌\n\n| 错误 | 后果 | 正确做法 |\n|------|------|---------|\n| ❌ 忘记self参数 | TypeError | 方法第一个参数必须是self |\n| ❌ 忘记self.访问属性 | NameError | 用self.属性名访问实例属性 |\n| ❌ __init__写成__init | 不会自动调用 | 注意双下划线 |\n| ❌ 修改类属性影响所有实例 | 意外行为 | 区分类属性和实例属性 |\n| ❌ 在类外直接访问私有属性 | 破坏封装 | 通过方法访问 |\n\n### 常见错误示例\n```python\n# ❌ 错误：忘记self\nclass Dog:\n    def __init__(name):  # 缺少self\n        name = name      # 这是局部变量，不是实例属性\n\n# ✅ 正确\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n# ❌ 错误：忘记self.\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n    def bark(self):\n        print(f\"{name}在叫\")  # NameError: name未定义\n\n# ✅ 正确\nclass Dog:\n    def __init__(self, name):\n        self.name = name\n\n    def bark(self):\n        print(f\"{self.name}在叫\")  # 使用self.name\n```\n\n---\n\n**维护者**：知识库管理员\n**数据来源**：萃取报告/PythonAI/\n**整合原则**：基于现有萃取报告，不压缩删减\n"
}