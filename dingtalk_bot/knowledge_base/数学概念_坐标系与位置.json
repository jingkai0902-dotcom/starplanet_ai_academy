{
  "title": "坐标系与位置",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\数学概念库\\坐标系与位置.md",
  "sections": [
    {
      "title": "一、Scratch坐标系",
      "content": "### 1.1 基本概念\n\n```\n        y轴 (180)\n         ↑\n         |\n(-240,0) |----+---→ x轴 (240,0)\n         |  (0,0)\n         |\n         ↓\n       (-180)\n```\n\n**特点**：\n- 舞台大小：480 × 360 像素\n- 原点(0,0)在舞台**中心**\n- x范围：-240 到 240\n- y范围：-180 到 180\n- 与数学坐标系**一致**（y向上为正）\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-3-06 | 坐标系统 | 首次认识x轴、y轴 |\n| CODE1-4-01 | 捉人游戏 | 平面直角坐标系应用 |\n| CODE1-4-02 | 斯斯接苹果 | 随机位置生成 |\n| CODE2-3-01 | 猜数游戏 | 坐标比较 |\n| CODE3-2-07 | 植物大战僵尸 | 网格坐标系统 |\n\n### 1.3 常用积木\n\n```scratch\n// 移动到指定位置\n移到 x: (100) y: (50)\n\n// 滑行到指定位置\n在 (1) 秒内滑行到 x: (100) y: (50)\n\n// 获取当前位置\n(x 座标)\n(y 座标)\n\n// 相对移动\n将 x 改变 (10)\n将 y 改变 (10)\n\n// 设置位置\n将 x 设为 (100)\n将 y 设为 (50)\n```\n\n### 1.4 教学话术\n\n> \"小朋友们，Scratch的舞台就像一张方格纸。中间的点叫做原点，坐标是(0,0)。往右走x变大，往左走x变小；往上走y变大，往下走y变小。\"\n\n### 1.5 常见错误\n\n| 错误 | 原因 | 正确做法 |\n|------|------|---------|\n| 角色跑出舞台 | x或y超出范围 | 添加边界检测 |\n| 位置不准确 | 混淆\"移到\"和\"改变\" | \"移到\"是绝对位置，\"改变\"是相对移动 |\n\n---"
    },
    {
      "title": "二、Python/Pygame坐标系",
      "content": "### 2.1 基本概念\n\n```\n(0,0)----→ x轴 (width,0)\n  |\n  |\n  ↓\ny轴\n(0,height)\n```\n\n**特点**：\n- 原点(0,0)在**左上角**\n- x向右增大\n- y向**下**增大（与数学坐标系相反！）\n- 窗口大小可自定义（常用800×600）\n\n### 2.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | 脚踏实地 | pygame窗口坐标 |\n| PYAI 2-2-7 | 积小致巨1 | 粒子位置计算 |\n| PYAI 2-2-10 | 举重若轻2 | 物理坐标转换 |\n\n### 2.3 核心代码\n\n```python\nimport pygame\n\n# 初始化\npygame.init()\nscreen = pygame.display.set_mode((800, 600))\n\n# 绘制在指定位置\nx, y = 100, 200\npygame.draw.circle(screen, (255, 0, 0), (x, y), 20)\n\n# 获取鼠标位置\nmouse_x, mouse_y = pygame.mouse.get_pos()\n```\n\n### 2.4 坐标转换\n\n```python\n# 数学坐标 → Pygame坐标\ndef math_to_pygame(x, y, height):\n    return x, height - y\n\n# Pygame坐标 → 数学坐标\ndef pygame_to_math(x, y, height):\n    return x, height - y\n```\n\n### 2.5 教学话术\n\n> \"Python的坐标系和Scratch不一样哦！原点在左上角，y轴是向下的。这是因为计算机屏幕是从上往下、从左往右扫描的。\"\n\n### 2.6 常见错误\n\n| 错误 | 原因 | 正确做法 |\n|------|------|---------|\n| 物体位置颠倒 | y轴方向混淆 | 记住：y向下增大 |\n| 物体跑出屏幕 | 未检查边界 | 添加边界检测代码 |\n\n---"
    },
    {
      "title": "三、网格坐标系统",
      "content": "### 3.1 基本概念\n\n将连续坐标离散化为网格单元，常用于塔防、棋盘类游戏。\n\n```\n┌───┬───┬───┬───┐\n│0,0│1,0│2,0│3,0│\n├───┼───┼───┼───┤\n│0,1│1,1│2,1│3,1│\n├───┼───┼───┼───┤\n│0,2│1,2│2,2│3,2│\n└───┴───┴───┴───┘\n```\n\n### 3.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-07 | 植物大战僵尸 | 植物种植网格 |\n| PYAI 1-3-6 | 落子无悔 | 棋盘坐标 |\n| PYAI 1-3-7 | 三人成虎 | 二维数组索引 |\n\n### 3.3 网格对齐算法\n\n```python\n# 将像素坐标对齐到网格\ngrid_size = 80\n\ndef snap_to_grid(x, y):\n    grid_x = (x // grid_size) * grid_size\n    grid_y = (y // grid_size) * grid_size\n    return grid_x, grid_y\n\n# 示例\nmouse_x, mouse_y = 125, 230\ngrid_x, grid_y = snap_to_grid(mouse_x, mouse_y)\n# 结果: (80, 160)\n```\n\n### 3.4 网格索引转换\n\n```python\n# 像素坐标 → 网格索引\ndef pixel_to_grid(x, y, grid_size):\n    col = x // grid_size\n    row = y // grid_size\n    return row, col\n\n# 网格索引 → 像素坐标（左上角）\ndef grid_to_pixel(row, col, grid_size):\n    x = col * grid_size\n    y = row * grid_size\n    return x, y\n\n# 网格索引 → 像素坐标（中心点）\ndef grid_to_center(row, col, grid_size):\n    x = col * grid_size + grid_size // 2\n    y = row * grid_size + grid_size // 2\n    return x, y\n```\n\n### 3.5 Scratch网格实现\n\n```scratch\n// 网格对齐\n将 [网格X] 设为 ((取整 ((鼠标的 x 座标) / (80))) * (80))\n将 [网格Y] 设为 ((取整 ((鼠标的 y 座标) / (80))) * (80))\n移到 x: (网格X) y: (网格Y)\n```\n\n---"
    },
    {
      "title": "四、相对坐标与卷轴",
      "content": "### 4.1 基本概念\n\n当游戏世界大于屏幕时，使用相对坐标实现卷轴效果。\n\n```\n┌─────────────────────────────────────┐\n│           游戏世界（大）              │\n│    ┌───────────┐                    │\n│    │  屏幕视口  │                    │\n│    │  （小）    │                    │\n│    └───────────┘                    │\n└─────────────────────────────────────┘\n```\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-11 | 勇闯黑白岛 | 卷轴地图 |\n| PYAI 2-2-10 | 举重若轻2 | 背景滚动 |\n\n### 4.3 核心代码\n\n```python\n# 世界坐标 vs 屏幕坐标\nclass Camera:\n    def __init__(self):\n        self.x = 0\n        self.y = 0\n\n    def world_to_screen(self, world_x, world_y):\n        \"\"\"世界坐标转屏幕坐标\"\"\"\n        screen_x = world_x - self.x\n        screen_y = world_y - self.y\n        return screen_x, screen_y\n\n    def follow(self, target_x, target_y, screen_width, screen_height):\n        \"\"\"摄像机跟随目标\"\"\"\n        self.x = target_x - screen_width // 2\n        self.y = target_y - screen_height // 2\n```\n\n### 4.4 Scratch卷轴实现\n\n```scratch\n// 背景滚动\n当绿旗被点击\n重复执行\n    将 x 改变 (-5)\n    如果 <(x 座标) < (-480)> 那么\n        将 x 设为 (480)\n```\n\n---"
    },
    {
      "title": "五、教学建议",
      "content": "### 5.1 认知进阶路线\n\n```\nCODE1-3-06          CODE1-4-01          CODE3-2-07          CODE3-2-11\n坐标认识     →      坐标应用     →      网格坐标     →      卷轴坐标\n   ↓                   ↓                   ↓                   ↓\n x/y轴              移动定位            离散化              相对坐标\n```\n\n### 5.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| y轴方向混淆 | 用\"电梯\"类比：Scratch电梯往上走楼层变大，Pygame电梯往下走楼层变大 |\n| 网格对齐理解困难 | 用\"棋盘\"类比：棋子只能放在格子里，不能放在线上 |\n| 相对坐标抽象 | 用\"火车窗外风景\"类比：人不动，风景在动 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)"
    }
  ],
  "full_content": "# 坐标系与位置\n\n> **用途**：坐标系统在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n\n---\n\n## 一、Scratch坐标系\n\n### 1.1 基本概念\n\n```\n        y轴 (180)\n         ↑\n         |\n(-240,0) |----+---→ x轴 (240,0)\n         |  (0,0)\n         |\n         ↓\n       (-180)\n```\n\n**特点**：\n- 舞台大小：480 × 360 像素\n- 原点(0,0)在舞台**中心**\n- x范围：-240 到 240\n- y范围：-180 到 180\n- 与数学坐标系**一致**（y向上为正）\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-3-06 | 坐标系统 | 首次认识x轴、y轴 |\n| CODE1-4-01 | 捉人游戏 | 平面直角坐标系应用 |\n| CODE1-4-02 | 斯斯接苹果 | 随机位置生成 |\n| CODE2-3-01 | 猜数游戏 | 坐标比较 |\n| CODE3-2-07 | 植物大战僵尸 | 网格坐标系统 |\n\n### 1.3 常用积木\n\n```scratch\n// 移动到指定位置\n移到 x: (100) y: (50)\n\n// 滑行到指定位置\n在 (1) 秒内滑行到 x: (100) y: (50)\n\n// 获取当前位置\n(x 座标)\n(y 座标)\n\n// 相对移动\n将 x 改变 (10)\n将 y 改变 (10)\n\n// 设置位置\n将 x 设为 (100)\n将 y 设为 (50)\n```\n\n### 1.4 教学话术\n\n> \"小朋友们，Scratch的舞台就像一张方格纸。中间的点叫做原点，坐标是(0,0)。往右走x变大，往左走x变小；往上走y变大，往下走y变小。\"\n\n### 1.5 常见错误\n\n| 错误 | 原因 | 正确做法 |\n|------|------|---------|\n| 角色跑出舞台 | x或y超出范围 | 添加边界检测 |\n| 位置不准确 | 混淆\"移到\"和\"改变\" | \"移到\"是绝对位置，\"改变\"是相对移动 |\n\n---\n\n## 二、Python/Pygame坐标系\n\n### 2.1 基本概念\n\n```\n(0,0)----→ x轴 (width,0)\n  |\n  |\n  ↓\ny轴\n(0,height)\n```\n\n**特点**：\n- 原点(0,0)在**左上角**\n- x向右增大\n- y向**下**增大（与数学坐标系相反！）\n- 窗口大小可自定义（常用800×600）\n\n### 2.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 2-2-1 | 脚踏实地 | pygame窗口坐标 |\n| PYAI 2-2-7 | 积小致巨1 | 粒子位置计算 |\n| PYAI 2-2-10 | 举重若轻2 | 物理坐标转换 |\n\n### 2.3 核心代码\n\n```python\nimport pygame\n\n# 初始化\npygame.init()\nscreen = pygame.display.set_mode((800, 600))\n\n# 绘制在指定位置\nx, y = 100, 200\npygame.draw.circle(screen, (255, 0, 0), (x, y), 20)\n\n# 获取鼠标位置\nmouse_x, mouse_y = pygame.mouse.get_pos()\n```\n\n### 2.4 坐标转换\n\n```python\n# 数学坐标 → Pygame坐标\ndef math_to_pygame(x, y, height):\n    return x, height - y\n\n# Pygame坐标 → 数学坐标\ndef pygame_to_math(x, y, height):\n    return x, height - y\n```\n\n### 2.5 教学话术\n\n> \"Python的坐标系和Scratch不一样哦！原点在左上角，y轴是向下的。这是因为计算机屏幕是从上往下、从左往右扫描的。\"\n\n### 2.6 常见错误\n\n| 错误 | 原因 | 正确做法 |\n|------|------|---------|\n| 物体位置颠倒 | y轴方向混淆 | 记住：y向下增大 |\n| 物体跑出屏幕 | 未检查边界 | 添加边界检测代码 |\n\n---\n\n## 三、网格坐标系统\n\n### 3.1 基本概念\n\n将连续坐标离散化为网格单元，常用于塔防、棋盘类游戏。\n\n```\n┌───┬───┬───┬───┐\n│0,0│1,0│2,0│3,0│\n├───┼───┼───┼───┤\n│0,1│1,1│2,1│3,1│\n├───┼───┼───┼───┤\n│0,2│1,2│2,2│3,2│\n└───┴───┴───┴───┘\n```\n\n### 3.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-07 | 植物大战僵尸 | 植物种植网格 |\n| PYAI 1-3-6 | 落子无悔 | 棋盘坐标 |\n| PYAI 1-3-7 | 三人成虎 | 二维数组索引 |\n\n### 3.3 网格对齐算法\n\n```python\n# 将像素坐标对齐到网格\ngrid_size = 80\n\ndef snap_to_grid(x, y):\n    grid_x = (x // grid_size) * grid_size\n    grid_y = (y // grid_size) * grid_size\n    return grid_x, grid_y\n\n# 示例\nmouse_x, mouse_y = 125, 230\ngrid_x, grid_y = snap_to_grid(mouse_x, mouse_y)\n# 结果: (80, 160)\n```\n\n### 3.4 网格索引转换\n\n```python\n# 像素坐标 → 网格索引\ndef pixel_to_grid(x, y, grid_size):\n    col = x // grid_size\n    row = y // grid_size\n    return row, col\n\n# 网格索引 → 像素坐标（左上角）\ndef grid_to_pixel(row, col, grid_size):\n    x = col * grid_size\n    y = row * grid_size\n    return x, y\n\n# 网格索引 → 像素坐标（中心点）\ndef grid_to_center(row, col, grid_size):\n    x = col * grid_size + grid_size // 2\n    y = row * grid_size + grid_size // 2\n    return x, y\n```\n\n### 3.5 Scratch网格实现\n\n```scratch\n// 网格对齐\n将 [网格X] 设为 ((取整 ((鼠标的 x 座标) / (80))) * (80))\n将 [网格Y] 设为 ((取整 ((鼠标的 y 座标) / (80))) * (80))\n移到 x: (网格X) y: (网格Y)\n```\n\n---\n\n## 四、相对坐标与卷轴\n\n### 4.1 基本概念\n\n当游戏世界大于屏幕时，使用相对坐标实现卷轴效果。\n\n```\n┌─────────────────────────────────────┐\n│           游戏世界（大）              │\n│    ┌───────────┐                    │\n│    │  屏幕视口  │                    │\n│    │  （小）    │                    │\n│    └───────────┘                    │\n└─────────────────────────────────────┘\n```\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-11 | 勇闯黑白岛 | 卷轴地图 |\n| PYAI 2-2-10 | 举重若轻2 | 背景滚动 |\n\n### 4.3 核心代码\n\n```python\n# 世界坐标 vs 屏幕坐标\nclass Camera:\n    def __init__(self):\n        self.x = 0\n        self.y = 0\n\n    def world_to_screen(self, world_x, world_y):\n        \"\"\"世界坐标转屏幕坐标\"\"\"\n        screen_x = world_x - self.x\n        screen_y = world_y - self.y\n        return screen_x, screen_y\n\n    def follow(self, target_x, target_y, screen_width, screen_height):\n        \"\"\"摄像机跟随目标\"\"\"\n        self.x = target_x - screen_width // 2\n        self.y = target_y - screen_height // 2\n```\n\n### 4.4 Scratch卷轴实现\n\n```scratch\n// 背景滚动\n当绿旗被点击\n重复执行\n    将 x 改变 (-5)\n    如果 <(x 座标) < (-480)> 那么\n        将 x 设为 (480)\n```\n\n---\n\n## 五、教学建议\n\n### 5.1 认知进阶路线\n\n```\nCODE1-3-06          CODE1-4-01          CODE3-2-07          CODE3-2-11\n坐标认识     →      坐标应用     →      网格坐标     →      卷轴坐标\n   ↓                   ↓                   ↓                   ↓\n x/y轴              移动定位            离散化              相对坐标\n```\n\n### 5.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| y轴方向混淆 | 用\"电梯\"类比：Scratch电梯往上走楼层变大，Pygame电梯往下走楼层变大 |\n| 网格对齐理解困难 | 用\"棋盘\"类比：棋子只能放在格子里，不能放在线上 |\n| 相对坐标抽象 | 用\"火车窗外风景\"类比：人不动，风景在动 |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)\n"
}