{
  "title": "物理仿真数学",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\02_知识点数据库\\数学概念库\\物理仿真数学.md",
  "sections": [
    {
      "title": "一、距离公式",
      "content": "### 1.1 两点间距离\n\n```\n距离 = √((x2-x1)² + (y2-y1)²)\n```\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-1 | 天涯明月 | 圆形碰撞检测 |\n| PYAI 1-1-11 | 碰撞检测 | distanceTo方法 |\n| CODE3-2-02 | 太空防卫战 | 子弹与敌机距离 |\n\n### 1.3 Python实现\n\n```python\nimport math\n\ndef distance(x1, y1, x2, y2):\n    \"\"\"计算两点间距离\"\"\"\n    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)\n\n# 示例\nd = distance(0, 0, 3, 4)  # 5.0（勾股定理：3-4-5）\n```\n\n### 1.4 Scratch实现\n\n```scratch\n// 计算与鼠标的距离\n将 [距离] 设为 ([sqrt] 的 ((((鼠标的 x 座标) - (x 座标)) * ((鼠标的 x 座标) - (x 座标))) + (((鼠标的 y 座标) - (y 座标)) * ((鼠标的 y 座标) - (y 座标)))))\n```\n\n### 1.5 教学话术\n\n> \"两点之间的距离怎么算？想象一个直角三角形，两点的连线是斜边。用勾股定理：斜边² = 横边² + 竖边²。\"\n\n---"
    },
    {
      "title": "二、速度与加速度",
      "content": "### 2.1 基本公式\n\n```\n位置 = 位置 + 速度\n速度 = 速度 + 加速度\n```\n\n### 2.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE2-2-06 | 测速试验车 | 速度=距离/时间 |\n| CODE3-2-10 | 勇闯黑白岛 | 重力加速度 |\n| PYAI 2-2-10 | 举重若轻2 | 物理引擎基础 |\n\n### 2.3 Python物理更新\n\n```python\nclass PhysicsObject:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        self.vx = 0  # 水平速度\n        self.vy = 0  # 垂直速度\n        self.ax = 0  # 水平加速度\n        self.ay = 0  # 垂直加速度（重力）\n\n    def update(self):\n        \"\"\"每帧更新\"\"\"\n        # 速度 += 加速度\n        self.vx += self.ax\n        self.vy += self.ay\n        # 位置 += 速度\n        self.x += self.vx\n        self.y += self.vy\n```\n\n### 2.4 Scratch物理更新\n\n```scratch\n// 重力效果\n将 [Y速度] 改变 (-0.5)\n将 y 改变 (Y速度)\n\n// 水平移动\n将 x 改变 (X速度)\n```\n\n---"
    },
    {
      "title": "三、重力与抛物线",
      "content": "### 3.1 抛物线运动\n\n```\n水平方向：匀速运动（无加速度）\n垂直方��：匀加速运动（重力加速度）\n```\n\n### 3.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-04 | 篮球小子-投篮物理 | 抛物线轨迹 |\n| CODE3-2-05 | 篮球小子-力度与角度 | 速度分解 |\n| CODE3-2-10 | 勇闯黑白岛-重力引擎 | 跳跃物理 |\n\n### 3.3 速度分解\n\n```python\nimport math\n\ndef launch(speed, angle_deg):\n    \"\"\"根据速度和角度计算初始速度分量\"\"\"\n    angle_rad = math.radians(angle_deg)\n    vx = speed * math.cos(angle_rad)  # 水平速度（恒定）\n    vy = speed * math.sin(angle_rad)  # 垂直速度（受重力影响）\n    return vx, vy\n\n# 示例：以50的速度、45度角发射\nvx, vy = launch(50, 45)\nprint(f\"水平速度: {vx:.2f}, 垂直速度: {vy:.2f}\")\n# 水平速度: 35.36, 垂直速度: 35.36\n```\n\n### 3.4 完整抛物线模拟\n\n```python\nimport math\n\nclass Projectile:\n    def __init__(self, x, y, speed, angle):\n        self.x = x\n        self.y = y\n        angle_rad = math.radians(angle)\n        self.vx = speed * math.cos(angle_rad)\n        self.vy = speed * math.sin(angle_rad)\n        self.gravity = 0.5\n\n    def update(self):\n        \"\"\"每帧更新\"\"\"\n        self.vy -= self.gravity  # 重力减速（向上为正）\n        self.x += self.vx\n        self.y += self.vy\n\n    def is_on_ground(self, ground_y=0):\n        \"\"\"检查是否落地\"\"\"\n        return self.y <= ground_y\n```\n\n### 3.5 Scratch抛物线\n\n```scratch\n// 初始化\n将 [X速度] 设为 ((力度) * ([cos] 的 (角度)))\n将 [Y速度] 设为 ((力度) * ([sin] 的 (角度)))\n\n// 飞行循环\n重复执行直到 <碰到 [地面]>\n    将 x 改变 (X速度)\n    将 y 改变 (Y速度)\n    将 [Y速度] 改变 (-0.5)  // 重力\n```\n\n### 3.6 教学话术\n\n> \"抛物线运动就像扔石头。水平方向没有力，所以匀速前进；垂直方向有重力，所以先上升后下降。我们用sin和cos把斜着的速度分解成横向和纵向。\"\n\n---"
    },
    {
      "title": "四、碰撞检测",
      "content": "### 4.1 圆形碰撞\n\n```\n两圆相撞条件：圆心距离 < 两圆半径之和\n```\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-1 | 天涯明月 | 圆形碰撞公式 |\n| CODE3-2-02 | 太空防卫战 | 子弹碰撞检测 |\n\n### 4.3 Python圆形碰撞\n\n```python\nimport math\n\ndef circle_collision(x1, y1, r1, x2, y2, r2):\n    \"\"\"检测两圆是否碰撞\"\"\"\n    dist = math.sqrt((x2 - x1)**2 + (y2 - y1)**2)\n    return dist < r1 + r2\n\n# 示例\nhit = circle_collision(0, 0, 10, 15, 0, 10)  # True（距离15 < 半径和20）\n```\n\n### 4.4 矩形碰撞(AABB)\n\n```\n两矩形相撞条件：X轴重叠 且 Y轴重叠\n```\n\n### 4.5 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-2 | 令行禁止 | AABB碰撞检测 |\n| CODE3-2-08 | 植物大战僵尸-射手与子弹 | 子弹与僵尸碰撞 |\n\n### 4.6 Python矩形碰撞\n\n```python\ndef rect_collision(x1, y1, w1, h1, x2, y2, w2, h2):\n    \"\"\"检测两矩形是否碰撞（AABB）\"\"\"\n    x_overlap = x1 < x2 + w2 and x1 + w1 > x2\n    y_overlap = y1 < y2 + h2 and y1 + h1 > y2\n    return x_overlap and y_overlap\n\n# 示例\nhit = rect_collision(0, 0, 50, 50, 40, 40, 50, 50)  # True（有重叠）\n```\n\n### 4.7 Scratch碰撞检测\n\n```scratch\n// 使用内置碰撞检测\n如果 <碰到 [敌人]> 那么\n    // 碰撞处理\n```\n\n### 4.8 教学话术\n\n> \"圆形碰撞很简单：两个圆心的距离小于两个半径加起来，就是碰上了。矩形碰撞要看两个方向：横向有没有重叠，纵向有没有重叠，两个都重叠才算碰上。\"\n\n---"
    },
    {
      "title": "五、反弹与摩擦",
      "content": "### 5.1 反弹公式\n\n```\n碰到水平边界：vx = -vx\n碰到垂直边界：vy = -vy\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-04 | 躲避星星 | 边界反弹 |\n| PYAI 2-2-7 | 积小致巨1 | 粒子反弹 |\n\n### 5.3 Python反弹\n\n```python\ndef bounce(x, y, vx, vy, width, height, radius):\n    \"\"\"边界反弹\"\"\"\n    # 左右边界\n    if x - radius < 0 or x + radius > width:\n        vx = -vx\n    # 上下边界\n    if y - radius < 0 or y + radius > height:\n        vy = -vy\n    return vx, vy\n```\n\n### 5.4 摩擦力\n\n```python\n# 简单摩擦：每帧速度衰减\nfriction = 0.98\nvx *= friction\nvy *= friction\n```\n\n### 5.5 Scratch反弹\n\n```scratch\n// 碰到边缘反弹\n碰到边缘就反弹\n\n// 或手动实现\n如果 <(x 座标) > (230)> 那么\n    将 [X速度] 设为 ((X速度) * (-1))\n```\n\n---"
    },
    {
      "title": "六、数值映射",
      "content": "### 6.1 映射公式\n\n```\n输出 = (输入 - 输入最小) × (输出最大 - 输出最小) / (输入最大 - 输入最小) + 输出最小\n```\n\n### 6.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE2-1-10 | 公路大冒险 | 电位器值映射 |\n| MP1-L8 | 舵机与映射 | 旋钮控制舵机 |\n\n### 6.3 Python映射函数\n\n```python\ndef map_value(x, in_min, in_max, out_min, out_max):\n    \"\"\"将值从一个范围映射到另一个范围\"\"\"\n    return (x - in_min) * (out_max - out_min) // (in_max - in_min) + out_min\n\n# 示例：将旋钮值(0-4095)映射到舵机角度(0-180)\nknob = 2048\nangle = map_value(knob, 0, 4095, 0, 180)  # 90\n```\n\n### 6.4 教学话术\n\n> \"映射就像翻译。旋钮的值是0到4095，舵机的角度是0到180。我们要把旋钮的'语言'翻译成舵机的'语言'。\"\n\n---"
    },
    {
      "title": "七、教学建议",
      "content": "### 7.1 认知进阶路线\n\n```\nCODE1-4-04          CODE3-2-04          PYAI 1-2-1          PYAI 2-2-10\n边界反弹     →      抛物线运动   →      碰撞检测     →      物理引擎\n   ↓                   ↓                   ↓                   ↓\n 速度反转            速度分解            距离公式            完整仿真\n```\n\n### 7.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| 速度分解理解困难 | 用\"斜坡上的小球\"实物演示 |\n| 碰撞检测公式复杂 | 先用Scratch内置碰撞，再讲原理 |\n| 物理更新顺序 | 强调\"先更新速度，再更新位置\" |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)、[角度与三角函数.md](角度与三角函数.md)"
    }
  ],
  "full_content": "# 物理仿真数学\n\n> **用途**：物理仿真相关数学在各课程中的应用详解\n> **更新日期**：2026-02-10\n> **数据来源**：萃取报告/CODE/、萃取报告/PythonAI/\n\n---\n\n## 一、距离公式\n\n### 1.1 两点间距离\n\n```\n距离 = √((x2-x1)² + (y2-y1)²)\n```\n\n### 1.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-1 | 天涯明月 | 圆形碰撞检测 |\n| PYAI 1-1-11 | 碰撞检测 | distanceTo方法 |\n| CODE3-2-02 | 太空防卫战 | 子弹与敌机距离 |\n\n### 1.3 Python实现\n\n```python\nimport math\n\ndef distance(x1, y1, x2, y2):\n    \"\"\"计算两点间距离\"\"\"\n    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)\n\n# 示例\nd = distance(0, 0, 3, 4)  # 5.0（勾股定理：3-4-5）\n```\n\n### 1.4 Scratch实现\n\n```scratch\n// 计算与鼠标的距离\n将 [距离] 设为 ([sqrt] 的 ((((鼠标的 x 座标) - (x 座标)) * ((鼠标的 x 座标) - (x 座标))) + (((鼠标的 y 座标) - (y 座标)) * ((鼠标的 y 座标) - (y 座标)))))\n```\n\n### 1.5 教学话术\n\n> \"两点之间的距离怎么算？想象一个直角三角形，两点的连线是斜边。用勾股定理：斜边² = 横边² + 竖边²。\"\n\n---\n\n## 二、速度与加速度\n\n### 2.1 基本公式\n\n```\n位置 = 位置 + 速度\n速度 = 速度 + 加速度\n```\n\n### 2.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE2-2-06 | 测速试验车 | 速度=距离/时间 |\n| CODE3-2-10 | 勇闯黑白岛 | 重力加速度 |\n| PYAI 2-2-10 | 举重若轻2 | 物理引擎基础 |\n\n### 2.3 Python物理更新\n\n```python\nclass PhysicsObject:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        self.vx = 0  # 水平速度\n        self.vy = 0  # 垂直速度\n        self.ax = 0  # 水平加速度\n        self.ay = 0  # 垂直加速度（重力）\n\n    def update(self):\n        \"\"\"每帧更新\"\"\"\n        # 速度 += 加速度\n        self.vx += self.ax\n        self.vy += self.ay\n        # 位置 += 速度\n        self.x += self.vx\n        self.y += self.vy\n```\n\n### 2.4 Scratch物理更新\n\n```scratch\n// 重力效果\n将 [Y速度] 改变 (-0.5)\n将 y 改变 (Y速度)\n\n// 水平移动\n将 x 改变 (X速度)\n```\n\n---\n\n## 三、重力与抛物线\n\n### 3.1 抛物线运动\n\n```\n水平方向：匀速运动（无加速度）\n垂直方��：匀加速运动（重力加速度）\n```\n\n### 3.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE3-2-04 | 篮球小子-投篮物理 | 抛物线轨迹 |\n| CODE3-2-05 | 篮球小子-力度与角度 | 速度分解 |\n| CODE3-2-10 | 勇闯黑白岛-重力引擎 | 跳跃物理 |\n\n### 3.3 速度分解\n\n```python\nimport math\n\ndef launch(speed, angle_deg):\n    \"\"\"根据速度和角度计算初始速度分量\"\"\"\n    angle_rad = math.radians(angle_deg)\n    vx = speed * math.cos(angle_rad)  # 水平速度（恒定）\n    vy = speed * math.sin(angle_rad)  # 垂直速度（受重力影响）\n    return vx, vy\n\n# 示例：以50的速度、45度角发射\nvx, vy = launch(50, 45)\nprint(f\"水平速度: {vx:.2f}, 垂直速度: {vy:.2f}\")\n# 水平速度: 35.36, 垂直速度: 35.36\n```\n\n### 3.4 完整抛物线模拟\n\n```python\nimport math\n\nclass Projectile:\n    def __init__(self, x, y, speed, angle):\n        self.x = x\n        self.y = y\n        angle_rad = math.radians(angle)\n        self.vx = speed * math.cos(angle_rad)\n        self.vy = speed * math.sin(angle_rad)\n        self.gravity = 0.5\n\n    def update(self):\n        \"\"\"每帧更新\"\"\"\n        self.vy -= self.gravity  # 重力减速（向上为正）\n        self.x += self.vx\n        self.y += self.vy\n\n    def is_on_ground(self, ground_y=0):\n        \"\"\"检查是否落地\"\"\"\n        return self.y <= ground_y\n```\n\n### 3.5 Scratch抛物线\n\n```scratch\n// 初始化\n将 [X速度] 设为 ((力度) * ([cos] 的 (角度)))\n将 [Y速度] 设为 ((力度) * ([sin] 的 (角度)))\n\n// 飞行循环\n重复执行直到 <碰到 [地面]>\n    将 x 改变 (X速度)\n    将 y 改变 (Y速度)\n    将 [Y速度] 改变 (-0.5)  // 重力\n```\n\n### 3.6 教学话术\n\n> \"抛物线运动就像扔石头。水平方向没有力，所以匀速前进；垂直方向有重力，所以先上升后下降。我们用sin和cos把斜着的速度分解成横向和纵向。\"\n\n---\n\n## 四、碰撞检测\n\n### 4.1 圆形碰撞\n\n```\n两圆相撞条件：圆心距离 < 两圆半径之和\n```\n\n### 4.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-1 | 天涯明月 | 圆形碰撞公式 |\n| CODE3-2-02 | 太空防卫战 | 子弹碰撞检测 |\n\n### 4.3 Python圆形碰撞\n\n```python\nimport math\n\ndef circle_collision(x1, y1, r1, x2, y2, r2):\n    \"\"\"检测两圆是否碰撞\"\"\"\n    dist = math.sqrt((x2 - x1)**2 + (y2 - y1)**2)\n    return dist < r1 + r2\n\n# 示例\nhit = circle_collision(0, 0, 10, 15, 0, 10)  # True（距离15 < 半径和20）\n```\n\n### 4.4 矩形碰撞(AABB)\n\n```\n两矩形相撞条件：X轴重叠 且 Y轴重叠\n```\n\n### 4.5 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| PYAI 1-2-2 | 令行禁止 | AABB碰撞检测 |\n| CODE3-2-08 | 植物大战僵尸-射手与子弹 | 子弹与僵尸碰撞 |\n\n### 4.6 Python矩形碰撞\n\n```python\ndef rect_collision(x1, y1, w1, h1, x2, y2, w2, h2):\n    \"\"\"检测两矩形是否碰撞（AABB）\"\"\"\n    x_overlap = x1 < x2 + w2 and x1 + w1 > x2\n    y_overlap = y1 < y2 + h2 and y1 + h1 > y2\n    return x_overlap and y_overlap\n\n# 示例\nhit = rect_collision(0, 0, 50, 50, 40, 40, 50, 50)  # True（有重叠）\n```\n\n### 4.7 Scratch碰撞检测\n\n```scratch\n// 使用内置碰撞检测\n如果 <碰到 [敌人]> 那么\n    // 碰撞处理\n```\n\n### 4.8 教学话术\n\n> \"圆形碰撞很简单：两个圆心的距离小于两个半径加起来，就是碰上了。矩形碰撞要看两个方向：横向有没有重叠，纵向有没有重叠，两个都重叠才算碰上。\"\n\n---\n\n## 五、反弹与摩擦\n\n### 5.1 反弹公式\n\n```\n碰到水平边界：vx = -vx\n碰到垂直边界：vy = -vy\n```\n\n### 5.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE1-4-04 | 躲避星星 | 边界反弹 |\n| PYAI 2-2-7 | 积小致巨1 | 粒子反弹 |\n\n### 5.3 Python反弹\n\n```python\ndef bounce(x, y, vx, vy, width, height, radius):\n    \"\"\"边界反弹\"\"\"\n    # 左右边界\n    if x - radius < 0 or x + radius > width:\n        vx = -vx\n    # 上下边界\n    if y - radius < 0 or y + radius > height:\n        vy = -vy\n    return vx, vy\n```\n\n### 5.4 摩擦力\n\n```python\n# 简单摩擦：每帧速度衰减\nfriction = 0.98\nvx *= friction\nvy *= friction\n```\n\n### 5.5 Scratch反弹\n\n```scratch\n// 碰到边缘反弹\n碰到边缘就反弹\n\n// 或手动实现\n如果 <(x 座标) > (230)> 那么\n    将 [X速度] 设为 ((X速度) * (-1))\n```\n\n---\n\n## 六、数值映射\n\n### 6.1 映射公式\n\n```\n输出 = (输入 - 输入最小) × (输出最大 - 输出最小) / (输入最大 - 输入最小) + 输出最小\n```\n\n### 6.2 跨课程出现\n\n| 课程编号 | 课程名称 | 具体内容 |\n|----------|---------|---------|\n| CODE2-1-10 | 公路大冒险 | 电位器值映射 |\n| MP1-L8 | 舵机与映射 | 旋钮控制舵机 |\n\n### 6.3 Python映射函数\n\n```python\ndef map_value(x, in_min, in_max, out_min, out_max):\n    \"\"\"将值从一个范围映射到另一个范围\"\"\"\n    return (x - in_min) * (out_max - out_min) // (in_max - in_min) + out_min\n\n# 示例：将旋钮值(0-4095)映射到舵机角度(0-180)\nknob = 2048\nangle = map_value(knob, 0, 4095, 0, 180)  # 90\n```\n\n### 6.4 教学话术\n\n> \"映射就像翻译。旋钮的值是0到4095，舵机的角度是0到180。我们要把旋钮的'语言'翻译成舵机的'语言'。\"\n\n---\n\n## 七、教学建议\n\n### 7.1 认知进阶路线\n\n```\nCODE1-4-04          CODE3-2-04          PYAI 1-2-1          PYAI 2-2-10\n边界反弹     →      抛物线运动   →      碰撞检测     →      物理引擎\n   ↓                   ↓                   ↓                   ↓\n 速度反转            速度分解            距离公式            完整仿真\n```\n\n### 7.2 常见教学难点\n\n| 难点 | 解决方案 |\n|------|---------|\n| 速度分解理解困难 | 用\"斜坡上的小球\"实物演示 |\n| 碰撞检测公式复杂 | 先用Scratch内置碰撞，再讲原理 |\n| 物理更新顺序 | 强调\"先更新速度，再更新位置\" |\n\n---\n\n**维护者**：知识库管理员\n**关联文件**：[数学概念总表.md](数学概念总表.md)、[角度与三角函数.md](角度与三角函数.md)\n"
}