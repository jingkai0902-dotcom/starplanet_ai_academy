{
  "title": "[PYAI-2-3-05] 表情控制",
  "source": "C:\\Users\\Frank.J\\starplanet_ai_academy\\知识库\\萃取报告\\PythonAI\\L2\\M3_交互式AI\\PYAI-2-3-05_表情控制.md",
  "sections": [
    {
      "title": "课程基本信息",
      "content": "| 项目 | 内容 |\n|------|------|\n| **课程编号** | PYAI 2-3-5 |\n| **课程名称** | 表情控制 |\n| **认知负荷** | 高 |\n| **核心技能** | 关键点特征提取、pygame音频播放 |\n| **项目内容** | 表情音乐播放器 |\n\n---"
    },
    {
      "title": "详细教学流程",
      "content": "### 步骤1：知识讲解（20分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"今天我们用FaceMesh识别表情！不同表情会播放不同音乐。\"\n>\n> \"**表情识别原理**：通过关键点的相对位置判断表情\n>\n> **嘴巴张开检测**：\n> ```python\n> # 上嘴唇和下嘴唇的关键点\n> upper_lip = landmarks[13]  # 上嘴唇中点\n> lower_lip = landmarks[14]  # 下嘴唇中点\n>\n> mouth_open = abs(upper_lip.y - lower_lip.y)\n> if mouth_open > 0.05:\n>     print('嘴巴张开了！')\n> ```\n>\n> **微笑检测**：\n> ```python\n> # 嘴角的关键点\n> left_corner = landmarks[61]   # 左嘴角\n> right_corner = landmarks[291] # 右嘴角\n> mouth_center = landmarks[13]  # 嘴唇中点\n>\n> # 嘴角上扬 = 微笑\n> if left_corner.y < mouth_center.y and right_corner.y < mouth_center.y:\n>     print('检测到微笑！')\n> ```\"\n\n### 步骤2：pygame音频播放（15分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"学习用pygame播放音乐：\n> ```python\n> import pygame\n>\n> pygame.mixer.init()\n>\n> # 加载音乐\n> happy_music = pygame.mixer.Sound('happy.wav')\n> sad_music = pygame.mixer.Sound('sad.wav')\n>\n> # 播放音乐\n> if is_smiling:\n>     happy_music.play()\n> elif is_mouth_open:\n>     sad_music.play()\n> ```\"\n\n### 步骤3：代码实践（35分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"创建一个表情音乐播放器：\n> - 微笑 → 播放欢快音乐\n> - 张嘴 → 播放惊讶音效\n> - 皱眉 → 播放悲伤音乐\"\n\n---"
    },
    {
      "title": "变体示例",
      "content": "| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 关键点索引记不住 | 提供索引表 | 打印常用关键点索引对照表 |\n| 音乐文件找不到 | 检查路径 | 使用绝对路径或放在同一目录 |\n| 表情识别不准 | 调整阈值 | 打印数值，根据实际情况调整 |\n| 想识别更多表情 | 组合特征 | 眉毛+嘴巴组合判断复杂表情 |\n\n---"
    },
    {
      "title": "核心代码模式",
      "content": "```python\n# 表情音乐播放器完整代码框架\nimport cv2\nimport mediapipe as mp\nimport pygame\n\npygame.mixer.init()\n\nclass ExpressionMusicPlayer:\n    def __init__(self):\n        self.face_mesh = mp.solutions.face_mesh.FaceMesh()\n        self.sounds = {\n            'smile': pygame.mixer.Sound('happy.wav'),\n            'surprise': pygame.mixer.Sound('surprise.wav')\n        }\n        self.last_expression = None\n\n    def detect_expression(self, landmarks):\n        # 嘴巴张开检测\n        mouth_open = abs(landmarks[13].y - landmarks[14].y)\n        if mouth_open > 0.05:\n            return 'surprise'\n\n        # 微笑检测\n        left = landmarks[61].y\n        right = landmarks[291].y\n        center = landmarks[13].y\n        if left < center and right < center:\n            return 'smile'\n\n        return 'neutral'\n\n    def play_music(self, expression):\n        if expression != self.last_expression and expression in self.sounds:\n            self.sounds[expression].play()\n            self.last_expression = expression\n```\n\n---"
    },
    {
      "title": "核心知识点",
      "content": "- **表情识别**：通过关键点相对位置判断表情\n- **常用关键点**：13(上唇)、14(下唇)、61(左嘴角)、291(右嘴角)\n- **pygame音频**：mixer.init()初始化，Sound()加载，play()播放\n\n---"
    },
    {
      "title": "导航",
      "content": "| 上一课 | 返回模块 | 下一课 |\n|--------|----------|--------|\n| [PYAI-2-3-04 眼控开关综合](PYAI-2-3-04_眼控开关综合.md) | [M3 交互式AI](_模块概览.md) | [PYAI-2-3-06 表情控制进阶](PYAI-2-3-06_表情控制进阶.md) |"
    }
  ],
  "full_content": "# [PYAI-2-3-05] 表情控制\n\n> **模块**：L2-M3 交互式AI\n> **认知负荷**：高\n> **核心技能**：关键点特征提取、pygame音频播放\n> **UID**：PYAI-23-05-001\n\n---\n\n## 课程基本信息\n\n| 项目 | 内容 |\n|------|------|\n| **课程编号** | PYAI 2-3-5 |\n| **课程名称** | 表情控制 |\n| **认知负荷** | 高 |\n| **核心技能** | 关键点特征提取、pygame音频播放 |\n| **项目内容** | 表情音乐播放器 |\n\n---\n\n## 详细教学流程\n\n### 步骤1：知识讲解（20分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"今天我们用FaceMesh识别表情！不同表情会播放不同音乐。\"\n>\n> \"**表情识别原理**：通过关键点的相对位置判断表情\n>\n> **嘴巴张开检测**：\n> ```python\n> # 上嘴唇和下嘴唇的关键点\n> upper_lip = landmarks[13]  # 上嘴唇中点\n> lower_lip = landmarks[14]  # 下嘴唇中点\n>\n> mouth_open = abs(upper_lip.y - lower_lip.y)\n> if mouth_open > 0.05:\n>     print('嘴巴张开了！')\n> ```\n>\n> **微笑检测**：\n> ```python\n> # 嘴角的关键点\n> left_corner = landmarks[61]   # 左嘴角\n> right_corner = landmarks[291] # 右嘴角\n> mouth_center = landmarks[13]  # 嘴唇中点\n>\n> # 嘴角上扬 = 微笑\n> if left_corner.y < mouth_center.y and right_corner.y < mouth_center.y:\n>     print('检测到微笑！')\n> ```\"\n\n### 步骤2：pygame音频播放（15分钟）\n\n`#中负荷-操练` `#IFC-即时`\n\n**教师话术**\n> \"学习用pygame播放音乐：\n> ```python\n> import pygame\n>\n> pygame.mixer.init()\n>\n> # 加载音乐\n> happy_music = pygame.mixer.Sound('happy.wav')\n> sad_music = pygame.mixer.Sound('sad.wav')\n>\n> # 播放音乐\n> if is_smiling:\n>     happy_music.play()\n> elif is_mouth_open:\n>     sad_music.play()\n> ```\"\n\n### 步骤3：代码实践（35分钟）\n\n`#高负荷-产出` `#IFC-即时`\n\n**教师话术**\n> \"创建一个表情音乐播放器：\n> - 微笑 → 播放欢快音乐\n> - 张嘴 → 播放惊讶音效\n> - 皱眉 → 播放悲伤音乐\"\n\n---\n\n## 变体示例\n\n| 学生情况 | 调整方案 | 说明 |\n|----------|----------|------|\n| 关键点索引记不住 | 提供索引表 | 打印常用关键点索引对照表 |\n| 音乐文件找不到 | 检查路径 | 使用绝对路径或放在同一目录 |\n| 表情识别不准 | 调整阈值 | 打印数值，根据实际情况调整 |\n| 想识别更多表情 | 组合特征 | 眉毛+嘴巴组合判断复杂表情 |\n\n---\n\n## 核心代码模式\n\n```python\n# 表情音乐播放器完整代码框架\nimport cv2\nimport mediapipe as mp\nimport pygame\n\npygame.mixer.init()\n\nclass ExpressionMusicPlayer:\n    def __init__(self):\n        self.face_mesh = mp.solutions.face_mesh.FaceMesh()\n        self.sounds = {\n            'smile': pygame.mixer.Sound('happy.wav'),\n            'surprise': pygame.mixer.Sound('surprise.wav')\n        }\n        self.last_expression = None\n\n    def detect_expression(self, landmarks):\n        # 嘴巴张开检测\n        mouth_open = abs(landmarks[13].y - landmarks[14].y)\n        if mouth_open > 0.05:\n            return 'surprise'\n\n        # 微笑检测\n        left = landmarks[61].y\n        right = landmarks[291].y\n        center = landmarks[13].y\n        if left < center and right < center:\n            return 'smile'\n\n        return 'neutral'\n\n    def play_music(self, expression):\n        if expression != self.last_expression and expression in self.sounds:\n            self.sounds[expression].play()\n            self.last_expression = expression\n```\n\n---\n\n## 核心知识点\n\n- **表情识别**：通过关键点相对位置判断表情\n- **常用关键点**：13(上唇)、14(下唇)、61(左嘴角)、291(右嘴角)\n- **pygame音频**：mixer.init()初始化，Sound()加载，play()播放\n\n---\n\n## 导航\n\n| 上一课 | 返回模块 | 下一课 |\n|--------|----------|--------|\n| [PYAI-2-3-04 眼控开关综合](PYAI-2-3-04_眼控开关综合.md) | [M3 交互式AI](_模块概览.md) | [PYAI-2-3-06 表情控制进阶](PYAI-2-3-06_表情控制进阶.md) |\n"
}